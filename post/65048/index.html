<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vmware-Exsi笔记本运行可行性报告 | Leo's Digital Genesis</title><meta name="author" content="Leonardo"><meta name="copyright" content="Leonardo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#FFF0F5"><meta name="description" content="前情提要 Vmware Exsi，可以安装在物理机上的虚拟机系统，可以在此基础上虚拟化很多子虚拟机，所以我想在我的Dell G15上安装，然后安装win+linux虚拟机，这样就可以无缝实现双系统或者多系统切换了，但是我现在有几个可行性的问题需要了解，1.exsi是否支持win上的休眠功能，可以保证在没有外接电源的情况下挂载内存关机，2.exsi是否免费使用，3.exsi是否支持我的想法以及有哪些">
<meta property="og:type" content="article">
<meta property="og:title" content="Vmware-Exsi笔记本运行可行性报告">
<meta property="og:url" content="https://cherises.github.io/post/65048/index.html">
<meta property="og:site_name" content="Leo&#39;s Digital Genesis">
<meta property="og:description" content="前情提要 Vmware Exsi，可以安装在物理机上的虚拟机系统，可以在此基础上虚拟化很多子虚拟机，所以我想在我的Dell G15上安装，然后安装win+linux虚拟机，这样就可以无缝实现双系统或者多系统切换了，但是我现在有几个可行性的问题需要了解，1.exsi是否支持win上的休眠功能，可以保证在没有外接电源的情况下挂载内存关机，2.exsi是否免费使用，3.exsi是否支持我的想法以及有哪些">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cherises.github.io/img/actor-1.jpg">
<meta property="article:published_time" content="2025-10-13T08:17:18.000Z">
<meta property="article:modified_time" content="2025-10-13T01:09:42.657Z">
<meta property="article:author" content="Leonardo">
<meta property="article:tag" content="Vmware-Exsi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cherises.github.io/img/actor-1.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vmware-Exsi笔记本运行可行性报告",
  "url": "https://cherises.github.io/post/65048/",
  "image": "https://cherises.github.io/img/actor-1.jpg",
  "datePublished": "2025-10-13T08:17:18.000Z",
  "dateModified": "2025-10-13T01:09:42.657Z",
  "author": [
    {
      "@type": "Person",
      "name": "Leonardo",
      "url": "https://github.com/Cherises/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://cherises.github.io/post/65048/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#2A1A22')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#FFF0F5')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":5,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vmware-Exsi笔记本运行可行性报告',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/admonition.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/banner-7.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">132</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">19</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 词云</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> 物界</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> 音乐馆</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/banner-7.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Leo's Digital Genesis</span></a><a class="nav-page-title" href="/"><span class="site-name">Vmware-Exsi笔记本运行可行性报告</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 词云</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> 物界</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> 音乐馆</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vmware-Exsi笔记本运行可行性报告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-10-13T08:17:18.000Z" title="Created 2025-10-13 08:17:18">2025-10-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-13T01:09:42.657Z" title="Updated 2025-10-13 01:09:42">2025-10-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/">study</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>15mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><blockquote>
<p>Vmware Exsi，可以安装在物理机上的虚拟机系统，可以在此基础上虚拟化很多子虚拟机，所以我想在我的Dell G15上安装，然后安装win+linux虚拟机，这样就可以无缝实现双系统或者多系统切换了，但是我现在有几个可行性的问题需要了解，1.exsi是否支持win上的休眠功能，可以保证在没有外接电源的情况下挂载内存关机，2.exsi是否免费使用，3.exsi是否支持我的想法以及有哪些平替软件。所以我在这里做一个详细的可行性报告</p>
</blockquote>
<h1 id="可行性报告-—-Dell-G15（i7-12700H-32GB-1TB-RTX3060）上用-VMware-ESXi-做多系统虚拟化的可行性与替代方案"><a href="#可行性报告-—-Dell-G15（i7-12700H-32GB-1TB-RTX3060）上用-VMware-ESXi-做多系统虚拟化的可行性与替代方案" class="headerlink" title="可行性报告 — Dell G15（i7-12700H &#x2F; 32GB &#x2F; 1TB &#x2F; RTX3060）上用 VMware ESXi 做多系统虚拟化的可行性与替代方案"></a>可行性报告 — Dell G15（i7-12700H &#x2F; 32GB &#x2F; 1TB &#x2F; RTX3060）上用 VMware ESXi 做多系统虚拟化的可行性与替代方案</h1><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><ol>
<li><p><strong>ESXi 本身不建议也不可靠地作为笔记本的“休眠主机”来实现断电&#x2F;断电池时自动把内存挂起保留状态。</strong></p>
<ul>
<li>虽然 ESXi 有 <em>“suspend VM”（将单个 VM 的内存状态写到磁盘）</em> 和某些版本的 <em>“suspend to memory”</em> 功能用于特定维护场景，但 <strong>把整台笔记本主机（运行 ESXi）在无外接电源时进入休眠&#x2F;挂起并保持 VM 完好恢复</strong> 在笔记本平台上既不稳定也不受官方支持。(<a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/335052/using-suspend-to-memory-feature-in-esxi.html?utm_source=cherises.github.io" title="Using &quot;Suspend to Memory&quot; feature in ESXi 7.0 Update 2">Support Portal</a>)</li>
</ul>
</li>
<li><p><strong>ESXi（vSphere Hypervisor）目前有可用的免费版本（Entry-level&#x2F;free hypervisor），可下载并在非生产&#x2F;家庭实验中使用，但功能受限且企业管理功能需要付费许可证。</strong> (<a target="_blank" rel="noopener" href="https://www.networkworld.com/article/3964957/vmware-quietly-brings-back-its-free-esxi-hypervisor.html?utm_source=cherises.github.io" title="Broadcom (quietly) brings back free VMware ESXi hypervisor">Network World</a>)</p>
</li>
<li><p><strong>总体上 ESXi 可以实现你“在一台机器上运行多个系统（Windows + Linux）并在它们间切换”的想法，但在笔记本（尤其带独立显卡、Wi-Fi、睡眠与电源管理）上存在许多兼容性与使用体验问题。</strong></p>
<ul>
<li>替代更适合笔记本使用的方案：<strong>KVM&#x2F;libvirt（Linux 主机）、Proxmox VE（基于 Debian + KVM，容易上手）或桌面型虚拟化（VMware Workstation &#x2F; VirtualBox）</strong>，这些在笔记本上更友好且支持主机休眠&#x2F;电源管理或更易于恢复 VM 状态。(<a target="_blank" rel="noopener" href="https://www.proxmox.com/en/products/proxmox-virtual-environment/get-started?utm_source=cherises.github.io" title="Installation - Proxmox Virtual Environment">Proxmox</a>)</li>
</ul>
</li>
</ol>
<h2 id="关键背景要点（为什么会这样）"><a href="#关键背景要点（为什么会这样）" class="headerlink" title="关键背景要点（为什么会这样）"></a>关键背景要点（为什么会这样）</h2><ul>
<li><p><strong>ESXi 是面向服务器&#x2F;机架式硬件设计的裸机（Type-1）Hypervisor。</strong> 它期望稳定的硬件（受支持的 NIC、整合的服务器芯片组、企业 BIOS&#x2F;UEFI 支持）——VMware 对硬件的支持由官方 HCL（Hardware Compatibility List）控制。笔记本很多设备（Wi-Fi、声卡、某些 GPU、触控板、电源管理节点）<strong>在 HCL 上通常不被列为支持</strong>，因此需要驱动补丁或根本无法工作。(<a target="_blank" rel="noopener" href="https://compatibilityguide.broadcom.com/search?program=software&utm_source=cherises.github.io" title="Guest OS - Broadcom | VMware | Hardware Compatibility Guide">Broadcom Compatibility Guide</a>)</p>
</li>
<li><p><strong>关于“休眠&#x2F;挂起”概念要分清两件事：</strong></p>
<ol>
<li><em>Guest OS（Windows）在虚拟机内能不能执行“休眠（hibernate）”？</em> —— 可以，Windows 在 VM 内执行 hibernate 与在物理机上类似（会把内存写入虚拟磁盘）。但如果主机（ESXi）被强制断电，除非你事先把 VM suspend&#x2F;save，否则 VM 的内存状态可能丢失或文件损坏。(<a target="_blank" rel="noopener" href="https://geek-university.com/suspending-a-virtual-machine/?utm_source=cherises.github.io" title="Suspending a virtual machine | VMware Workstation Player#">Geek University</a>)</li>
<li><em>Host（ESXi）本身像笔记本那样进入 S3&#x2F;S4（睡眠&#x2F;休眠）然后再恢复，同时保持运行中的 VMs？</em> —— ESXi 并不鼓励&#x2F;支持把服务器主机放到睡眠状态来保留 VMs。即便有“suspend to memory”在某些维护流程使用，它依赖特定平台特性（Quick Boot 等），并不是为笔记本电池休眠而设计。把整台 ESXi 笔记本放睡眠通常会使 VMs 停止或被强制暂停，风险较高。(<a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/335052/using-suspend-to-memory-feature-in-esxi.html?utm_source=cherises.github.io" title="Using &quot;Suspend to Memory&quot; feature in ESXi 7.0 Update 2">Support Portal</a>)</li>
</ol>
</li>
</ul>
<h2 id="针对问题详细回答"><a href="#针对问题详细回答" class="headerlink" title="针对问题详细回答"></a>针对问题详细回答</h2><h3 id="问题-1-—-ESXi-是否支持-Windows-的“休眠”功能（即在无外接电源时挂载内存并关机）？"><a href="#问题-1-—-ESXi-是否支持-Windows-的“休眠”功能（即在无外接电源时挂载内存并关机）？" class="headerlink" title="问题 1 — ESXi 是否支持 Windows 的“休眠”功能（即在无外接电源时挂载内存并关机）？"></a>问题 1 — <strong>ESXi 是否支持 Windows 的“休眠”功能（即在无外接电源时挂载内存并关机）？</strong></h3><ul>
<li><p><strong>短答：不可靠 &#x2F; 不推荐。</strong></p>
</li>
<li><p><strong>细节：</strong></p>
<ul>
<li>Windows 作为 <strong>guest</strong> 可以进行 hibernate（把内存写入 guest 的虚拟磁盘文件），这是 guest 内部的行为，ESXi 并不会阻止。但这要求你<strong>主动</strong>在 guest 内执行“休眠”而不是依赖主机断电自动触发。若主机被强制断电而没有事先 suspend VM，guest 的 hibernate 文件可能被损坏或虚拟磁盘变脏。</li>
<li>ESXi 有 VM suspend&#x2F;save 功能（将 VM 内存状态写盘并停止 VM），并且在 vSphere 场景下存在“suspend to memory”样的功能以便在快速重启时保留状态，但这些机制是为服务器维护设计、依赖特定平台和版本，并<strong>不等同于笔记本在电池耗尽时自动休眠并可靠恢复</strong>。在笔记本上把 ESXi 放入系统休眠通常会造成 I&#x2F;O 与驱动问题。(<a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/335052/using-suspend-to-memory-feature-in-esxi.html?utm_source=cherises.github.io" title="Using &quot;Suspend to Memory&quot; feature in ESXi 7.0 Update 2">Support Portal</a>)</li>
</ul>
</li>
</ul>
<p><strong>实际建议（针对你想要的“无缝切换&#x2F;电池模式”目标）</strong>：若你非常依赖在“拔掉电源时自动挂起整个工作环境并在重新上电后无缝恢复”的体验，<strong>更现实的做法是保留主机为常规桌面 OS（Windows 或 Linux）并用桌面型虚拟化（VMware Workstation &#x2F; VirtualBox）或使用 libvirt&#x2F;qemu（在 Linux 主机上）来管理 VM</strong>。这些方案在主机休眠&#x2F;恢复时更容易集成（例如 host suspend 前自动 suspend VMs，然后 resume）。VMware ESXi（裸机）不擅长做这件事。(<a target="_blank" rel="noopener" href="https://geek-university.com/suspending-a-virtual-machine/?utm_source=cherises.github.io" title="Suspending a virtual machine | VMware Workstation Player#">Geek University</a>)</p>
<h3 id="问题-2-—-ESXi-是否免费使用？"><a href="#问题-2-—-ESXi-是否免费使用？" class="headerlink" title="问题 2 — ESXi 是否免费使用？"></a>问题 2 — <strong>ESXi 是否免费使用？</strong></h3><ul>
<li><p><strong>短答：有免费版 &#x2F; 但功能有限且用于非生产场景。</strong></p>
</li>
<li><p><strong>细节：</strong></p>
<ul>
<li>Broadcom&#x2F;VMware 提供过免费的 vSphere Hypervisor（ESXi）下载和入门免费许可证（用于家庭&#x2F;实验&#x2F;非生产）。近几年（2024&#x2F;2025）官方又重新开放了免费 hypervisor 下载渠道，但企业级功能（vCenter、自动化、某些 API）需要付费许可证。免费版对 CPU 数量&#x2F;某些功能限制并且没有官方支持。(<a target="_blank" rel="noopener" href="https://www.networkworld.com/article/3964957/vmware-quietly-brings-back-its-free-esxi-hypervisor.html?utm_source=cherises.github.io" title="Broadcom (quietly) brings back free VMware ESXi hypervisor">Network World</a>)</li>
</ul>
</li>
</ul>
<h3 id="问题-3-—-ESXi-是否支持你的想法（在一台-Dell-笔记本上安装并跑-Win-Linux-VM，实现无缝多系统切换）？有哪些平替软件？"><a href="#问题-3-—-ESXi-是否支持你的想法（在一台-Dell-笔记本上安装并跑-Win-Linux-VM，实现无缝多系统切换）？有哪些平替软件？" class="headerlink" title="问题 3 — ESXi 是否支持你的想法（在一台 Dell 笔记本上安装并跑 Win + Linux VM，实现无缝多系统切换）？有哪些平替软件？"></a>问题 3 — <strong>ESXi 是否支持你的想法（在一台 Dell 笔记本上安装并跑 Win + Linux VM，实现无缝多系统切换）？有哪些平替软件？</strong></h3><ul>
<li><p><strong>短答：理论上可行，但实际体验和实现难度较高——尤其在笔记本上（驱动、显卡、睡眠、电源管理、GPU 输出、内置屏幕直连等都会成为问题）。更稳妥的替代方案是 KVM&#x2F;libvirt、Proxmox VE、或桌面虚拟化。</strong></p>
</li>
<li><p><strong>具体考量（针对你的 Dell G15 5520）：</strong></p>
<ol>
<li><strong>硬件兼容性（NIC、Wi-Fi、显卡、触控板等）</strong>：ESXi 在笔记本上经常碰到驱动不被识别的问题（例如 Realtek NIC&#x2F;Wi-Fi），你需要查 HCL 或社区补丁。笔记本的独立 GPU（RTX3060）在 ESXi 上做 PCIe passthrough（直通）到 Windows VM 通常非常复杂，且笔记本内部的 GPU 多数无法直接把笔记本屏幕作为直通输出（外接显示器更有可能）。社区帖子显示很多人在尝试，但通常需要折中和很多调试。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/vmware/comments/188urxr/how_do_you_know_if_a_pc_will_be_compatible_with/?utm_source=cherises.github.io" title="How do you know if a PC will be compatible with ESXi?">Reddit</a>)</li>
<li><strong>电源管理&#x2F;睡眠</strong>：笔记本的 ACPI &#x2F; S3&#x2F;S4 状态在 ESXi 上往往表现不佳；很多人报告 ESXi 主机会进入“pause”状态或网络&#x2F;设备异常。总体不推荐把 ESXi 当作笔记本主机的“主操作系统”以期待像 Windows&#x2F;Linux 那样的睡眠行为。(<a target="_blank" rel="noopener" href="https://serverfault.com/questions/53594/how-to-stop-vmware-host-that-keeps-going-into-pause-mode?utm_source=cherises.github.io" title="How to stop VMWare Host that keeps going into pause ...">Server Fault</a>)</li>
<li><strong>磁盘与引导</strong>：ESXi 安装会格式化磁盘并替换主机引导（除非你使用外置 SSD&#x2F;USB）。在笔记本上做 ESXi 会改变现有双启动结构，恢复成传统桌面可能需要重装或复杂恢复步骤。</li>
</ol>
</li>
<li><p><strong>替代（平替）推荐：</strong></p>
<ul>
<li><strong>Proxmox VE（KVM + LXC）</strong>：接近裸机体验，但更开放，社区活跃，支持 web 管理界面。可以在某些笔记本上安装，但同样需处理驱动与显卡直通问题。安装指南官方有。(<a target="_blank" rel="noopener" href="https://www.proxmox.com/en/products/proxmox-virtual-environment/get-started?utm_source=cherises.github.io" title="Installation - Proxmox Virtual Environment">Proxmox</a>)</li>
<li><strong>KVM &#x2F; libvirt（在 Linux 主机上）</strong>：如果你愿意把主机留作 Linux（Ubuntu&#x2F;Fedora 等），用 <code>virt-manager</code> 管理 VM，会在电源管理上更灵活（host suspend 前可以自动 suspend VMs），对笔记本更友好。</li>
<li><strong>VMware Workstation Pro &#x2F; Player（在 Windows 主机上）或 VirtualBox</strong>：作为桌面虚拟化，安装简单，对笔记本电源管理与休眠集成较好（可 suspend guest）；不需要放弃主机操作系统。</li>
<li><strong>QEMU + Looking-Glass &#x2F; GPU passthrough</strong>：如果你要把一台机器同时作为日常桌面与 “把 RTX3060 直通给 Windows VM 打游戏” 的复杂用例，这类方案能做到“几近无缝”的体验，但实现难度很高、尤其在笔记本上（散热、IOMMU 分组、双 GPU 配置、内置显示器路由）。社区示例很多但属于高难度 DIY。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/Proxmox/comments/1azloiw/proxmox_on_laptop/?utm_source=cherises.github.io" title="Proxmox on laptop?">Reddit</a>)</li>
</ul>
</li>
</ul>
<h2 id="针对你-Dell-G15-的逐项建议（一步步可执行）"><a href="#针对你-Dell-G15-的逐项建议（一步步可执行）" class="headerlink" title="针对你 Dell G15 的逐项建议（一步步可执行）"></a>针对你 Dell G15 的逐项建议（一步步可执行）</h2><h3 id="A-如果你非常想尝试-ESXi（实验-学习场景）"><a href="#A-如果你非常想尝试-ESXi（实验-学习场景）" class="headerlink" title="A. 如果你非常想尝试 ESXi（实验&#x2F;学习场景）"></a>A. 如果你<strong>非常想</strong>尝试 ESXi（实验&#x2F;学习场景）</h3><ol>
<li><strong>备份所有数据</strong>，制作恢复 Windows 的 USB（镜像）——因为 ESXi 安装可能覆写引导或磁盘分区。</li>
<li>在另一块外置 SSD 或 USB 上先安装 ESXi（不要直接覆写内置盘）。这样若失败能更容易回滚。</li>
<li>在 BIOS 中开启 VT-x&#x2F;VT-d（Intel VT）与 IOMMU（如果有），并暂时禁用 Secure Boot（很多 ESXi 版本与自制驱动与 Secure Boot 有冲突）。</li>
<li><strong>先做兼容性检查</strong>：查看你的网卡型号、存储控制器是否被 ESXi 识别（安装媒体的硬件检测或查看 ESXi 安装日志）。如果 Wi-Fi 或某些驱动不被识别，你需要准备 USB 网卡或外置以太网。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/vmware/comments/188urxr/how_do_you_know_if_a_pc_will_be_compatible_with/?utm_source=cherises.github.io" title="How do you know if a PC will be compatible with ESXi?">Reddit</a>)</li>
<li>实验阶段：先在 ESXi 上创建 Linux VM 做测试；测试网络、USB、磁盘、显卡 passthrough（如果你打算尝试直通）。注意：笔记本内屏通常不能直接被 passthrough，通常需要外接显示器连接到直通 GPU。</li>
<li>不要把你依赖的生产环境或重要文件放在运行在笔记本 ESXi 的 VM 上——风险较高且不受官方支持。</li>
</ol>
<p><strong>优点</strong>：学习纯裸金属 hypervisor、体验企业功能（vSphere Client 界面）。<br><strong>缺点</strong>：驱动兼容、电源与休眠问题、GPU passthrough 几乎是折腾级别。</p>
<p>相关参考（关于 ESXi 的 suspend &#x2F; VM suspend）：(<a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/335052/using-suspend-to-memory-feature-in-esxi.html?utm_source=cherises.github.io" title="Using &quot;Suspend to Memory&quot; feature in ESXi 7.0 Update 2">Support Portal</a>)</p>
<h3 id="B-更实用的替代配置（推荐给你）"><a href="#B-更实用的替代配置（推荐给你）" class="headerlink" title="B. 更实用的替代配置（推荐给你）"></a>B. 更实用的替代配置（推荐给你）</h3><p><strong>方案 1（我最推荐） — 在 Ubuntu&#x2F;Linux 主机上用 KVM + libvirt（virt-manager）</strong></p>
<ul>
<li>把主机系统装成 Linux（比如你之前提到在用 Ubuntu 24 &#x2F; Linux Mint 的经验很丰富），用 KVM 虚拟 Windows 和 Linux。</li>
<li>优点：更好处理主机睡眠（你可以用脚本在 host suspend 前自动保存&#x2F;暂停 VMs）；对笔记本硬件支持更友好；社区资料多；免费。</li>
<li>若要把 RTX3060 给 Windows VM 做 GPU passthrough，是可能的，但笔记本上难度大（IOMMU 分组、内置显示器路由等）。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/Proxmox/comments/1azloiw/proxmox_on_laptop/?utm_source=cherises.github.io" title="Proxmox on laptop?">Reddit</a>)</li>
</ul>
<p><strong>方案 2 — Proxmox VE（如果你想近似 ESXi 的裸机体验）</strong></p>
<ul>
<li>安装 Proxmox 在外置或独立磁盘上，测试硬件兼容性（官方安装页）。如果你准备用笔记本作为“home lab server”并有外接显示器&#x2F;键鼠，这是可行的。依旧面临驱动&#x2F;电源问题。(<a target="_blank" rel="noopener" href="https://www.proxmox.com/en/products/proxmox-virtual-environment/get-started?utm_source=cherises.github.io" title="Installation - Proxmox Virtual Environment">Proxmox</a>)</li>
</ul>
<p><strong>方案 3 — 桌面虚拟化（最轻量、最无痛）</strong></p>
<ul>
<li>在 Windows 主机上用 VMware Workstation &#x2F; Player 或 VirtualBox，直接创建 Windows&#x2F;Linux 虚拟机；这允许你在电池模式下用“suspend”保存 VM 状态，并且对 GPU&#x2F;显示器的集成最简单（缺点：性能与裸机 hypervisor 有差距，但对大多数开发&#x2F;日常任务已足够）。(<a target="_blank" rel="noopener" href="https://geek-university.com/suspending-a-virtual-machine/?utm_source=cherises.github.io" title="Suspending a virtual machine | VMware Workstation Player#">Geek University</a>)</li>
</ul>
<h2 id="风险清单（请注意）"><a href="#风险清单（请注意）" class="headerlink" title="风险清单（请注意）"></a>风险清单（请注意）</h2><ul>
<li><strong>驱动不支持</strong>（尤其 Wi-Fi、声卡、触控板、摄像头、独立 GPU 驱动）——可能需要外置设备或社区补丁。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/vmware/comments/188urxr/how_do_you_know_if_a_pc_will_be_compatible_with/?utm_source=cherises.github.io" title="How do you know if a PC will be compatible with ESXi?">Reddit</a>)</li>
<li><strong>主机睡眠&#x2F;电源管理行为不可预测</strong> —— ESXi 不为笔记本休眠场景优化。(<a target="_blank" rel="noopener" href="https://serverfault.com/questions/53594/how-to-stop-vmware-host-that-keeps-going-into-pause-mode?utm_source=cherises.github.io" title="How to stop VMWare Host that keeps going into pause ...">Server Fault</a>)</li>
<li><strong>GPU passthrough 在笔记本上不稳定&#x2F;受限</strong> —— 内置屏幕通常不能通过直通 GPU 输出，需要外接显示器作为折中。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/Proxmox/comments/1azloiw/proxmox_on_laptop/?utm_source=cherises.github.io" title="Proxmox on laptop?">Reddit</a>)</li>
<li><strong>保修&#x2F;支持问题</strong>：在笔记本上安装非官方方案（ESXi）可能会让厂商诊断支持复杂化。</li>
</ul>
<h2 id="推荐的具体执行步骤（省事又可回退的路线）"><a href="#推荐的具体执行步骤（省事又可回退的路线）" class="headerlink" title="推荐的具体执行步骤（省事又可回退的路线）"></a>推荐的具体执行步骤（省事又可回退的路线）</h2><ol>
<li><strong>保留现有系统</strong>，不要直接覆写内置盘。准备一个 512GB 或 1TB 外置 NVMe（或至少 256GB），用于实验安装 ESXi &#x2F; Proxmox。</li>
<li>先在<strong>外置盘 + 外接显示器</strong>上实验安装（如果你有外接显示器更安全）。</li>
<li>若目标是“在笔记本上偶尔跑多系统并能随时暂停&#x2F;恢复”——<strong>直接使用 VMware Workstation &#x2F; VirtualBox（Windows 主机）或 KVM（Linux 主机）</strong>，这是最无痛的。</li>
<li>若你仍想尝试 ESXi：查 NIC&#x2F;SSD 控制器、Wi-Fi 型号是否在 VMware HCL 或社区被证实可用（否则备用 Plan：带一个 USB 网卡、有线网口）。(<a target="_blank" rel="noopener" href="https://compatibilityguide.broadcom.com/search?program=software&utm_source=cherises.github.io" title="Guest OS - Broadcom | VMware | Hardware Compatibility Guide">Broadcom Compatibility Guide</a>)</li>
</ol>
<h2 id="参考-来源（用于你深入阅读）"><a href="#参考-来源（用于你深入阅读）" class="headerlink" title="参考&#x2F;来源（用于你深入阅读）"></a>参考&#x2F;来源（用于你深入阅读）</h2><ul>
<li>ESXi 的 “suspend to memory &#x2F; suspend VM” 官方说明（说明用例偏维护&#x2F;Quick Boot 相关）与技术细节。(<a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/335052/using-suspend-to-memory-feature-in-esxi.html?utm_source=cherises.github.io" title="Using &quot;Suspend to Memory&quot; feature in ESXi 7.0 Update 2">Support Portal</a>)</li>
<li>Broadcom &#x2F; VMware 与业界关于免费 ESXi&#x2F;vSphere Hypervisor 的报道（说明有免费入门版可用，但用于非生产与功能有限）。(<a target="_blank" rel="noopener" href="https://www.networkworld.com/article/3964957/vmware-quietly-brings-back-its-free-esxi-hypervisor.html?utm_source=cherises.github.io" title="Broadcom (quietly) brings back free VMware ESXi hypervisor">Network World</a>)</li>
<li>Proxmox 官方安装与入门（平替 KVM 的成熟方案）。(<a target="_blank" rel="noopener" href="https://www.proxmox.com/en/products/proxmox-virtual-environment/get-started?utm_source=cherises.github.io" title="Installation - Proxmox Virtual Environment">Proxmox</a>)</li>
<li>社区讨论：在消费台式&#x2F;笔记本上安装 ESXi &#x2F; Proxmox 的经验和常见问题（驱动、网络、GPU passthrough）。(<a target="_blank" rel="noopener" href="https://www.reddit.com/r/vmware/comments/188urxr/how_do_you_know_if_a_pc_will_be_compatible_with/?utm_source=cherises.github.io" title="How do you know if a PC will be compatible with ESXi?">Reddit</a>)</li>
</ul>
<hr>
<p>我现在的设备 <strong>Dell G15 5520（i7-12700H + 32 GB RAM + RTX 3060 笔记本独显）</strong> + <strong>Ubuntu 24.04</strong>，具备<strong>一定的显卡直通潜力</strong>，但“在 Linux 主机 → 虚拟 Windows → 运行 3A 游戏（如 原神）”要真正顺畅，需要满足<strong>一系列苛刻条件</strong>。</p>
<h2 id="🧠-总结先行：可行性结论"><a href="#🧠-总结先行：可行性结论" class="headerlink" title="🧠 总结先行：可行性结论"></a>🧠 总结先行：可行性结论</h2><table>
<thead>
<tr>
<th>方案</th>
<th>可行性</th>
<th>性能</th>
<th>稳定性</th>
<th>难度</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td><strong>KVM + GPU 直通（VFIO）</strong></td>
<td>✅ <em>理论可行</em></td>
<td>⭐⭐⭐⭐（接近原生）</td>
<td>⭐（笔记本极易出错）</td>
<td>🔥🔥🔥🔥（高）</td>
<td>内置屏幕无法用直通 GPU，需外接显示器</td>
</tr>
<tr>
<td><strong>Dual Boot 双系统（Windows + Ubuntu）</strong></td>
<td>✅ <em>推荐实用方案</em></td>
<td>⭐⭐⭐⭐⭐（原生）</td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐</td>
<td>切换需重启，但游戏体验最佳</td>
</tr>
<tr>
<td><strong>Wine &#x2F; Lutris &#x2F; Proton（直接在 Ubuntu 玩 Windows 游戏）</strong></td>
<td>✅ <em>最简单</em></td>
<td>⭐⭐～⭐⭐⭐</td>
<td>⭐⭐</td>
<td>⭐</td>
<td>对 DX11&#x2F;12 游戏兼容逐步提高，原神已能运行（需绕过 anti-cheat）</td>
</tr>
<tr>
<td><strong>云游戏 &#x2F; Steam Remote Play &#x2F; Sunshine + Moonlight（流式）</strong></td>
<td>✅</td>
<td>⭐⭐⭐⭐（取决网络）</td>
<td>⭐⭐⭐</td>
<td>⭐⭐</td>
<td>不需直通，体验接近 Windows 桌面</td>
</tr>
</tbody></table>
<h2 id="🧩-1-技术背景：为什么“显卡直通”在笔记本上极难"><a href="#🧩-1-技术背景：为什么“显卡直通”在笔记本上极难" class="headerlink" title="🧩 1. 技术背景：为什么“显卡直通”在笔记本上极难"></a>🧩 1. 技术背景：为什么“显卡直通”在笔记本上极难</h2><ol>
<li><p><strong>笔记本的 GPU 与内置屏幕是复合架构（MUX）</strong></p>
<ul>
<li>通常 dGPU (RTX 3060) → 经 MUX 或 NVIDIA Optimus → 内屏由 iGPU 输出。</li>
<li>直通 GPU 到 VM 后，它<strong>会独占整个 GPU 硬件</strong>，而此时<strong>主机 Linux 也失去 3060 的输出</strong>，你将看不到主机界面。</li>
<li>更重要的是：<strong>内置屏幕无法被直通 GPU 驱动</strong>。要玩游戏，你得<strong>外接显示器（HDMI&#x2F;USB-C 转 DP）</strong>。</li>
</ul>
</li>
<li><p><strong>IOMMU 分组与 BIOS 限制</strong></p>
<ul>
<li><p>需要 BIOS 支持 VT-d 和 IOMMU，并且显卡与音频在独立 IOMMU 组中。<br>一些笔记本（包括部分 G15 系列）将 GPU 与 其他设备绑定在同组，不可安全直通。<br>需验证：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dmesg | grep -e IOMMU -e DMAR</span><br><span class="line">find /sys/kernel/iommu_groups/ -<span class="built_in">type</span> l</span><br></pre></td></tr></table></figure>

<p>结果若 GPU 独立一组，才有希望。</p>
</li>
</ul>
</li>
<li><p><strong>驱动与 Optimus 冲突</strong></p>
<ul>
<li>NVIDIA 专有驱动不支持 host + guest 共用同一 GPU。</li>
<li>直通后主机端需禁用 NVIDIA 驱动或换成 Intel iGPU 输出（你的 12700H 带 Iris Xe 核显，可行）。</li>
<li>意味着：<strong>Linux 主机界面必须跑在 Intel 核显上，RTX 3060 专供 Windows VM。</strong></li>
</ul>
</li>
<li><p><strong>笔记本电源与散热</strong></p>
<ul>
<li>虚拟机内高负载 3A 游戏 → 发热大。ESXi 或 KVM 直通时，风扇控制往往失灵。需 <code>i8kutils</code> 或 <code>dell-smm-hwmon</code> 手动控速。</li>
</ul>
</li>
</ol>
<h2 id="🧱-2-实现路径（可行版本）"><a href="#🧱-2-实现路径（可行版本）" class="headerlink" title="🧱 2. 实现路径（可行版本）"></a>🧱 2. 实现路径（可行版本）</h2><h3 id="✅-方案-A：KVM-VFIO-显卡直通（专业折腾型）"><a href="#✅-方案-A：KVM-VFIO-显卡直通（专业折腾型）" class="headerlink" title="✅ 方案 A：KVM + VFIO 显卡直通（专业折腾型）"></a>✅ <strong>方案 A：KVM + VFIO 显卡直通（专业折腾型）</strong></h3><p><strong>目标</strong>：Ubuntu 为主机 → KVM 虚拟 Windows → RTX 3060 直通 → 外接显示器 玩 原神。</p>
<p><strong>必要条件检查</strong></p>
<ol>
<li><p>BIOS 开启：</p>
<ul>
<li><code>VT-x</code>, <code>VT-d</code>, <code>SR-IOV</code>, <code>Resizable BAR</code> 等（通常在 “Advanced → Virtualization → IOMMU&#x2F;VT-d”）。</li>
</ul>
</li>
<li><p>确认 IOMMU 启用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dmesg | grep -e DMAR -e IOMMU</span><br></pre></td></tr></table></figure>

<p>若输出含 “IOMMU enabled” 即可。</p>
</li>
<li><p>确认 GPU 分组独立：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /sys/kernel/iommu_groups/ -<span class="built_in">type</span> l | grep VGA</span><br></pre></td></tr></table></figure>

<p>若 GPU 独占一组（未与 USB 或 音频设备绑死），可直通。</p>
</li>
<li><p>准备：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install virt-manager qemu-kvm ovmf</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>核心思路</strong></p>
<ul>
<li>用 <code>VFIO</code> 驱动接管 RTX 3060；</li>
<li>Linux 主机使用 Iris Xe 输出桌面；</li>
<li>Windows VM 用 OVMF （UEFI） + 3060 直通；</li>
<li>外接显示器连在 3060 上；</li>
<li>声卡直通或用 USB 声卡；</li>
<li>控制 VM 用 SSH 或 VNC 登陆管理。</li>
</ul>
<p><strong>性能</strong></p>
<ul>
<li>成功配置后，游戏帧率约为 原生 90-98%，几乎无差。<br>（实测同类机型 R7-6800H + RTX 3070 经 VFIO 直通可稳定跑 GTA V &#x2F; 原神 60 FPS+）。</li>
</ul>
<p><strong>难点</strong></p>
<ul>
<li>每次内核更新需检查 VFIO 绑定；</li>
<li>笔记本 BIOS 或 MUX 不公开配置时，可能直接失败；</li>
<li>无内屏输出（必须外接显示器）。</li>
</ul>
<h3 id="✅-方案-B：原生双系统（推荐给你）"><a href="#✅-方案-B：原生双系统（推荐给你）" class="headerlink" title="✅ 方案 B：原生双系统（推荐给你）"></a>✅ <strong>方案 B：原生双系统（推荐给你）</strong></h3><p><strong>思路</strong></p>
<ul>
<li>保留 Ubuntu 24 + 再装 Windows 10&#x2F;11 双系统；</li>
<li>利用 UEFI + GRUB 实现快速选择；</li>
<li>游戏、显卡、风扇、电源全由 Windows 控制；</li>
<li>仍可在 Ubuntu 里用 KVM 做 Linux VM 或 轻度 Windows 测试。</li>
</ul>
<p><strong>优点</strong></p>
<ul>
<li>稳定、安全；</li>
<li>原神、Steam、其他 3A 原生运行；</li>
<li>电源管理完美；</li>
<li>无需折腾 VFIO。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>切换系统需重启（但几乎无性能损失）。</li>
</ul>
<h3 id="✅-方案-C：不直通，使用-Lutris-Proton-在-Linux-玩-原神"><a href="#✅-方案-C：不直通，使用-Lutris-Proton-在-Linux-玩-原神" class="headerlink" title="✅ 方案 C：不直通，使用 Lutris &#x2F; Proton 在 Linux 玩 原神"></a>✅ <strong>方案 C：不直通，使用 Lutris &#x2F; Proton 在 Linux 玩 原神</strong></h3><p><strong>原神现状（截至 2025）</strong></p>
<ul>
<li>反作弊 “MhyProtect” 对 Wine &#x2F; Proton 有兼容层补丁；</li>
<li>可在 Lutris 或 Proton GE 上运行（需特定 Wine 版本 + 启动参数）。</li>
</ul>
<p><strong>流程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install lutris wine winetricks</span><br></pre></td></tr></table></figure>

<p>安装社区 Genshin Lutris 脚本（或 Proton GE 版）。<br>性能约 Windows 原生 80-90%，支持 DXVK &#x2F;Vulkan 翻译层。</p>
<h3 id="✅-方案-D：使用-Sunshine-Moonlight-（或-Steam-Remote-Play）"><a href="#✅-方案-D：使用-Sunshine-Moonlight-（或-Steam-Remote-Play）" class="headerlink" title="✅ 方案 D：使用 Sunshine + Moonlight （或 Steam Remote Play）"></a>✅ <strong>方案 D：使用 Sunshine + Moonlight （或 Steam Remote Play）</strong></h3><p><strong>如果你还有一台 Windows 设备</strong></p>
<ul>
<li>在 Windows 上运行 Sunshine （开源 NVIDIA GameStream 服务）；</li>
<li>在 Ubuntu 上运行 Moonlight 客户端；</li>
<li>或反过来，通过网络串流玩 Windows 游戏；</li>
<li>几乎零折腾，支持 4K + 高帧率。</li>
</ul>
<h2 id="🔧-建议路线"><a href="#🔧-建议路线" class="headerlink" title="🔧 建议路线"></a>🔧 建议路线</h2><table>
<thead>
<tr>
<th>目标</th>
<th>推荐方案</th>
</tr>
</thead>
<tbody><tr>
<td>想“无缝切换”系统、打原神流畅</td>
<td>→ <strong>双系统方案 (B)</strong></td>
</tr>
<tr>
<td>想尝试技术极限、研究虚拟化直通</td>
<td>→ <strong>KVM + VFIO 方案 (A)</strong></td>
</tr>
<tr>
<td>不想重启，只想偶尔玩</td>
<td>→ <strong>Proton&#x2F;Lutris 方案 (C)</strong></td>
</tr>
<tr>
<td>有另一台 Windows 主机</td>
<td>→ <strong>串流 方案 (D)</strong></td>
</tr>
</tbody></table>
<h2 id="⚠️-关键提醒"><a href="#⚠️-关键提醒" class="headerlink" title="⚠️ 关键提醒"></a>⚠️ 关键提醒</h2><ol>
<li><strong>笔记本直通风险高</strong>：错误绑定 VFIO 可能导致 系统 black screen 或 kernel panic；</li>
<li><strong>需外接显示器</strong>：内屏无法用 dGPU 直通输出；</li>
<li><strong>风扇控制失灵</strong>：可装 <code>dell-smm-hwmon</code> 调速；</li>
<li><strong>建议先备份</strong>：尤其 GRUB 配置与 EFI 分区。</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://cherises.github.io/post/65048/">https://cherises.github.io/post/65048/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vmware-Exsi/">Vmware-Exsi</a></div><div class="post-share"><div class="social-share" data-image="/img/actor-1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/post/45530/" title="KUbuntu24睡眠后掉帧的问题分析"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">KUbuntu24睡眠后掉帧的问题分析</div></div><div class="info-2"><div class="info-item-1">前情提要 我的Kubuntu24在使用一段时间后165hz的刷新率会掉帧到很低，就是明显的感觉到页面动画卡顿，除了我经常使用sleep休眠以外，没有关过机以外，没什么其他的操作，反而是我重启后掉帧就消失了，所以我来分析一下原因。  🧩 一、问题特征总结 描述的情况：   165Hz 高刷屏幕 使用 Kubuntu 24（基于 KDE Plasma 6） RTX 3060（NVIDIA）独显 经常使用 Sleep&#x2F;休眠，几乎不关机 一段时间后页面动画掉帧、系统卡顿明显 重启后恢复正常  这说明：✅ 并非 CPU 或内存泄漏问题（重启能恢复）❌ 很可能是 GPU 驱动或桌面合成器（KWin）状态异常。 ⚙️ 二、可能的原因（从高到低概率）1️⃣ NVIDIA 驱动的功耗管理 Bug（最常见） NVIDIA 的 Linux 驱动在高刷显示器和动态功耗切换（PowerMizer）时，常出现 GPU 频率锁定过低的问题。  症状：  正常时 GPU core clock 能上 1000MHz+，掉帧时锁定在 210MHz 或 405MHz。 这通常在休眠恢复后最容易出现。  2...</div></div></div></a><a class="pagination-related" href="/post/6116/" title="常用浏览器对比"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">常用浏览器对比</div></div><div class="info-2"><div class="info-item-1">常见浏览器比较报告 — Chrome &#x2F; Brave &#x2F; Firefox &#x2F; Tor Browser（详尽对比：安全、隐私、易用性、目标用户等）下面把四款常见浏览器按关键维度做系统性对比——并给出适用人群与实用建议。结论基于官方说明与近期权威综述（引用见文末）。我先给一个快速概览表，再逐项拆解重点与实操建议。    维度 &#x2F; 浏览器 Google Chrome Brave Mozilla Firefox Tor Browser    默认安全性（沙箱、网站隔离、恶意检测） ★★★★★（强）。沙箱、站点隔离、钓鱼&#x2F;恶意检测等官方强化。(safety.google) ★★★★☆（良好） — 基于Chromium，继承许多安全特性，同时默认屏蔽追踪。(Brave) ★★★★☆（良好） — 主动推送安全功能（HTTPS-only、DoH 等）；更新频繁。(Mozilla 支持) ★★★☆☆（专注匿名） — 安全性强，但为匿名路由流量可能牺牲某些浏览器层面的性能&#x2F;功能。(privacytools.io)   隐私保护（默认追踪阻断...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Leonardo</div><div class="author-info-description">Focus on thinking, imagination, reasoning, truth-seeking, and pragmatism</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">132</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Cherises/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:zhaozhinet@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">前情提要</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%AF%E8%A1%8C%E6%80%A7%E6%8A%A5%E5%91%8A-%E2%80%94-Dell-G15%EF%BC%88i7-12700H-32GB-1TB-RTX3060%EF%BC%89%E4%B8%8A%E7%94%A8-VMware-ESXi-%E5%81%9A%E5%A4%9A%E7%B3%BB%E7%BB%9F%E8%99%9A%E6%8B%9F%E5%8C%96%E7%9A%84%E5%8F%AF%E8%A1%8C%E6%80%A7%E4%B8%8E%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="toc-number"></span> <span class="toc-text">可行性报告 — Dell G15（i7-12700H &#x2F; 32GB &#x2F; 1TB &#x2F; RTX3060）上用 VMware ESXi 做多系统虚拟化的可行性与替代方案</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">1.</span> <span class="toc-text">结论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E8%83%8C%E6%99%AF%E8%A6%81%E7%82%B9%EF%BC%88%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E8%BF%99%E6%A0%B7%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">关键背景要点（为什么会这样）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%92%88%E5%AF%B9%E9%97%AE%E9%A2%98%E8%AF%A6%E7%BB%86%E5%9B%9E%E7%AD%94"><span class="toc-number">3.</span> <span class="toc-text">针对问题详细回答</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98-1-%E2%80%94-ESXi-%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81-Windows-%E7%9A%84%E2%80%9C%E4%BC%91%E7%9C%A0%E2%80%9D%E5%8A%9F%E8%83%BD%EF%BC%88%E5%8D%B3%E5%9C%A8%E6%97%A0%E5%A4%96%E6%8E%A5%E7%94%B5%E6%BA%90%E6%97%B6%E6%8C%82%E8%BD%BD%E5%86%85%E5%AD%98%E5%B9%B6%E5%85%B3%E6%9C%BA%EF%BC%89%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">问题 1 — ESXi 是否支持 Windows 的“休眠”功能（即在无外接电源时挂载内存并关机）？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98-2-%E2%80%94-ESXi-%E6%98%AF%E5%90%A6%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8%EF%BC%9F"><span class="toc-number">3.2.</span> <span class="toc-text">问题 2 — ESXi 是否免费使用？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98-3-%E2%80%94-ESXi-%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E4%BD%A0%E7%9A%84%E6%83%B3%E6%B3%95%EF%BC%88%E5%9C%A8%E4%B8%80%E5%8F%B0-Dell-%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E8%B7%91-Win-Linux-VM%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%97%A0%E7%BC%9D%E5%A4%9A%E7%B3%BB%E7%BB%9F%E5%88%87%E6%8D%A2%EF%BC%89%EF%BC%9F%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B9%B3%E6%9B%BF%E8%BD%AF%E4%BB%B6%EF%BC%9F"><span class="toc-number">3.3.</span> <span class="toc-text">问题 3 — ESXi 是否支持你的想法（在一台 Dell 笔记本上安装并跑 Win + Linux VM，实现无缝多系统切换）？有哪些平替软件？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%92%88%E5%AF%B9%E4%BD%A0-Dell-G15-%E7%9A%84%E9%80%90%E9%A1%B9%E5%BB%BA%E8%AE%AE%EF%BC%88%E4%B8%80%E6%AD%A5%E6%AD%A5%E5%8F%AF%E6%89%A7%E8%A1%8C%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">针对你 Dell G15 的逐项建议（一步步可执行）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-%E5%A6%82%E6%9E%9C%E4%BD%A0%E9%9D%9E%E5%B8%B8%E6%83%B3%E5%B0%9D%E8%AF%95-ESXi%EF%BC%88%E5%AE%9E%E9%AA%8C-%E5%AD%A6%E4%B9%A0%E5%9C%BA%E6%99%AF%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">A. 如果你非常想尝试 ESXi（实验&#x2F;学习场景）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-%E6%9B%B4%E5%AE%9E%E7%94%A8%E7%9A%84%E6%9B%BF%E4%BB%A3%E9%85%8D%E7%BD%AE%EF%BC%88%E6%8E%A8%E8%8D%90%E7%BB%99%E4%BD%A0%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">B. 更实用的替代配置（推荐给你）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A3%8E%E9%99%A9%E6%B8%85%E5%8D%95%EF%BC%88%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">风险清单（请注意）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E7%9A%84%E5%85%B7%E4%BD%93%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4%EF%BC%88%E7%9C%81%E4%BA%8B%E5%8F%88%E5%8F%AF%E5%9B%9E%E9%80%80%E7%9A%84%E8%B7%AF%E7%BA%BF%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">推荐的具体执行步骤（省事又可回退的路线）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83-%E6%9D%A5%E6%BA%90%EF%BC%88%E7%94%A8%E4%BA%8E%E4%BD%A0%E6%B7%B1%E5%85%A5%E9%98%85%E8%AF%BB%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">参考&#x2F;来源（用于你深入阅读）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%A0-%E6%80%BB%E7%BB%93%E5%85%88%E8%A1%8C%EF%BC%9A%E5%8F%AF%E8%A1%8C%E6%80%A7%E7%BB%93%E8%AE%BA"><span class="toc-number">8.</span> <span class="toc-text">🧠 总结先行：可行性结论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%A9-1-%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E2%80%9C%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A%E2%80%9D%E5%9C%A8%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E6%9E%81%E9%9A%BE"><span class="toc-number">9.</span> <span class="toc-text">🧩 1. 技术背景：为什么“显卡直通”在笔记本上极难</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%B1-2-%E5%AE%9E%E7%8E%B0%E8%B7%AF%E5%BE%84%EF%BC%88%E5%8F%AF%E8%A1%8C%E7%89%88%E6%9C%AC%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">🧱 2. 实现路径（可行版本）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%96%B9%E6%A1%88-A%EF%BC%9AKVM-VFIO-%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A%EF%BC%88%E4%B8%93%E4%B8%9A%E6%8A%98%E8%85%BE%E5%9E%8B%EF%BC%89"><span class="toc-number">10.1.</span> <span class="toc-text">✅ 方案 A：KVM + VFIO 显卡直通（专业折腾型）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%96%B9%E6%A1%88-B%EF%BC%9A%E5%8E%9F%E7%94%9F%E5%8F%8C%E7%B3%BB%E7%BB%9F%EF%BC%88%E6%8E%A8%E8%8D%90%E7%BB%99%E4%BD%A0%EF%BC%89"><span class="toc-number">10.2.</span> <span class="toc-text">✅ 方案 B：原生双系统（推荐给你）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%96%B9%E6%A1%88-C%EF%BC%9A%E4%B8%8D%E7%9B%B4%E9%80%9A%EF%BC%8C%E4%BD%BF%E7%94%A8-Lutris-Proton-%E5%9C%A8-Linux-%E7%8E%A9-%E5%8E%9F%E7%A5%9E"><span class="toc-number">10.3.</span> <span class="toc-text">✅ 方案 C：不直通，使用 Lutris &#x2F; Proton 在 Linux 玩 原神</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%96%B9%E6%A1%88-D%EF%BC%9A%E4%BD%BF%E7%94%A8-Sunshine-Moonlight-%EF%BC%88%E6%88%96-Steam-Remote-Play%EF%BC%89"><span class="toc-number">10.4.</span> <span class="toc-text">✅ 方案 D：使用 Sunshine + Moonlight （或 Steam Remote Play）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%A7-%E5%BB%BA%E8%AE%AE%E8%B7%AF%E7%BA%BF"><span class="toc-number">11.</span> <span class="toc-text">🔧 建议路线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E5%85%B3%E9%94%AE%E6%8F%90%E9%86%92"><span class="toc-number">12.</span> <span class="toc-text">⚠️ 关键提醒</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/51874/" title="Ubuntu24可以做的事情">Ubuntu24可以做的事情</a><time datetime="2025-10-16T14:33:48.000Z" title="Created 2025-10-16 14:33:48">2025-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/54524/" title="UML类图存储与转换分析报告">UML类图存储与转换分析报告</a><time datetime="2025-10-13T14:41:52.000Z" title="Created 2025-10-13 14:41:52">2025-10-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/45530/" title="KUbuntu24睡眠后掉帧的问题分析">KUbuntu24睡眠后掉帧的问题分析</a><time datetime="2025-10-13T08:18:12.000Z" title="Created 2025-10-13 08:18:12">2025-10-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65048/" title="Vmware-Exsi笔记本运行可行性报告">Vmware-Exsi笔记本运行可行性报告</a><time datetime="2025-10-13T08:17:18.000Z" title="Created 2025-10-13 08:17:18">2025-10-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6116/" title="常用浏览器对比">常用浏览器对比</a><time datetime="2025-10-12T15:07:44.000Z" title="Created 2025-10-12 15:07:44">2025-10-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By Leonardo</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章🔍" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script data-pjax src="https://unpkg.com/oh-my-live2d"></script><script>const oml2d = OML2D.loadOml2d({menus:{items:[]},libraryUrls:{"complete":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/complete.js","cubism2":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism2.js","cubism5":"https://cdn.jsdelivr.net/npm/live2dcubismcore@5.1.0/live2dcubismcore.min.js"},mobileDisplay:false,models:[{"path":"/models/bilibili-22/index.json","mobilePosition":[-10,23],"mobileScale":0.1,"mobileStageStyle":{"width":180,"height":166},"motionPreloadStrategy":"IDLE","position":[-10,100],"scale":0.15,"stageStyle":{"width":300,"height":280}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":230,"height":120,"left":"calc(50% - 20px)","top":"-80px"},mobileStyle: {"width":180,"height":50,"left":"calc(50% - 30px)","top":"-100px"},idleTips:{interval:15000,message:["你好呀~😊","欢迎来到我的博客~o(*￣▽￣*)ブ","今天过得怎么样呀？(●'◡'●)","发现一个认真阅读的小可爱！","要一起学习吗？(✧ω✧)","今天也是充满希望的一天！☀️","今天有什么计划吗？🎉","嘿嘿，被我发现了哦~😏","代码写累了？休息一下吧~💻","你知道吗？你笑起来很好看！😄","要不要听个笑话？😜","悄悄告诉你个秘密...🤫","哇！你翻到这里了，好厉害！👏","今天有遇到什么有趣的事吗？🎈","保持好奇心是很棒的事情呢！🔍","阅读让世界更美好~📚","嘿！别戳我啦，好痒~>_<~","天气转凉了，记得添件衣服哦~🍂","周末宅家还是出门玩呢？🏠🌳","发现一枚小可爱！(ฅ>ω<*ฅ)","要喝杯水休息一下吗？💧","你的支持是我最大的动力！💪","嘿嘿，我又看到你了哦~👀","今天学习/工作辛苦了！✨","保持微笑，生活会更美好~😊","你知道吗？猫有230根骨头哦！🐱","周末就是要放松一下呢~🛋️","嘿！朋友，最近怎么样？🤗","坚持阅读的人超有魅力！📖","要不要和我一起发呆？(～￣▽￣)～","雨天最适合窝在家里了~☔","你专注的样子真好看！❤️","新的一天，新的开始！🌄","偶尔放松一下也没关系哦~🎵","嘿嘿，猜猜我在想什么？🤔","保持好心情最重要啦！💖","周末有空常来玩呀~🎊","你今天的表现很棒哦！⭐","感谢你的到来和陪伴！🙏","哇，你又来看我啦！(*^▽^*)","今天有什么新鲜事分享吗？🌟","要记得按时吃饭哦~🍚","嘿嘿，偷偷告诉你个小秘密...🤐","你真是我最忠实的读者呢！❤️","窗外阳光真好，要不要出去走走？☀️","深夜党注意休息时间啦~🌙","新技能get了吗？📚","今天也要保持好心情哦！💕","猜猜我今天换了什么发型？💇","周末打算去哪里玩呢？🎡","嘿嘿，我又学会了一个新动作！💃","保持好奇心是很好的品质呢！🔍","要喝杯咖啡提神吗？☕","你真是越来越厉害了呢！👑","雨天最适合在家看书了~📖","今天遇到什么开心的事了吗？🎉","保持微笑，好运自然来~😊","要不要听我唱首歌？🎵","冬天来了，记得多穿点~❄️","发现一枚认真学习的学霸！🏆","周末宅家也是一种享受呢~🏠","你今天看起来特别精神！✨","要适当让眼睛休息一下哦~👀","嘿嘿，我又发现你了！🔎","今天学到了什么新知识？🧠","保持积极心态很重要呢！💪","要不要一起看星星？⭐","春天来了，花儿都开了呢~🌷","你真是我的超级粉丝！🥰","深夜写作灵感爆发期？📝","今天也要努力加油哦！🔥","周末愉快，放松一下~🎶","嘿嘿，我又长高了一点！📏","保持阅读习惯很棒呢！📚","要记得经常活动一下身体~🏃","你今天特别好看哦！💖","夏天到了，注意防暑~🍉","发现一个专注的小可爱！🐰","今天有什么目标要完成？🎯","保持热情，追逐梦想~🌈","要不要一起喝茶聊天？🍵","秋天收获的季节到了~🍂","你真是我最喜欢的访客！🤗","清晨是最佳学习时间哦~🌅","今天也要保持微笑！😄","周末计划去哪里探险？🗺️","嘿嘿，我又变聪明了一点！🧠","保持学习态度很优秀呢！🎓","要记得多补充水分哦~💦","你今天格外有魅力！💫","冬天暖洋洋的被窝最舒服~🛏️","发现一个坚持不懈的战士！⚔️","今天有什么新发现？🔭","保持耐心，好事会发生~🕰️","要不要一起做运动？🏀","春天播种希望的季节~🌱","你真是我的灵感源泉！💡","午后小憩一会儿也不错~😴","今天也要充满活力！⚡","周末享受慢生活时光~🐌","嘿嘿，我又学会新技能！🎨","保持思考习惯很厉害呢！🤔","要记得保护眼睛健康~👓","你今天气场全开！👑","夏天海边吹风最惬意~🌊","发现一个创造力爆棚的天才！🎭","今天有什么奇思妙想？💭","保持乐观，困难会过去~🌤️","要不要一起看场电影？🎬","秋天登高望远好时节~🏔️","你真是我的幸运星！🍀","傍晚散步放松心情~🌇","今天也要相信自己！🌟","周末家庭团聚时光~👨‍👩‍👧‍👦","嘿嘿，我又进步了一点！📈","保持求知欲很棒呢！🔬","要记得保持正确坐姿~💺","你今天闪闪发光！✨","冬天热腾腾的火锅最棒~🍲","发现一个勇于挑战的勇者！🛡️","今天有什么新突破？🚀","保持善良，世界更美好~🌍","要不要一起做美食？🍳","春天野餐郊游正当时~🧺","你真是我的能量来源！🔋","午夜灵感最丰富时刻~🌌","今天也要勇往直前！🏃‍♂️","周末朋友聚会欢乐多~🎊","嘿嘿，我又成长了一些！🌱","保持探索精神很赞呢！🗺️","要记得深呼吸放松~🌬️","你今天魅力无限！💫","夏天冰镇西瓜最解暑~🍉","发现一个善于思考的智者！📚","今天有什么新创意？🎨","保持真诚，友谊长久~🤝","要不要一起看日落？🌅","秋天收获成果的时刻~🍎","你真是我的开心果！😄"]}}});</script><!-- hexo injector body_end end --></body></html>