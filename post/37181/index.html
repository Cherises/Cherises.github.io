<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“ | Leo's Digital Genesis</title><meta name="author" content="Leonardo"><meta name="copyright" content="Leonardo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å‰æƒ…æè¦ æœ€è¿‘åœ¨å­¦ä¹ å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ—¶ï¼Œæœ‰ä¸€æ®µç”¨Pythonçš„requestsåº“çˆ¬å–ç½‘é¡µçš„ä»£ç ï¼Œé‚£ä¹ˆæˆ‘å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½ç¼–å†™ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œç”¨æ¥è°ƒç”¨å¸‚é¢ä¸Šå¸¸ç”¨çš„æ–°é—»å¹³å°ï¼Œæœ€åæ±‡é›†ä¹‹åç”¨å¤§æ¨¡å‹è§£æå‘¢ï¼Œè¯´å¹²å°±å¹²ï¼Œå…ˆæ˜¯å¯¹ç™¾åº¦æ–°é—»ä¸‹æ‰‹ï¼Œå¯æƒœç™¾åº¦æ–°é—»çš„åˆ—è¡¨å¯ä»¥è·å–ï¼Œä½†å®ƒå¤§éƒ½æ˜¯ç‚¹å‡»åè°ƒç”¨çš„ç™¾åº¦æœç´¢è¿›è¡Œçš„æŸ¥è¯¢ï¼Œè¿™æ ·ä¹Ÿç®—æ˜¯å¯ä»¥éšæœºè·å–æœ€æ–°æ¶ˆæ¯çš„ä¸€ç§é€”å¾„å§ï¼Œä½†ä¸æ˜¯æˆ‘é¢„æœŸçš„æ•ˆæœï¼Œä¹‹åè¾—è½¬åˆ°ç½‘æ˜“è€å¤§å“¥ä¸Šï¼Œå‘ç°æ­£åˆæˆ‘æ„ï¼Œäºæ˜¯å…ˆ">
<meta property="og:type" content="article">
<meta property="og:title" content="è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“">
<meta property="og:url" content="https://cherises.github.io/post/37181/index.html">
<meta property="og:site_name" content="Leo&#39;s Digital Genesis">
<meta property="og:description" content="å‰æƒ…æè¦ æœ€è¿‘åœ¨å­¦ä¹ å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ—¶ï¼Œæœ‰ä¸€æ®µç”¨Pythonçš„requestsåº“çˆ¬å–ç½‘é¡µçš„ä»£ç ï¼Œé‚£ä¹ˆæˆ‘å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½ç¼–å†™ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œç”¨æ¥è°ƒç”¨å¸‚é¢ä¸Šå¸¸ç”¨çš„æ–°é—»å¹³å°ï¼Œæœ€åæ±‡é›†ä¹‹åç”¨å¤§æ¨¡å‹è§£æå‘¢ï¼Œè¯´å¹²å°±å¹²ï¼Œå…ˆæ˜¯å¯¹ç™¾åº¦æ–°é—»ä¸‹æ‰‹ï¼Œå¯æƒœç™¾åº¦æ–°é—»çš„åˆ—è¡¨å¯ä»¥è·å–ï¼Œä½†å®ƒå¤§éƒ½æ˜¯ç‚¹å‡»åè°ƒç”¨çš„ç™¾åº¦æœç´¢è¿›è¡Œçš„æŸ¥è¯¢ï¼Œè¿™æ ·ä¹Ÿç®—æ˜¯å¯ä»¥éšæœºè·å–æœ€æ–°æ¶ˆæ¯çš„ä¸€ç§é€”å¾„å§ï¼Œä½†ä¸æ˜¯æˆ‘é¢„æœŸçš„æ•ˆæœï¼Œä¹‹åè¾—è½¬åˆ°ç½‘æ˜“è€å¤§å“¥ä¸Šï¼Œå‘ç°æ­£åˆæˆ‘æ„ï¼Œäºæ˜¯å…ˆ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png">
<meta property="article:published_time" content="2025-11-16T17:20:17.000Z">
<meta property="article:modified_time" content="2025-11-16T09:33:50.005Z">
<meta property="article:author" content="Leonardo">
<meta property="article:tag" content="Ollama">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="å¤§æ¨¡å‹">
<meta property="article:tag" content="å¤§æ¨¡å‹åº”ç”¨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“",
  "url": "https://cherises.github.io/post/37181/",
  "image": "https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png",
  "datePublished": "2025-11-16T17:20:17.000Z",
  "dateModified": "2025-11-16T09:33:50.005Z",
  "author": [
    {
      "@type": "Person",
      "name": "Leonardo",
      "url": "https://github.com/Cherises/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://cherises.github.io/post/37181/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":5,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/admonition.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/img/b1.webp);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">143</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">23</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> WuJie</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Leo's Digital Genesis</span></a><a class="nav-page-title" href="/"><span class="site-name">è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> WuJie</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-11-16T17:20:17.000Z" title="Created 2025-11-16 17:20:17">2025-11-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-11-16T09:33:50.005Z" title="Updated 2025-11-16 09:33:50">2025-11-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/">study</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">4.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>22mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h3 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h3><blockquote>
<p>æœ€è¿‘åœ¨å­¦ä¹ å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ—¶ï¼Œæœ‰ä¸€æ®µç”¨Pythonçš„requestsåº“çˆ¬å–ç½‘é¡µçš„ä»£ç ï¼Œé‚£ä¹ˆæˆ‘å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½ç¼–å†™ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œç”¨æ¥è°ƒç”¨å¸‚é¢ä¸Šå¸¸ç”¨çš„æ–°é—»å¹³å°ï¼Œæœ€åæ±‡é›†ä¹‹åç”¨å¤§æ¨¡å‹è§£æå‘¢ï¼Œè¯´å¹²å°±å¹²ï¼Œå…ˆæ˜¯å¯¹ç™¾åº¦æ–°é—»ä¸‹æ‰‹ï¼Œå¯æƒœç™¾åº¦æ–°é—»çš„åˆ—è¡¨å¯ä»¥è·å–ï¼Œä½†å®ƒå¤§éƒ½æ˜¯ç‚¹å‡»åè°ƒç”¨çš„ç™¾åº¦æœç´¢è¿›è¡Œçš„æŸ¥è¯¢ï¼Œè¿™æ ·ä¹Ÿç®—æ˜¯å¯ä»¥éšæœºè·å–æœ€æ–°æ¶ˆæ¯çš„ä¸€ç§é€”å¾„å§ï¼Œä½†ä¸æ˜¯æˆ‘é¢„æœŸçš„æ•ˆæœï¼Œä¹‹åè¾—è½¬åˆ°ç½‘æ˜“è€å¤§å“¥ä¸Šï¼Œå‘ç°æ­£åˆæˆ‘æ„ï¼Œäºæ˜¯å…ˆæŠŠç½‘æ˜“çš„æ–°é—»çˆ¬ä¸‹æ¥è¿›è¡Œæµ‹è¯•ï¼Œæœªæ¥ä¹Ÿæœ‰æ‰“ç®—æŠŠå¸¸ç”¨å¹³å°å…¨éƒ¨æ•´åˆä¸€ä¸‹ï¼Œä½†ç°åœ¨å…ˆå‘å¸ƒè¿™ä¸€ä¸ªå¹³å°å§ã€‚</p>
</blockquote>
<h1 id="ğŸ¤–-Python-Tkinter-Ollamaï¼šæ„å»ºç½‘æ˜“æ–°é—»AIè‡ªåŠ¨åŒ–æ€»ç»“ç³»ç»Ÿ"><a href="#ğŸ¤–-Python-Tkinter-Ollamaï¼šæ„å»ºç½‘æ˜“æ–°é—»AIè‡ªåŠ¨åŒ–æ€»ç»“ç³»ç»Ÿ" class="headerlink" title="ğŸ¤– Python + Tkinter + Ollamaï¼šæ„å»ºç½‘æ˜“æ–°é—»AIè‡ªåŠ¨åŒ–æ€»ç»“ç³»ç»Ÿ"></a>ğŸ¤– Python + Tkinter + Ollamaï¼šæ„å»ºç½‘æ˜“æ–°é—»AIè‡ªåŠ¨åŒ–æ€»ç»“ç³»ç»Ÿ</h1><p>è¿™æ˜¯ä¸€ä¸ªç»“åˆäº†<strong>å¤šçº¿ç¨‹çˆ¬è™«ã€Tkinter GUI</strong> å’Œ <strong>æœ¬åœ°å¤§æ¨¡å‹ï¼ˆOllamaï¼‰</strong> çš„å®Œæ•´åº”ç”¨æ¡ˆä¾‹ã€‚å®ƒèƒ½å¤Ÿå¹¶å‘æŠ“å–ç½‘æ˜“æ–°é—»å¤šä¸ªåˆ†ç±»çš„å®æ—¶é“¾æ¥ï¼Œè·å–æ–°é—»å†…å®¹ï¼Œå¹¶é€šè¿‡æœ¬åœ°éƒ¨ç½²çš„LLMï¼ˆå¦‚Qwen2.5ï¼‰å¯¹å†…å®¹è¿›è¡Œè‡ªåŠ¨åŒ–æ€»ç»“ï¼Œå¹¶å°†ç»“æœåœ¨ä¸€ä¸ªç›´è§‚çš„å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰ä¸­å±•ç¤ºå’Œä¿å­˜ã€‚</p>
<p>æœ¬æ–‡å°†ä»å¤´åˆ°å°¾è¯¦ç»†è§£æè¿™ä¸ªç³»ç»Ÿçš„è®¾è®¡æ€è·¯å’Œæ ¸å¿ƒä»£ç å®ç°ã€‚</p>
<h2 id="ğŸš€-ä¸€ã€ç³»ç»Ÿæ¦‚è§ˆä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ"><a href="#ğŸš€-ä¸€ã€ç³»ç»Ÿæ¦‚è§ˆä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ" class="headerlink" title="ğŸš€ ä¸€ã€ç³»ç»Ÿæ¦‚è§ˆä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ"></a>ğŸš€ ä¸€ã€ç³»ç»Ÿæ¦‚è§ˆä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ</h2><p>è¯¥ç³»ç»Ÿæ—¨åœ¨è§£å†³<strong>æµ·é‡æ–°é—»ä¿¡æ¯çš„å¿«é€Ÿç­›é€‰ä¸æ‘˜è¦</strong>é—®é¢˜ï¼Œå…¶æ ¸å¿ƒå·¥ä½œæµåˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š<strong>ç›®å½•è·å–</strong>å’Œ<strong>å†…å®¹&#x2F;AIå¤„ç†</strong>ã€‚</p>
<table>
<thead>
<tr>
<th align="left">æ¨¡å—</th>
<th align="left">èŒè´£</th>
<th align="left">ä½¿ç”¨çš„æŠ€æœ¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>GUIç•Œé¢</strong></td>
<td align="left">æä¾›ç”¨æˆ·äº¤äº’ã€é…ç½®å’Œå®æ—¶ç»“æœå±•ç¤ºã€‚</td>
<td align="left"><code>tkinter</code> (<code>ttk</code>, <code>scrolledtext</code>)</td>
</tr>
<tr>
<td align="left"><strong>ç½‘é¡µçˆ¬å–</strong></td>
<td align="left">è·å–æ–°é—»åˆ†ç±»ç›®å½•é“¾æ¥å’Œè¯¦ç»†å†…å®¹ã€‚</td>
<td align="left"><code>requests</code>, <code>BeautifulSoup</code> (<code>lxml</code>), <code>urllib3</code></td>
</tr>
<tr>
<td align="left"><strong>å¹¶å‘å¤„ç†</strong></td>
<td align="left">åŠ é€Ÿå†…å®¹æŠ“å–å’ŒAIæ€»ç»“çš„æ•ˆç‡ã€‚</td>
<td align="left"><code>threading</code>, <code>concurrent.futures.ThreadPoolExecutor</code></td>
</tr>
<tr>
<td align="left"><strong>AIæ€»ç»“</strong></td>
<td align="left">å¯¹æŠ“å–åˆ°çš„æ–°é—»æ–‡æœ¬è¿›è¡Œè‡ªåŠ¨åŒ–æ‘˜è¦ã€‚</td>
<td align="left"><code>requests</code> (è°ƒç”¨æœ¬åœ° Ollama API)</td>
</tr>
<tr>
<td align="left"><strong>æ•°æ®ç®¡ç†</strong></td>
<td align="left">å­˜å‚¨çˆ¬å–å’Œå¤„ç†åçš„æ–°é—»æ•°æ®ã€‚</td>
<td align="left">Python <code>dict</code> å’Œ <code>list</code></td>
</tr>
</tbody></table>
<h2 id="ğŸ› ï¸-äºŒã€æ ¸å¿ƒå·¥å…·å‡½æ•°è§£æ"><a href="#ğŸ› ï¸-äºŒã€æ ¸å¿ƒå·¥å…·å‡½æ•°è§£æ" class="headerlink" title="ğŸ› ï¸ äºŒã€æ ¸å¿ƒå·¥å…·å‡½æ•°è§£æ"></a>ğŸ› ï¸ äºŒã€æ ¸å¿ƒå·¥å…·å‡½æ•°è§£æ</h2><h3 id="1-é…ç½®ä¸åˆå§‹åŒ–"><a href="#1-é…ç½®ä¸åˆå§‹åŒ–" class="headerlink" title="1. é…ç½®ä¸åˆå§‹åŒ–"></a>1. é…ç½®ä¸åˆå§‹åŒ–</h3><p>ç³»ç»Ÿé¦–å…ˆå®šä¹‰äº†æ–°é—»çš„<strong>åˆ†ç±»é…ç½®</strong>å’Œé€šç”¨çš„<strong>è¯·æ±‚å¤´</strong>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NEWS_CATEGORIES å­—å…¸å®šä¹‰äº†åˆ†ç±»åç§°å’Œå¯¹åº”çš„ç½‘æ˜“æ–°é—»URL</span></span><br><span class="line">NEWS_CATEGORIES = &#123;</span><br><span class="line">    <span class="string">&quot;å›½å†…&quot;</span>: <span class="string">&quot;https://news.163.com/domestic/&quot;</span>,</span><br><span class="line">    <span class="comment"># ... å…¶ä»–åˆ†ç±»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HEADERS æ¨¡æ‹Ÿæµè§ˆå™¨è¯·æ±‚ï¼Œé¿å…è¢«ç½‘ç«™æ‹’ç»</span></span><br><span class="line">HEADERS = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="comment"># ... å…¶ä»–å¤´éƒ¨ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦ç”¨ä¸å®‰å…¨è¯·æ±‚è­¦å‘Š</span></span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br></pre></td></tr></table></figure>

<h3 id="2-ç›®å½•çˆ¬å–-get-category-links"><a href="#2-ç›®å½•çˆ¬å–-get-category-links" class="headerlink" title="2. ç›®å½•çˆ¬å– (get_category_links)"></a>2. ç›®å½•çˆ¬å– (<code>get_category_links</code>)</h3><p>è¿™ä¸ªå‡½æ•°è´Ÿè´£<strong>é˜¶æ®µä¸€</strong>çš„å·¥ä½œï¼šä»å•ä¸ªåˆ†ç±»é¡µé¢çš„ä¸»ç›®å½•ä¸­å¿«é€Ÿæå–æ–°é—»çš„<strong>æ ‡é¢˜</strong>å’Œ<strong>é“¾æ¥</strong>ã€‚</p>
<ul>
<li>å®ƒä½¿ç”¨ <code>requests</code> è®¿é—®åˆ†ç±»URLï¼Œå¹¶ç”¨ <code>BeautifulSoup</code> è¿›è¡Œè§£æã€‚</li>
<li>ä½¿ç”¨äº†å¤šä¸ªCSSé€‰æ‹©å™¨åˆ—è¡¨ï¼ˆ<code>content_selectors</code>ï¼‰ï¼Œä»¥é€‚åº”ç½‘æ˜“æ–°é—»ä¸åŒåˆ†ç±»é¡µé¢å¯èƒ½ä¸åŒçš„HTMLç»“æ„ã€‚</li>
<li>é€šè¿‡é“¾æ¥çš„å…³é”®è¯ï¼ˆ<code>&#39;163.com&#39; in href</code>ï¼‰å’Œæ ‡é¢˜çš„é•¿åº¦ï¼ˆ<code>len(title) &gt; 5</code>ï¼‰è¿›è¡Œä¸¥æ ¼è¿‡æ»¤ï¼Œç¡®ä¿è·å–çš„æ˜¯æœ‰æ•ˆæ–°é—»é“¾æ¥ã€‚</li>
</ul>
<h3 id="3-å†…å®¹çˆ¬å–-get-news-content"><a href="#3-å†…å®¹çˆ¬å–-get-news-content" class="headerlink" title="3. å†…å®¹çˆ¬å– (get_news_content)"></a>3. å†…å®¹çˆ¬å– (<code>get_news_content</code>)</h3><p>è¯¥å‡½æ•°è´Ÿè´£è·å–å•æ¡æ–°é—»çš„è¯¦ç»†æ–‡æœ¬å†…å®¹ã€‚</p>
<ul>
<li>ä¸ç›®å½•çˆ¬å–ç±»ä¼¼ï¼Œå®ƒä¹Ÿä½¿ç”¨ä¸€ä¸ª<strong>é€šç”¨é€‰æ‹©å™¨åˆ—è¡¨</strong>ï¼ˆ<code>content_selectors</code>ï¼‰ï¼Œæ¥åŒ¹é…æ–°é—»æ­£æ–‡æ‰€åœ¨çš„ <code>div</code> å…ƒç´ ã€‚</li>
<li>ä½¿ç”¨ <code>subContent.get_text(separator=&#39;\n&#39;, strip=True)</code> ç¡®ä¿å†…å®¹æ–‡æœ¬çš„æ®µè½æ¸…æ™°ï¼Œå¹¶è¿‡æ»¤æ‰å†…å®¹è¿‡çŸ­çš„é¡µé¢ï¼ˆå¦‚çº¯å›¾ç‰‡é›†ï¼‰ã€‚</li>
</ul>
<h3 id="4-AIæ€»ç»“-summarize-with-ollama"><a href="#4-AIæ€»ç»“-summarize-with-ollama" class="headerlink" title="4. AIæ€»ç»“ (summarize_with_ollama)"></a>4. AIæ€»ç»“ (<code>summarize_with_ollama</code>)</h3><p>è¿™æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒåˆ©ç”¨ <code>requests</code> è°ƒç”¨æœ¬åœ° <strong>Ollama</strong> æœåŠ¡ã€‚</p>
<ul>
<li><strong>API åœ°å€</strong>ï¼š<code>http://localhost:11434/api/generate</code>ã€‚</li>
<li><strong>æ¨¡å‹</strong>ï¼šç¤ºä¾‹ä¸­ä½¿ç”¨äº† <code>&quot;qwen2.5:7b&quot;</code>ï¼ˆç”¨æˆ·å¯æ ¹æ®æœ¬åœ°ç¯å¢ƒä¿®æ”¹ï¼‰ã€‚</li>
<li><strong>Prompt è®¾è®¡</strong>ï¼šæ¸…æ™°åœ°æŒ‡ç¤ºLLMå¯¹æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œæ€»ç»“ï¼Œå¹¶é™åˆ¶äº†è¾“å‡ºé•¿åº¦ï¼ˆä¸è¶…è¿‡150å­—ï¼‰ï¼Œè¦æ±‚ä½¿ç”¨æ¸…æ™°çš„ä¸­æ–‡å£å»ã€‚</li>
<li><strong>æµå¼å¤„ç†</strong>ï¼šè®¾ç½® <code>&quot;stream&quot;: True</code>ï¼Œå¹¶é€šè¿‡ <code>response.iter_lines()</code> é€è¡Œè§£æJSONæ•°æ®ï¼Œå®æ—¶æ¥æ”¶LLMçš„è¾“å‡ºï¼Œç›´åˆ°é‡åˆ° <code>&#123;&quot;done&quot;: true&#125;</code>ã€‚</li>
<li>åŒ…å«äº†å¯¹ Ollama è¿æ¥å¤±è´¥æˆ–HTTPé”™è¯¯çš„å¥å£®æ€§å¤„ç†ã€‚</li>
</ul>
<h2 id="ğŸ’»-ä¸‰ã€GUIåº”ç”¨ç±»-NewsCrawlerApp-è¯¦è§£"><a href="#ğŸ’»-ä¸‰ã€GUIåº”ç”¨ç±»-NewsCrawlerApp-è¯¦è§£" class="headerlink" title="ğŸ’» ä¸‰ã€GUIåº”ç”¨ç±» (NewsCrawlerApp) è¯¦è§£"></a>ğŸ’» ä¸‰ã€GUIåº”ç”¨ç±» (<code>NewsCrawlerApp</code>) è¯¦è§£</h2><p><code>NewsCrawlerApp</code> æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºçš„éª¨æ¶ï¼Œå®ƒç®¡ç†ç€ç•Œé¢ã€æ•°æ®å’Œå¤šçº¿ç¨‹ä»»åŠ¡ã€‚</p>
<h3 id="1-ç•Œé¢å¸ƒå±€-setup-ui"><a href="#1-ç•Œé¢å¸ƒå±€-setup-ui" class="headerlink" title="1. ç•Œé¢å¸ƒå±€ (setup_ui)"></a>1. ç•Œé¢å¸ƒå±€ (<code>setup_ui</code>)</h3><p>ç•Œé¢åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li><strong>æ§åˆ¶åŒºåŸŸ</strong>ï¼šåŒ…å«<strong>åˆ†ç±»é€‰æ‹©</strong>ã€<strong>æ•°é‡é€‰æ‹©</strong>ã€<strong>AIæ€»ç»“å¼€å…³</strong>ã€<strong>å¼€å§‹&#x2F;åœæ­¢</strong>ã€<strong>ä¿å­˜</strong>å’Œ<strong>æ¸…ç©º</strong>æŒ‰é’®ã€‚</li>
<li><strong>è¿›åº¦æ¡ (<code>ttk.Progressbar</code>)</strong>ï¼šå®æ—¶æ˜¾ç¤ºä»»åŠ¡çš„æ•´ä½“è¿›åº¦ã€‚</li>
<li><strong>çŠ¶æ€æ ‡ç­¾ (<code>self.status_label</code>)</strong>ï¼šæ˜¾ç¤ºå½“å‰æ“ä½œçŠ¶æ€å’Œæç¤ºä¿¡æ¯ã€‚</li>
<li><strong>æ–°é—»åˆ—è¡¨ (<code>tk.Listbox</code>)</strong>ï¼šå·¦ä¾§å±•ç¤ºçˆ¬å–åˆ°çš„æ–°é—»æ ‡é¢˜ï¼Œé€šè¿‡é¢œè‰²åŒºåˆ†å¤„ç†çŠ¶æ€ã€‚</li>
<li><strong>æ–°é—»è¯¦æƒ… (<code>scrolledtext.ScrolledText</code>)</strong>ï¼šå³ä¾§æ˜¾ç¤ºé€‰ä¸­æ–°é—»çš„å®Œæ•´ä¿¡æ¯ã€AIæ€»ç»“å’Œå†…å®¹é¢„è§ˆã€‚</li>
</ul>
<h3 id="2-å¤šçº¿ç¨‹æ§åˆ¶é€»è¾‘"><a href="#2-å¤šçº¿ç¨‹æ§åˆ¶é€»è¾‘" class="headerlink" title="2. å¤šçº¿ç¨‹æ§åˆ¶é€»è¾‘"></a>2. å¤šçº¿ç¨‹æ§åˆ¶é€»è¾‘</h3><p>ä¸ºäº†ä¸é˜»å¡GUIï¼Œæ‰€æœ‰è€—æ—¶çš„ç½‘ç»œè¯·æ±‚å’ŒAIå¤„ç†éƒ½è¢«æ”¾åˆ°äº†åå°çº¿ç¨‹ä¸­ã€‚</p>
<h4 id="ğŸ”¹-start-crawling-å’Œ-toggle-crawling"><a href="#ğŸ”¹-start-crawling-å’Œ-toggle-crawling" class="headerlink" title="ğŸ”¹ start_crawling å’Œ toggle_crawling"></a>ğŸ”¹ <code>start_crawling</code> å’Œ <code>toggle_crawling</code></h4><p>è¿™æ˜¯å¯åŠ¨çˆ¬å–çš„æ ¸å¿ƒæ–¹æ³•ã€‚å®ƒè´Ÿè´£ï¼š</p>
<ol>
<li>è®¾ç½® <code>self.is_crawling = True</code>ï¼Œå¹¶æ›´æ–°æŒ‰é’®çŠ¶æ€ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ª<strong>ä¸»çˆ¬å–çº¿ç¨‹</strong> (<code>self.master_thread</code>) æ¥è¿è¡Œ <code>_run_master_crawl</code>ã€‚</li>
</ol>
<h4 id="ğŸ”¹-run-master-crawl-ä¸»è°ƒåº¦çº¿ç¨‹"><a href="#ğŸ”¹-run-master-crawl-ä¸»è°ƒåº¦çº¿ç¨‹" class="headerlink" title="ğŸ”¹ _run_master_crawl (ä¸»è°ƒåº¦çº¿ç¨‹)"></a>ğŸ”¹ <code>_run_master_crawl</code> (ä¸»è°ƒåº¦çº¿ç¨‹)</h4><p>è¿™ä¸ªçº¿ç¨‹è´Ÿè´£ä¸¤é˜¶æ®µè°ƒåº¦ï¼š</p>
<ol>
<li><strong>é˜¶æ®µä¸€ (ç›®å½•è·å– 0%-30%)</strong>ï¼šä¸²è¡Œéå†æ‰€æœ‰é€‰å®šçš„åˆ†ç±»ï¼Œè°ƒç”¨ <code>get_category_links</code> è·å–é“¾æ¥ã€‚æ¯è·å–ä¸€ä¸ªåˆ†ç±»ï¼Œå³æ—¶å°†æ ‡é¢˜å’Œå ä½ç¬¦ï¼ˆå¦‚ â€œç­‰å¾…è·å–å†…å®¹â€¦â€ï¼‰æ·»åŠ åˆ° <code>self.news_data</code> åˆ—è¡¨å’Œ <code>Listbox</code> ä¸­ã€‚</li>
<li><strong>é˜¶æ®µäºŒ (å†…å®¹&#x2F;AIå¤„ç† 30%-100%)</strong>ï¼šä½¿ç”¨ <code>ThreadPoolExecutor(max_workers=10)</code> åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚ä¸º <code>self.news_data</code> ä¸­çš„æ¯æ¡æ–°é—»æäº¤ä¸€ä¸ªä»»åŠ¡ç»™çº¿ç¨‹æ± ï¼Œè¿è¡Œ <code>_process_single_news</code>ã€‚</li>
<li>ä½¿ç”¨ <code>as_completed</code> è¿­ä»£å™¨ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œå¹¶åœ¨ä»»åŠ¡å®Œæˆåï¼Œé€šè¿‡ <code>root.after(0, ...)</code> å°†è¿›åº¦å’ŒUIæ›´æ–°è¯·æ±‚æäº¤å›<strong>ä¸»çº¿ç¨‹</strong>ã€‚</li>
</ol>
<h4 id="ğŸ”¹-process-single-news-çº¿ç¨‹æ± å·¥ä½œå‡½æ•°"><a href="#ğŸ”¹-process-single-news-çº¿ç¨‹æ± å·¥ä½œå‡½æ•°" class="headerlink" title="ğŸ”¹ _process_single_news (çº¿ç¨‹æ± å·¥ä½œå‡½æ•°)"></a>ğŸ”¹ <code>_process_single_news</code> (çº¿ç¨‹æ± å·¥ä½œå‡½æ•°)</h4><p>åœ¨çº¿ç¨‹æ± ä¸­å¹¶å‘æ‰§è¡Œï¼š</p>
<ol>
<li>è°ƒç”¨ <code>get_news_content</code> è·å–æ–°é—»æ­£æ–‡ã€‚</li>
<li>å¦‚æœå¯ç”¨äº†AIï¼Œè°ƒç”¨ <code>summarize_with_ollama</code> è¿›è¡Œæ€»ç»“ã€‚</li>
<li>æ›´æ–°æ–°é—»å­—å…¸ä¸­çš„ <code>content</code> å’Œ <code>summary</code> å­—æ®µã€‚</li>
</ol>
<h3 id="3-UI-äº¤äº’ä¸æ›´æ–°"><a href="#3-UI-äº¤äº’ä¸æ›´æ–°" class="headerlink" title="3. UI äº¤äº’ä¸æ›´æ–°"></a>3. UI äº¤äº’ä¸æ›´æ–°</h3><p>ç”±äºTkinteræ˜¯å•çº¿ç¨‹çš„ï¼Œ<strong>ä»»ä½•å¯¹UIçš„ä¿®æ”¹ï¼ˆå¦‚æ›´æ–°åˆ—è¡¨ã€è¿›åº¦æ¡ã€çŠ¶æ€æ ‡ç­¾ï¼‰éƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œ</strong>ã€‚ç³»ç»Ÿé€šè¿‡ <code>self.root.after(0, self.function_name, ...)</code> å®ç°äº†è·¨çº¿ç¨‹çš„UIå®‰å…¨æ›´æ–°ã€‚</p>
<ul>
<li><strong><code>_add_news_to_list</code></strong>ï¼šå°†ç›®å½•ä¿¡æ¯æ·»åŠ åˆ° <code>Listbox</code>ï¼Œåˆå§‹æ˜¾ç¤ºä¸ºç°è‰²ã€‚</li>
<li><strong><code>_update_list_item</code></strong>ï¼šæ ¹æ®å¤„ç†ç»“æœï¼ˆå†…å®¹å’ŒAIæ€»ç»“ï¼‰æ›´æ–° <code>Listbox</code> é¡¹çš„é¢œè‰²ï¼Œä¾‹å¦‚ï¼š<ul>
<li><strong>çº¢è‰²</strong>ï¼šè·å–å¤±è´¥æˆ–AIé”™è¯¯ã€‚</li>
<li><strong>æ·±ç»¿è‰²</strong>ï¼šå†…å®¹å’ŒAIæ€»ç»“æˆåŠŸå®Œæˆã€‚</li>
</ul>
</li>
<li><strong><code>show_news_detail</code></strong>ï¼šåœ¨å³ä¾§è¯¦æƒ…åŒºåŸŸå±•ç¤ºæ–°é—»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶<strong>çªå‡ºæ˜¾ç¤º</strong>AIæ€»ç»“éƒ¨åˆ†ã€‚</li>
</ul>
<h2 id="ğŸ’¾-å››ã€ä¿å­˜ä¸æ¸…ç©º"><a href="#ğŸ’¾-å››ã€ä¿å­˜ä¸æ¸…ç©º" class="headerlink" title="ğŸ’¾ å››ã€ä¿å­˜ä¸æ¸…ç©º"></a>ğŸ’¾ å››ã€ä¿å­˜ä¸æ¸…ç©º</h2><h3 id="save-results"><a href="#save-results" class="headerlink" title="save_results"></a><code>save_results</code></h3><p>è¯¥æ–¹æ³•å°†å·²å®Œæˆå¤„ç†çš„æ–°é—»æ•°æ®æ•´ç†æˆç»“æ„æ¸…æ™°çš„ <strong>Markdown (<code>.md</code>)</strong> æ–‡ä»¶ã€‚å®ƒæŒ‰ç…§åˆ†ç±»è¿›è¡Œåˆ†ç»„ï¼Œæ¯æ¡æ–°é—»éƒ½åŒ…å«æ ‡é¢˜ã€é“¾æ¥ã€AIæ€»ç»“å’Œå†…å®¹é¢„è§ˆï¼Œæ–¹ä¾¿åç»­é˜…è¯»å’Œå­˜æ¡£ã€‚</p>
<hr>
<h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><blockquote>
<p>æ¸©é¦¨æç¤ºï¼Œç¨‹åºéœ€è¦Ollamaæ¥å£å’Œè‡ªå®šä¹‰æˆ–è€…ä¸‹è½½æ¨¡å‹<code>qwen2.5:7b</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor, as_completed</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> ttk, scrolledtext, messagebox, filedialog</span><br><span class="line"></span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"></span><br><span class="line">NEWS_CATEGORIES = &#123;</span><br><span class="line">    <span class="string">&quot;å›½å†…&quot;</span>: <span class="string">&quot;https://news.163.com/domestic/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å›½é™…&quot;</span>: <span class="string">&quot;https://news.163.com/world/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä½“è‚²&quot;</span>: <span class="string">&quot;https://sports.163.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;NBA&quot;</span>: <span class="string">&quot;https://sports.163.com/nba/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¨±ä¹&quot;</span>: <span class="string">&quot;https://ent.163.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç”µå½±&quot;</span>: <span class="string">&quot;https://ent.163.com/movie/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è´¢ç»&quot;</span>: <span class="string">&quot;https://money.163.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç§‘æŠ€&quot;</span>: <span class="string">&quot;https://tech.163.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;äº’è”ç½‘&quot;</span>: <span class="string">&quot;https://tech.163.com/internet/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ±½è½¦&quot;</span>: <span class="string">&quot;https://auto.163.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ•™è‚²&quot;</span>: <span class="string">&quot;https://edu.163.com/&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HEADERS = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate, br&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Upgrade-Insecure-Requests&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_category_links</span>(<span class="params">category_url, max_links</span>):</span><br><span class="line">    valid_links = []</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        resp = requests.get(category_url, headers=HEADERS, verify=<span class="literal">False</span>, timeout=<span class="number">10</span>)</span><br><span class="line">        resp.encoding = <span class="string">&quot;utf-8&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> resp.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> valid_links</span><br><span class="line"></span><br><span class="line">        html = BeautifulSoup(resp.text, <span class="string">&quot;lxml&quot;</span>)</span><br><span class="line"></span><br><span class="line">        content_selectors = [</span><br><span class="line">            <span class="string">&quot;div.hidden&quot;</span>, <span class="string">&quot;div.news_list&quot;</span>, <span class="string">&quot;div.news-data&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ul.newsList&quot;</span>, <span class="string">&quot;div.post_list&quot;</span>, <span class="string">&quot;div[class*=&#x27;news&#x27;]&quot;</span>,</span><br><span class="line">            <span class="string">&quot;div[class*=&#x27;list&#x27;]&quot;</span>, <span class="string">&quot;div.list_wrap&quot;</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        content = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">for</span> selector <span class="keyword">in</span> content_selectors:</span><br><span class="line">            content = html.select_one(selector)</span><br><span class="line">            <span class="keyword">if</span> content:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> content:</span><br><span class="line">            links = content.find_all(<span class="string">&quot;a&quot;</span>, href=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> links:</span><br><span class="line">                href = a.get(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">                title = a.get_text(strip=<span class="literal">True</span>)</span><br><span class="line">                <span class="keyword">if</span> (href <span class="keyword">and</span> (href.startswith(<span class="string">&#x27;https://www.163.com/dy/article/&#x27;</span>) <span class="keyword">or</span> <span class="string">&#x27;163.com&#x27;</span> <span class="keyword">in</span> href) <span class="keyword">and</span></span><br><span class="line">                        title <span class="keyword">and</span> <span class="built_in">len</span>(title) &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="built_in">len</span>(valid_links) &lt; max_links):</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">any</span>(l[<span class="number">1</span>] == href <span class="keyword">for</span> l <span class="keyword">in</span> valid_links):</span><br><span class="line">                        valid_links.append((title, href))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> valid_links[:max_links]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_news_content</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        subResponse = requests.get(url, headers=HEADERS, verify=<span class="literal">False</span>, timeout=<span class="number">10</span>)</span><br><span class="line">        subResponse.encoding = <span class="string">&quot;utf-8&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> subResponse.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        subHtml = BeautifulSoup(subResponse.text, <span class="string">&quot;lxml&quot;</span>)</span><br><span class="line"></span><br><span class="line">        content_selectors = [</span><br><span class="line">            <span class="string">&quot;div.post_body&quot;</span>, <span class="string">&quot;div.content&quot;</span>, <span class="string">&quot;div.article-content&quot;</span>,</span><br><span class="line">            <span class="string">&quot;div.art-content&quot;</span>, <span class="string">&quot;div.main-content&quot;</span>, <span class="string">&quot;div[class*=&#x27;content&#x27;]&quot;</span>,</span><br><span class="line">            <span class="string">&quot;div[class*=&#x27;body&#x27;]&quot;</span>, <span class="string">&quot;.post_text&quot;</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> selector <span class="keyword">in</span> content_selectors:</span><br><span class="line">            subContent = subHtml.select_one(selector)</span><br><span class="line">            <span class="keyword">if</span> subContent:</span><br><span class="line">                text_content = subContent.get_text(separator=<span class="string">&#x27;\n&#x27;</span>, strip=<span class="literal">True</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(text_content) &gt; <span class="number">50</span>:</span><br><span class="line">                    <span class="keyword">return</span> text_content</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">summarize_with_ollama</span>(<span class="params">title, content</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = <span class="string">&quot;http://localhost:11434/api/generate&quot;</span></span><br><span class="line">        content_preview = content[:<span class="number">1500</span>]</span><br><span class="line">        prompt = <span class="string">f&quot;è¯·å¯¹ä»¥ä¸‹æ–°é—»è¿›è¡Œç®€è¦æ€»ç»“ï¼Œä¸è¶…è¿‡150å­—ï¼Œé‡ç‚¹çªå‡ºï¼Œç”¨æ¸…æ™°çš„ä¸­æ–‡å£å»ï¼š\næ ‡é¢˜ï¼š<span class="subst">&#123;title&#125;</span>\nå†…å®¹ï¼š<span class="subst">&#123;content_preview&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&quot;model&quot;</span>: <span class="string">&quot;qwen2.5:7b&quot;</span>,</span><br><span class="line">            <span class="string">&quot;prompt&quot;</span>: prompt,</span><br><span class="line">            <span class="string">&quot;stream&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&quot;options&quot;</span>: &#123;<span class="string">&quot;temperature&quot;</span>: <span class="number">0.3</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        response = requests.post(url, json=data, stream=<span class="literal">True</span>, timeout=<span class="number">60</span>)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line"></span><br><span class="line">        full_response = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> response.iter_lines():</span><br><span class="line">            <span class="keyword">if</span> item:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    json_data = json.loads(item.decode())</span><br><span class="line">                    <span class="keyword">if</span> <span class="string">&quot;response&quot;</span> <span class="keyword">in</span> json_data:</span><br><span class="line">                        full_response += json_data[<span class="string">&quot;response&quot;</span>]</span><br><span class="line">                    <span class="keyword">if</span> json_data.get(<span class="string">&quot;done&quot;</span>):</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">except</span> json.JSONDecodeError:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> full_response.strip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> requests.exceptions.ConnectionError:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ğŸš¨ Ollamaè¿æ¥å¤±è´¥ã€‚è¯·æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œåœ¨ http://localhost:11434&quot;</span></span><br><span class="line">    <span class="keyword">except</span> requests.exceptions.HTTPError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;ğŸš¨ AIæ€»ç»“HTTPé”™è¯¯: <span class="subst">&#123;e.response.status_code&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;ğŸš¨ AIæ€»ç»“å¤±è´¥: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsCrawlerApp</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="variable language_">self</span>.root = root</span><br><span class="line">        <span class="variable language_">self</span>.root.title(<span class="string">&quot;ç½‘æ˜“æ–°é—»AIæ€»ç»“ç³»ç»Ÿ (ä¼˜åŒ–ç‰ˆ)&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.root.geometry(<span class="string">&quot;1200x800&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.news_data = []</span><br><span class="line">        <span class="variable language_">self</span>.is_crawling = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>.thread_executor = ThreadPoolExecutor(max_workers=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.crawl_futures = []</span><br><span class="line">        <span class="variable language_">self</span>.setup_ui()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_ui</span>(<span class="params">self</span>):</span><br><span class="line">        main_frame = ttk.Frame(<span class="variable language_">self</span>.root, padding=<span class="string">&quot;10&quot;</span>)</span><br><span class="line">        main_frame.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        control_frame = ttk.Frame(main_frame)</span><br><span class="line">        control_frame.pack(fill=tk.X, pady=(<span class="number">0</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">        row1_frame = ttk.Frame(control_frame)</span><br><span class="line">        row1_frame.pack(fill=tk.X)</span><br><span class="line"></span><br><span class="line">        ttk.Label(row1_frame, text=<span class="string">&quot;é€‰æ‹©åˆ†ç±»:&quot;</span>).pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">5</span>))</span><br><span class="line">        <span class="variable language_">self</span>.category_var = tk.StringVar(value=<span class="string">&quot;å…¨éƒ¨&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.category_combo = ttk.Combobox(row1_frame, textvariable=<span class="variable language_">self</span>.category_var,</span><br><span class="line">                                           values=[<span class="string">&quot;å…¨éƒ¨&quot;</span>] + <span class="built_in">list</span>(NEWS_CATEGORIES.keys()),</span><br><span class="line">                                           state=<span class="string">&quot;readonly&quot;</span>, width=<span class="number">15</span>)</span><br><span class="line">        <span class="variable language_">self</span>.category_combo.pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">        ttk.Label(row1_frame, text=<span class="string">&quot;æ¯ç±»æ•°é‡:&quot;</span>).pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">5</span>))</span><br><span class="line">        <span class="variable language_">self</span>.count_var = tk.StringVar(value=<span class="string">&quot;10&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.count_combo = ttk.Combobox(row1_frame, textvariable=<span class="variable language_">self</span>.count_var,</span><br><span class="line">                                        values=[<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">50</span>]],</span><br><span class="line">                                        state=<span class="string">&quot;readonly&quot;</span>, width=<span class="number">8</span>)</span><br><span class="line">        <span class="variable language_">self</span>.count_combo.pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.ai_var = tk.BooleanVar(value=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ai_check = ttk.Checkbutton(row1_frame, text=<span class="string">&quot;å¯ç”¨AIæ€»ç»“ (è€—æ—¶)&quot;</span>, variable=<span class="variable language_">self</span>.ai_var)</span><br><span class="line">        <span class="variable language_">self</span>.ai_check.pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">        row2_frame = ttk.Frame(control_frame)</span><br><span class="line">        row2_frame.pack(fill=tk.X, pady=(<span class="number">10</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.start_btn = ttk.Button(row2_frame, text=<span class="string">&quot;ğŸš€ å¼€å§‹çˆ¬å–&quot;</span>, command=<span class="variable language_">self</span>.toggle_crawling)</span><br><span class="line">        <span class="variable language_">self</span>.start_btn.pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.save_btn = ttk.Button(row2_frame, text=<span class="string">&quot;ğŸ’¾ ä¿å­˜ç»“æœ&quot;</span>, command=<span class="variable language_">self</span>.save_results, state=<span class="string">&#x27;disabled&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.save_btn.pack(side=tk.LEFT, padx=(<span class="number">0</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.clear_btn = ttk.Button(row2_frame, text=<span class="string">&quot;ğŸ—‘ï¸ æ¸…ç©ºåˆ—è¡¨&quot;</span>, command=<span class="variable language_">self</span>.clear_list)</span><br><span class="line">        <span class="variable language_">self</span>.clear_btn.pack(side=tk.LEFT)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.progress = ttk.Progressbar(main_frame, mode=<span class="string">&#x27;determinate&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.progress.pack(fill=tk.X, pady=(<span class="number">0</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.status_var = tk.StringVar(value=<span class="string">&quot;å‡†å¤‡å°±ç»ª&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.status_label = ttk.Label(main_frame, textvariable=<span class="variable language_">self</span>.status_var, foreground=<span class="string">&quot;#007bff&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.status_label.pack(fill=tk.X)</span><br><span class="line"></span><br><span class="line">        content_frame = ttk.Frame(main_frame)</span><br><span class="line">        content_frame.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        list_frame = ttk.LabelFrame(content_frame, text=<span class="string">&quot;æ–°é—»åˆ—è¡¨&quot;</span>, padding=<span class="string">&quot;5&quot;</span>)</span><br><span class="line">        list_frame.pack(side=tk.LEFT, fill=tk.BOTH, expand=<span class="literal">True</span>, padx=(<span class="number">0</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.news_list = tk.Listbox(list_frame, font=(<span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="number">10</span>))</span><br><span class="line">        scrollbar_list = ttk.Scrollbar(list_frame, orient=tk.VERTICAL, command=<span class="variable language_">self</span>.news_list.yview)</span><br><span class="line">        <span class="variable language_">self</span>.news_list.configure(yscrollcommand=scrollbar_list.<span class="built_in">set</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.news_list.pack(side=tk.LEFT, fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line">        scrollbar_list.pack(side=tk.RIGHT, fill=tk.Y)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.news_list.bind(<span class="string">&#x27;&lt;&lt;ListboxSelect&gt;&gt;&#x27;</span>, <span class="variable language_">self</span>.on_list_select)</span><br><span class="line"></span><br><span class="line">        detail_frame = ttk.LabelFrame(content_frame, text=<span class="string">&quot;æ–°é—»è¯¦æƒ…&quot;</span>, padding=<span class="string">&quot;5&quot;</span>)</span><br><span class="line">        detail_frame.pack(side=tk.RIGHT, fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.detail_text = scrolledtext.ScrolledText(detail_frame, wrap=tk.WORD,</span><br><span class="line">                                                     font=(<span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="number">10</span>),</span><br><span class="line">                                                     width=<span class="number">60</span>)</span><br><span class="line">        <span class="variable language_">self</span>.detail_text.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.stats_var = tk.StringVar(value=<span class="string">&quot;æ€»æ–°é—»æ•°: 0 | å·²å¤„ç†å†…å®¹/AI: 0&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.stats_label = ttk.Label(main_frame, textvariable=<span class="variable language_">self</span>.stats_var)</span><br><span class="line">        <span class="variable language_">self</span>.stats_label.pack(fill=tk.X, pady=(<span class="number">5</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">toggle_crawling</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">            <span class="variable language_">self</span>.stop_crawling()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.start_crawling()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_crawling</span>(<span class="params">self</span>):</span><br><span class="line">        selected_category = <span class="variable language_">self</span>.category_var.get()</span><br><span class="line">        categories_to_crawl = <span class="built_in">list</span>(NEWS_CATEGORIES.keys()) <span class="keyword">if</span> selected_category == <span class="string">&quot;å…¨éƒ¨&quot;</span> <span class="keyword">else</span> [selected_category]</span><br><span class="line"></span><br><span class="line">        max_news = <span class="built_in">int</span>(<span class="variable language_">self</span>.count_var.get())</span><br><span class="line">        enable_ai = <span class="variable language_">self</span>.ai_var.get()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.clear_list(silent=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.is_crawling = <span class="literal">True</span></span><br><span class="line">        <span class="variable language_">self</span>.start_btn.config(text=<span class="string">&quot;åœæ­¢çˆ¬å–&quot;</span>, state=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.save_btn.config(state=<span class="string">&#x27;disabled&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.progress[<span class="string">&#x27;value&#x27;</span>] = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">self</span>.crawl_futures = []</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.update_status(<span class="string">&quot;ğŸš€ **å¼€å§‹ç›®å½•çˆ¬å–**...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.master_thread = threading.Thread(</span><br><span class="line">            target=<span class="variable language_">self</span>._run_master_crawl,</span><br><span class="line">            args=(categories_to_crawl, max_news, enable_ai)</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.master_thread.daemon = <span class="literal">True</span></span><br><span class="line">        <span class="variable language_">self</span>.master_thread.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">stop_crawling</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.is_crawling = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> future <span class="keyword">in</span> <span class="variable language_">self</span>.crawl_futures:</span><br><span class="line">            future.cancel()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.start_btn.config(text=<span class="string">&quot;å¼€å§‹çˆ¬å–&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.save_btn.config(state=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.update_status(<span class="string">&quot;ğŸ›‘ **çˆ¬å–å·²åœæ­¢**&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.update_progress(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_run_master_crawl</span>(<span class="params">self, categories, max_news, enable_ai</span>):</span><br><span class="line">        initial_news_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.update_status(<span class="string">&quot;âœ… **é˜¶æ®µä¸€ï¼šæ­£åœ¨å¿«é€Ÿè·å–æ–°é—»ç›®å½•...**&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> index, category <span class="keyword">in</span> <span class="built_in">enumerate</span>(categories):</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                category_url = NEWS_CATEGORIES[category]</span><br><span class="line">                links = get_category_links(category_url, max_news)</span><br><span class="line"></span><br><span class="line">                progress = <span class="built_in">int</span>(((index + <span class="number">1</span>) / <span class="built_in">len</span>(categories)) * <span class="number">30</span>)</span><br><span class="line">                <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.update_progress, progress)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> title, url <span class="keyword">in</span> links:</span><br><span class="line">                    news_data = &#123;</span><br><span class="line">                        <span class="string">&#x27;category&#x27;</span>: category,</span><br><span class="line">                        <span class="string">&#x27;title&#x27;</span>: title,</span><br><span class="line">                        <span class="string">&#x27;url&#x27;</span>: url,</span><br><span class="line">                        <span class="string">&#x27;content&#x27;</span>: <span class="string">&#x27;ç­‰å¾…è·å–å†…å®¹...&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;ç­‰å¾…AIæ€»ç»“...&#x27;</span> <span class="keyword">if</span> enable_ai <span class="keyword">else</span> <span class="string">&#x27;AIå·²ç¦ç”¨&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>),</span><br><span class="line">                        <span class="string">&#x27;list_index&#x27;</span>: <span class="built_in">len</span>(<span class="variable language_">self</span>.news_data)</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable language_">self</span>.news_data.append(news_data)</span><br><span class="line">                    <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>._add_news_to_list, news_data)</span><br><span class="line">                    initial_news_count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.update_stats, initial_news_count, <span class="number">0</span>)</span><br><span class="line">            <span class="variable language_">self</span>.update_status(<span class="string">f&quot;ğŸ‰ **é˜¶æ®µä¸€å®Œæˆï¼** æ‰¾åˆ° <span class="subst">&#123;initial_news_count&#125;</span> æ¡æ–°é—»ã€‚å¼€å§‹å†…å®¹/AIå¤„ç†...&quot;</span>)</span><br><span class="line"></span><br><span class="line">            total_tasks = initial_news_count</span><br><span class="line">            <span class="keyword">if</span> total_tasks == <span class="number">0</span>:</span><br><span class="line">                <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.crawling_finished)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            processed_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> data <span class="keyword">in</span> <span class="variable language_">self</span>.news_data:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                future = <span class="variable language_">self</span>.thread_executor.submit(</span><br><span class="line">                    <span class="variable language_">self</span>._process_single_news,</span><br><span class="line">                    data,</span><br><span class="line">                    enable_ai</span><br><span class="line">                )</span><br><span class="line">                <span class="variable language_">self</span>.crawl_futures.append(future)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> future <span class="keyword">in</span> as_completed(<span class="variable language_">self</span>.crawl_futures):</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> future.cancelled():</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                processed_data = future.result()</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> processed_data:</span><br><span class="line">                    <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>._update_list_item, processed_data)</span><br><span class="line"></span><br><span class="line">                processed_count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                progress = <span class="number">30</span> + <span class="built_in">int</span>((processed_count / total_tasks) * <span class="number">70</span>)</span><br><span class="line">                <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.update_progress, progress)</span><br><span class="line">                <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.update_stats, total_tasks, processed_count)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.update_status, <span class="string">f&quot;ğŸš¨ **ä¸»çˆ¬å–çº¿ç¨‹å‡ºé”™**: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="variable language_">self</span>.root.after(<span class="number">0</span>, <span class="variable language_">self</span>.crawling_finished)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_process_single_news</span>(<span class="params">self, news_data, enable_ai</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_crawling:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        content = get_news_content(news_data[<span class="string">&#x27;url&#x27;</span>])</span><br><span class="line">        news_data[<span class="string">&#x27;content&#x27;</span>] = content <span class="keyword">if</span> content <span class="keyword">else</span> <span class="string">&#x27;è·å–å†…å®¹å¤±è´¥æˆ–å†…å®¹è¿‡çŸ­ã€‚&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> content <span class="keyword">and</span> enable_ai:</span><br><span class="line">            summary = summarize_with_ollama(news_data[<span class="string">&#x27;title&#x27;</span>], content)</span><br><span class="line">            news_data[<span class="string">&#x27;summary&#x27;</span>] = summary</span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> enable_ai:</span><br><span class="line">            news_data[<span class="string">&#x27;summary&#x27;</span>] = <span class="string">&#x27;AIæ€»ç»“å·²ç¦ç”¨ã€‚&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            news_data[<span class="string">&#x27;summary&#x27;</span>] = <span class="string">&#x27;æœªèƒ½è·å–å†…å®¹ï¼Œæ— æ³•è¿›è¡ŒAIæ€»ç»“ã€‚&#x27;</span></span><br><span class="line"></span><br><span class="line">        news_data[<span class="string">&#x27;finish_time&#x27;</span>] = datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> news_data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_add_news_to_list</span>(<span class="params">self, news_data</span>):</span><br><span class="line">        display_text = <span class="string">f&quot;[<span class="subst">&#123;news_data[<span class="string">&#x27;category&#x27;</span>]&#125;</span>] <span class="subst">&#123;news_data[<span class="string">&#x27;title&#x27;</span>]&#125;</span>&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.news_list.insert(tk.END, display_text)</span><br><span class="line">        <span class="variable language_">self</span>.news_list.itemconfig(tk.END, &#123;<span class="string">&#x27;fg&#x27;</span>: <span class="string">&#x27;gray&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update_list_item</span>(<span class="params">self, processed_data</span>):</span><br><span class="line">        index = processed_data[<span class="string">&#x27;list_index&#x27;</span>]</span><br><span class="line">        <span class="variable language_">self</span>.news_data[index] = processed_data</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;ğŸš¨&quot;</span> <span class="keyword">in</span> processed_data[<span class="string">&#x27;summary&#x27;</span>] <span class="keyword">or</span> <span class="keyword">not</span> processed_data[<span class="string">&#x27;content&#x27;</span>]:</span><br><span class="line">            color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&quot;ç­‰å¾…&quot;</span> <span class="keyword">in</span> processed_data[<span class="string">&#x27;summary&#x27;</span>] <span class="keyword">or</span> <span class="string">&quot;å·²ç¦ç”¨&quot;</span> <span class="keyword">in</span> processed_data[<span class="string">&#x27;summary&#x27;</span>]:</span><br><span class="line">            color = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            color = <span class="string">&#x27;darkgreen&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.news_list.itemconfig(index, &#123;<span class="string">&#x27;fg&#x27;</span>: color&#125;)</span><br><span class="line"></span><br><span class="line">        selection = <span class="variable language_">self</span>.news_list.curselection()</span><br><span class="line">        <span class="keyword">if</span> selection <span class="keyword">and</span> selection[<span class="number">0</span>] == index:</span><br><span class="line">            <span class="variable language_">self</span>.show_news_detail(index)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_list_select</span>(<span class="params">self, event</span>):</span><br><span class="line">        selection = <span class="variable language_">self</span>.news_list.curselection()</span><br><span class="line">        <span class="keyword">if</span> selection:</span><br><span class="line">            index = selection[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt;= index &lt; <span class="built_in">len</span>(<span class="variable language_">self</span>.news_data):</span><br><span class="line">                <span class="variable language_">self</span>.show_news_detail(index)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_news_detail</span>(<span class="params">self, index</span>):</span><br><span class="line">        news = <span class="variable language_">self</span>.news_data[index]</span><br><span class="line"></span><br><span class="line">        summary_color = <span class="string">&#x27;darkgreen&#x27;</span> <span class="keyword">if</span> <span class="string">&quot;ğŸš¨&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> news[<span class="string">&#x27;summary&#x27;</span>] <span class="keyword">and</span> <span class="string">&quot;ç­‰å¾…&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> news[<span class="string">&#x27;summary&#x27;</span>] <span class="keyword">else</span> <span class="string">&#x27;red&#x27;</span></span><br><span class="line"></span><br><span class="line">        detail_text = <span class="string">f&quot;&quot;&quot;ã€åˆ†ç±»ã€‘<span class="subst">&#123;news[<span class="string">&#x27;category&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">ã€æ ‡é¢˜ã€‘<span class="subst">&#123;news[<span class="string">&#x27;title&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">ã€è·å–æ—¶é—´ã€‘<span class="subst">&#123;news[<span class="string">&#x27;timestamp&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">ã€å¤„ç†å®Œæˆã€‘<span class="subst">&#123;news.get(<span class="string">&#x27;finish_time&#x27;</span>, <span class="string">&#x27;æœªå®Œæˆ&#x27;</span>)&#125;</span></span></span><br><span class="line"><span class="string">ã€é“¾æ¥ã€‘<span class="subst">&#123;news[<span class="string">&#x27;url&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">------------------------------------------</span></span><br><span class="line"><span class="string">ã€AIæ€»ç»“ã€‘</span></span><br><span class="line"><span class="string"><span class="subst">&#123;news[<span class="string">&#x27;summary&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">------------------------------------------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ã€å†…å®¹é¢„è§ˆã€‘</span></span><br><span class="line"><span class="string"><span class="subst">&#123;news[<span class="string">&#x27;content&#x27;</span>][:<span class="number">800</span>] + <span class="string">&#x27;...\n\n(å†…å®¹å¯èƒ½å·²è¢«æˆªæ–­)&#x27;</span> <span class="keyword">if</span> <span class="built_in">len</span>(news[<span class="string">&#x27;content&#x27;</span>]) &gt; <span class="number">800</span> <span class="keyword">else</span> news[<span class="string">&#x27;content&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.detail_text.delete(<span class="number">1.0</span>, tk.END)</span><br><span class="line">        <span class="variable language_">self</span>.detail_text.insert(<span class="number">1.0</span>, detail_text)</span><br><span class="line"></span><br><span class="line">        start_index = <span class="variable language_">self</span>.detail_text.search(<span class="string">&quot;ã€AIæ€»ç»“ã€‘&quot;</span>, <span class="string">&quot;1.0&quot;</span>, stopindex=tk.END)</span><br><span class="line">        <span class="keyword">if</span> start_index:</span><br><span class="line">            end_index = <span class="variable language_">self</span>.detail_text.search(<span class="string">&quot;------------------------------------------&quot;</span>, start_index + <span class="string">&quot;+1c&quot;</span>,</span><br><span class="line">                                                stopindex=tk.END)</span><br><span class="line">            <span class="variable language_">self</span>.detail_text.tag_config(<span class="string">&quot;summary_tag&quot;</span>, foreground=summary_color, font=(<span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="number">10</span>, <span class="string">&quot;bold&quot;</span>))</span><br><span class="line">            <span class="variable language_">self</span>.detail_text.tag_add(<span class="string">&quot;summary_tag&quot;</span>, start_index, end_index)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_status</span>(<span class="params">self, message</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">_update</span>():</span><br><span class="line">            <span class="variable language_">self</span>.status_var.<span class="built_in">set</span>(message)</span><br><span class="line">            <span class="variable language_">self</span>.status_label.config(foreground=<span class="string">&#x27;red&#x27;</span> <span class="keyword">if</span> <span class="string">&#x27;ğŸš¨&#x27;</span> <span class="keyword">in</span> message <span class="keyword">or</span> <span class="string">&#x27;ğŸ›‘&#x27;</span> <span class="keyword">in</span> message <span class="keyword">else</span> <span class="string">&#x27;#007bff&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.root.after(<span class="number">0</span>, _update)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_progress</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">_update</span>():</span><br><span class="line">            <span class="variable language_">self</span>.progress[<span class="string">&#x27;value&#x27;</span>] = value</span><br><span class="line">        <span class="variable language_">self</span>.root.after(<span class="number">0</span>, _update)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_stats</span>(<span class="params">self, total, processed</span>):</span><br><span class="line">        <span class="variable language_">self</span>.stats_var.<span class="built_in">set</span>(<span class="string">f&quot;æ€»æ–°é—»æ•°: <span class="subst">&#123;total&#125;</span> | å·²å¤„ç†å†…å®¹/AI: <span class="subst">&#123;processed&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">crawling_finished</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.is_crawling = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>.start_btn.config(text=<span class="string">&quot;ğŸš€ å¼€å§‹çˆ¬å–&quot;</span>, state=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.save_btn.config(state=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.update_status(<span class="string">f&quot;ğŸ‰ **æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼** æ€»è®¡ <span class="subst">&#123;<span class="built_in">len</span>(self.news_data)&#125;</span> æ¡æ–°é—»å·²å¤„ç†ã€‚&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.update_progress(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_results</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.news_data:</span><br><span class="line">            messagebox.showwarning(<span class="string">&quot;è­¦å‘Š&quot;</span>, <span class="string">&quot;æ²¡æœ‰æ•°æ®å¯ä¿å­˜ï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        finished_data = [d <span class="keyword">for</span> d <span class="keyword">in</span> <span class="variable language_">self</span>.news_data <span class="keyword">if</span> d.get(<span class="string">&#x27;finish_time&#x27;</span>)]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> finished_data:</span><br><span class="line">            messagebox.showwarning(<span class="string">&quot;è­¦å‘Š&quot;</span>, <span class="string">&quot;æ²¡æœ‰å·²å®Œæˆå¤„ç†ï¼ˆå†…å®¹å’ŒAIï¼‰çš„æ•°æ®å¯ä¿å­˜ï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            initial_filename = datetime.now().strftime(<span class="string">&quot;%Y%m%d_%H%M%S_news.md&quot;</span>)</span><br><span class="line">            file_path = filedialog.asksaveasfilename(</span><br><span class="line">                defaultextension=<span class="string">&quot;.md&quot;</span>,</span><br><span class="line">                initialfile=initial_filename,</span><br><span class="line">                filetypes=[(<span class="string">&quot;Markdown files&quot;</span>, <span class="string">&quot;*.md&quot;</span>), (<span class="string">&quot;All files&quot;</span>, <span class="string">&quot;*.*&quot;</span>)]</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> file_path:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(<span class="string">f&quot;# ç½‘æ˜“æ–°é—»AIæ€»ç»“æŠ¥å‘Š\n\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">f&quot;ç”Ÿæˆæ—¶é—´: <span class="subst">&#123;datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">f&quot;æ–°é—»æ•°é‡: <span class="subst">&#123;<span class="built_in">len</span>(finished_data)&#125;</span>\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">                categories = &#123;&#125;</span><br><span class="line">                <span class="keyword">for</span> news <span class="keyword">in</span> finished_data:</span><br><span class="line">                    categories.setdefault(news[<span class="string">&#x27;category&#x27;</span>], []).append(news)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> category, news_list <span class="keyword">in</span> categories.items():</span><br><span class="line">                    f.write(<span class="string">f&quot;## <span class="subst">&#123;category&#125;</span>\n\n&quot;</span>)</span><br><span class="line">                    f.write(<span class="string">&quot;---\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> i, news <span class="keyword">in</span> <span class="built_in">enumerate</span>(news_list, <span class="number">1</span>):</span><br><span class="line">                        f.write(<span class="string">f&quot;### <span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;news[<span class="string">&#x27;title&#x27;</span>]&#125;</span>\n\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;- **è·å–æ—¶é—´**: <span class="subst">&#123;news[<span class="string">&#x27;timestamp&#x27;</span>]&#125;</span>\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;- **å¤„ç†å®Œæˆ**: <span class="subst">&#123;news.get(<span class="string">&#x27;finish_time&#x27;</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;- **åŸæ–‡é“¾æ¥**: &lt;<span class="subst">&#123;news[<span class="string">&#x27;url&#x27;</span>]&#125;</span>&gt;\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        f.write(<span class="string">&quot;#### AIæ€»ç»“\n&quot;</span>)</span><br><span class="line">                        summary_lines = news[<span class="string">&#x27;summary&#x27;</span>].split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                        <span class="keyword">for</span> line <span class="keyword">in</span> summary_lines:</span><br><span class="line">                            f.write(<span class="string">f&quot;&gt; <span class="subst">&#123;line.strip()&#125;</span>\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        f.write(<span class="string">&quot;#### å†…å®¹é¢„è§ˆ (å‰ 200 å­—ç¬¦)\n&quot;</span>)</span><br><span class="line">                        content_preview = news[<span class="string">&#x27;content&#x27;</span>][:<span class="number">200</span>].replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>) + <span class="string">&#x27;...&#x27;</span> <span class="keyword">if</span> <span class="built_in">len</span>(</span><br><span class="line">                            news[<span class="string">&#x27;content&#x27;</span>]) &gt; <span class="number">200</span> <span class="keyword">else</span> news[<span class="string">&#x27;content&#x27;</span>].replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;**å†…å®¹é¢„è§ˆ**: <span class="subst">&#123;content_preview&#125;</span>\n\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">&quot;---\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">            messagebox.showinfo(<span class="string">&quot;æˆåŠŸ&quot;</span>, <span class="string">f&quot;ç»“æœå·²ä¿å­˜åˆ°: <span class="subst">&#123;file_path&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.update_status(<span class="string">f&quot;ğŸ’¾ ç»“æœå·²ä¿å­˜åˆ°: <span class="subst">&#123;file_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            messagebox.showerror(<span class="string">&quot;é”™è¯¯&quot;</span>, <span class="string">f&quot;ä¿å­˜æ–‡ä»¶æ—¶å‡ºé”™: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clear_list</span>(<span class="params">self, silent=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.news_data.clear()</span><br><span class="line">        <span class="variable language_">self</span>.news_list.delete(<span class="number">0</span>, tk.END)</span><br><span class="line">        <span class="variable language_">self</span>.detail_text.delete(<span class="number">1.0</span>, tk.END)</span><br><span class="line">        <span class="variable language_">self</span>.update_stats(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> silent:</span><br><span class="line">            <span class="variable language_">self</span>.update_status(<span class="string">&quot;åˆ—è¡¨å·²æ¸…ç©º&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    root = tk.Tk()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        root.tk.call(<span class="string">&#x27;source&#x27;</span>, <span class="string">&#x27;azure.tcl&#x27;</span>)</span><br><span class="line">        root.tk.call(<span class="string">&#x27;set_theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    app = NewsCrawlerApp(root)</span><br><span class="line">    root.mainloop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://cherises.github.io/post/37181/">https://cherises.github.io/post/37181/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Ollama/">Ollama</a><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">å¤§æ¨¡å‹</a><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/">å¤§æ¨¡å‹åº”ç”¨</a></div><div class="post-share"><div class="social-share" data-image="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Leonardo</div><div class="author-info-description">Focus on thinking, imagination, reasoning, truth-seeking, and pragmatism</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">143</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">23</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Cherises/"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">å‰æƒ…æè¦</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%A4%96-Python-Tkinter-Ollama%EF%BC%9A%E6%9E%84%E5%BB%BA%E7%BD%91%E6%98%93%E6%96%B0%E9%97%BBAI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%80%BB%E7%BB%93%E7%B3%BB%E7%BB%9F"><span class="toc-number"></span> <span class="toc-text">ğŸ¤– Python + Tkinter + Ollamaï¼šæ„å»ºç½‘æ˜“æ–°é—»AIè‡ªåŠ¨åŒ–æ€»ç»“ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9A%80-%E4%B8%80%E3%80%81%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%A7%88%E4%B8%8E%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-number"></span> <span class="toc-text">ğŸš€ ä¸€ã€ç³»ç»Ÿæ¦‚è§ˆä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E8%A7%A3%E6%9E%90"><span class="toc-number"></span> <span class="toc-text">ğŸ› ï¸ äºŒã€æ ¸å¿ƒå·¥å…·å‡½æ•°è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">1. é…ç½®ä¸åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9B%AE%E5%BD%95%E7%88%AC%E5%8F%96-get-category-links"><span class="toc-number">2.</span> <span class="toc-text">2. ç›®å½•çˆ¬å– (get_category_links)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%85%E5%AE%B9%E7%88%AC%E5%8F%96-get-news-content"><span class="toc-number">3.</span> <span class="toc-text">3. å†…å®¹çˆ¬å– (get_news_content)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-AI%E6%80%BB%E7%BB%93-summarize-with-ollama"><span class="toc-number">4.</span> <span class="toc-text">4. AIæ€»ç»“ (summarize_with_ollama)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%BB-%E4%B8%89%E3%80%81GUI%E5%BA%94%E7%94%A8%E7%B1%BB-NewsCrawlerApp-%E8%AF%A6%E8%A7%A3"><span class="toc-number"></span> <span class="toc-text">ğŸ’» ä¸‰ã€GUIåº”ç”¨ç±» (NewsCrawlerApp) è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-setup-ui"><span class="toc-number">1.</span> <span class="toc-text">1. ç•Œé¢å¸ƒå±€ (setup_ui)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6%E9%80%BB%E8%BE%91"><span class="toc-number">2.</span> <span class="toc-text">2. å¤šçº¿ç¨‹æ§åˆ¶é€»è¾‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-start-crawling-%E5%92%8C-toggle-crawling"><span class="toc-number">2.1.</span> <span class="toc-text">ğŸ”¹ start_crawling å’Œ toggle_crawling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-run-master-crawl-%E4%B8%BB%E8%B0%83%E5%BA%A6%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">ğŸ”¹ _run_master_crawl (ä¸»è°ƒåº¦çº¿ç¨‹)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%B9-process-single-news-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%B7%A5%E4%BD%9C%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">ğŸ”¹ _process_single_news (çº¿ç¨‹æ± å·¥ä½œå‡½æ•°)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-UI-%E4%BA%A4%E4%BA%92%E4%B8%8E%E6%9B%B4%E6%96%B0"><span class="toc-number">3.</span> <span class="toc-text">3. UI äº¤äº’ä¸æ›´æ–°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%BE-%E5%9B%9B%E3%80%81%E4%BF%9D%E5%AD%98%E4%B8%8E%E6%B8%85%E7%A9%BA"><span class="toc-number"></span> <span class="toc-text">ğŸ’¾ å››ã€ä¿å­˜ä¸æ¸…ç©º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#save-results"><span class="toc-number">1.</span> <span class="toc-text">save_results</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-number"></span> <span class="toc-text">å®Œæ•´ä»£ç </span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/63534/" title="test"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/79.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="test"/></a><div class="content"><a class="title" href="/post/63534/" title="test">test</a><time datetime="2025-11-23T15:12:05.000Z" title="Created 2025-11-23 15:12:05">2025-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/37181/" title="è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“"/></a><div class="content"><a class="title" href="/post/37181/" title="è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“">è·å–æ–°é—»åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹æ€»ç»“</a><time datetime="2025-11-16T17:20:17.000Z" title="Created 2025-11-16 17:20:17">2025-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/42087/" title="2025å¹´11æœˆ16æ—¥ç½‘æ˜“æ–°é—»æ€»ç»“"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/532.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025å¹´11æœˆ16æ—¥ç½‘æ˜“æ–°é—»æ€»ç»“"/></a><div class="content"><a class="title" href="/post/42087/" title="2025å¹´11æœˆ16æ—¥ç½‘æ˜“æ–°é—»æ€»ç»“">2025å¹´11æœˆ16æ—¥ç½‘æ˜“æ–°é—»æ€»ç»“</a><time datetime="2025-11-16T12:00:35.000Z" title="Created 2025-11-16 12:00:35">2025-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/61362/" title="2025å¹´11æœˆ14æ—¥"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/195.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025å¹´11æœˆ14æ—¥"/></a><div class="content"><a class="title" href="/post/61362/" title="2025å¹´11æœˆ14æ—¥">2025å¹´11æœˆ14æ—¥</a><time datetime="2025-11-14T17:51:59.000Z" title="Created 2025-11-14 17:51:59">2025-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2522/" title="ç¬¬ä¸€ä¸ªå¾®è°ƒè®­ç»ƒæ¨¡å‹"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/263.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç¬¬ä¸€ä¸ªå¾®è°ƒè®­ç»ƒæ¨¡å‹"/></a><div class="content"><a class="title" href="/post/2522/" title="ç¬¬ä¸€ä¸ªå¾®è°ƒè®­ç»ƒæ¨¡å‹">ç¬¬ä¸€ä¸ªå¾®è°ƒè®­ç»ƒæ¨¡å‹</a><time datetime="2025-11-12T20:15:08.000Z" title="Created 2025-11-12 20:15:08">2025-11-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By Leonardo</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/scroll-disable-blur.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« ğŸ”" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>