<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux包管理器的对比与评测 | Leo's Digital Genesis</title><meta name="author" content="Leonardo"><meta name="copyright" content="Leonardo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前情提要 不同版本的Linux发行版有不同的包管理器，有Debian为首的deb,还有RedHat的RPM,以及还有snap和flatpak,以及arch上的一些，还有appimage,但是这些不同的包使得相同的软件要分别打包好多次，所以我想详细的研究一下他们有什么不同之处，以及一个软件是如何在Linux系统中安装和被使用的。  Executive summary（摘要） 不同 Linux 发行版">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux包管理器的对比与评测">
<meta property="og:url" content="https://cherises.github.io/post/37316/index.html">
<meta property="og:site_name" content="Leo&#39;s Digital Genesis">
<meta property="og:description" content="前情提要 不同版本的Linux发行版有不同的包管理器，有Debian为首的deb,还有RedHat的RPM,以及还有snap和flatpak,以及arch上的一些，还有appimage,但是这些不同的包使得相同的软件要分别打包好多次，所以我想详细的研究一下他们有什么不同之处，以及一个软件是如何在Linux系统中安装和被使用的。  Executive summary（摘要） 不同 Linux 发行版">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/46.png">
<meta property="article:published_time" content="2025-10-11T10:53:26.000Z">
<meta property="article:modified_time" content="2025-10-19T08:29:52.590Z">
<meta property="article:author" content="Leonardo">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="包管理器">
<meta property="article:tag" content="Deb">
<meta property="article:tag" content="Rpm">
<meta property="article:tag" content="Snap">
<meta property="article:tag" content="Flatpak">
<meta property="article:tag" content="apt">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/46.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux包管理器的对比与评测",
  "url": "https://cherises.github.io/post/37316/",
  "image": "https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/46.png",
  "datePublished": "2025-10-11T10:53:26.000Z",
  "dateModified": "2025-10-19T08:29:52.590Z",
  "author": [
    {
      "@type": "Person",
      "name": "Leonardo",
      "url": "https://github.com/Cherises/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://cherises.github.io/post/37316/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":5,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux包管理器的对比与评测',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/admonition.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/img/b1.webp);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">143</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">23</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> WuJie</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Leo's Digital Genesis</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux包管理器的对比与评测</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Wujie/"><i class="fa-fw fas fa-globe"></i><span> WuJie</span></a></div><div class="menus_item"><a class="site-page" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Linux包管理器的对比与评测</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-10-11T10:53:26.000Z" title="Created 2025-10-11 10:53:26">2025-10-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-19T08:29:52.590Z" title="Updated 2025-10-19 08:29:52">2025-10-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/">study</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">11.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>52mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><blockquote>
<p>不同版本的Linux发行版有不同的包管理器，有Debian为首的deb,还有RedHat的RPM,以及还有snap和flatpak,以及arch上的一些，还有appimage,但是这些不同的包使得相同的软件要分别打包好多次，所以我想详细的研究一下他们有什么不同之处，以及一个软件是如何在Linux系统中安装和被使用的。</p>
</blockquote>
<h1 id="Executive-summary（摘要）"><a href="#Executive-summary（摘要）" class="headerlink" title="Executive summary（摘要）"></a>Executive summary（摘要）</h1><p>不同 Linux 发行版使用不同的包格式与包管理器（例如 Debian&#x2F;Ubuntu 用 <code>.deb</code> + <code>dpkg/apt</code>，Fedora&#x2F;RHEL 用 <code>rpm</code> + <code>dnf</code>&#x2F;<code>yum</code>，Arch 用 <code>pacman</code>，Alpine 用 <code>apk</code>，Gentoo 用 Portage，SUSE 用 <code>zypper</code> 等），这些传统包管理器负责系统级软件的安装、依赖解析与升级。近年出现的一类“跨发行版”打包方案（Flatpak、Snap、AppImage）以及“函数式&#x2F;事务型”管理器（Nix、Guix、rpm-ostree）提供了可移植性、沙箱、安全或可回滚等特性，但各自有资源、维护与生态的权衡。下面我会逐项详评并给出面向桌面、服务器、发行版维护者与应用开发者的具体建议。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</p>
<h1 id="1-常见“传统”包格式与管理器（按发行版-家族）"><a href="#1-常见“传统”包格式与管理器（按发行版-家族）" class="headerlink" title="1. 常见“传统”包格式与管理器（按发行版&#x2F;家族）"></a>1. 常见“传统”包格式与管理器（按发行版&#x2F;家族）</h1><h3 id="Debian-Ubuntu-deb-dpkg-apt"><a href="#Debian-Ubuntu-deb-dpkg-apt" class="headerlink" title="Debian &#x2F; Ubuntu: .deb (+ dpkg &#x2F; apt)"></a>Debian &#x2F; Ubuntu: <code>.deb</code> (+ <code>dpkg</code> &#x2F; <code>apt</code>)</h3><p>说明：<code>.deb</code> 是 Debian 系统的二进制包格式，<code>dpkg</code> 是底层工具，<code>apt</code>（<code>apt-get</code> &#x2F; <code>apt</code>）是更高级的依赖解析和仓库管理前端。适合系统级安装与依赖管理。资料请见 Debian &#x2F; Ubuntu 官方文档。(<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/dpkg.1.html?utm_source=cherises.github.io" title="dpkg(1) - Linux manual page">man7.org</a>)</p>
<p>优点：成熟、仓库丰富（Debian&#x2F;Ubuntu 软件量大）、工具链与生态完善（自动依赖、签名、镜像网络）。缺点：包必须针对每个发行版&#x2F;版本打包；不同 Debian 系列间 ABI 差异仍会导致兼容问题。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</p>
<h3 id="RPM-系列：rpm-dnf-yum-zypper（Fedora-RHEL-CentOS-openSUSE）"><a href="#RPM-系列：rpm-dnf-yum-zypper（Fedora-RHEL-CentOS-openSUSE）" class="headerlink" title="RPM 系列：rpm + dnf&#x2F;yum&#x2F;zypper（Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE）"></a>RPM 系列：<code>rpm</code> + <code>dnf</code>&#x2F;<code>yum</code>&#x2F;<code>zypper</code>（Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE）</h3><p>说明：<code>rpm</code> 是包格式，<code>dnf</code>（现代）&#x2F;<code>yum</code>（老）为 RHEL&#x2F;Fedora 的包管理前端，openSUSE 常用 <code>zypper</code>（基于 libzypp）。RHEL 新版本把 <code>yum</code> 作为 <code>dnf</code> 的兼容前端。(<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</p>
<p>优点：企业级生态（RHEL&#x2F;Fedora&#x2F;SUSE），强大的仓库管理与模块化支持（RHEL 8+），<code>zypper</code> 在企业场景下表现稳定。缺点：与 <code>.deb</code> 一样需要为目标发行版打包；历史上 <code>yum</code> 到 <code>dnf</code> 的迁移带来学习曲线。(<a target="_blank" rel="noopener" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/software-management_considerations-in-adopting-rhel-8?utm_source=cherises.github.io" title="Chapter 7. Software management">docs.redhat.com</a>)</p>
<h3 id="Arch-pacman"><a href="#Arch-pacman" class="headerlink" title="Arch: pacman"></a>Arch: <code>pacman</code></h3><p>说明：轻量、滚动更新的发行版管理器，<code>pacman</code> 管理二进制包并配套 AUR（用户维护的源）。适合对最新软件和 DIY 愿望强的用户。(<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Pacman?utm_source=cherises.github.io" title="pacman - ArchWiki">ArchWiki</a>)</p>
<p>优点：简洁、速度快、滚动更新体验；AUR 提供海量用户提交包。缺点：维护者&#x2F;用户需更多关注兼容性与更新风险（滚动升级风险）。(<a target="_blank" rel="noopener" href="https://pacman.archlinux.page/?utm_source=cherises.github.io" title="Pacman Home Page">pacman.archlinux.page</a>)</p>
<h3 id="Alpine-apk（Alpine-Package-Keeper）"><a href="#Alpine-apk（Alpine-Package-Keeper）" class="headerlink" title="Alpine: apk（Alpine Package Keeper）"></a>Alpine: <code>apk</code>（Alpine Package Keeper）</h3><p>说明：面向轻量与容器场景的包管理器，包小、设计简洁，常用于容器镜像。(<a target="_blank" rel="noopener" href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html?utm_source=cherises.github.io" title="Working with the Alpine Package Keeper (apk)">docs.alpinelinux.org</a>)</p>
<p>优点：镜像小、运行开销低，便于构建轻量容器镜像。缺点：包生态相对较小，某些常见应用需要移植或编译。(<a target="_blank" rel="noopener" href="https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package?utm_source=cherises.github.io" title="Creating an Alpine package">wiki.alpinelinux.org</a>)</p>
<h3 id="Gentoo-Portage-emerge"><a href="#Gentoo-Portage-emerge" class="headerlink" title="Gentoo: Portage (emerge)"></a>Gentoo: Portage (<code>emerge</code>)</h3><p>说明：源代码编译型包管理器，使用 <code>ebuild</code> 脚本与 USE flags，极高的定制性与优化空间，适合需要源码优化与精细控制的用户。(<a target="_blank" rel="noopener" href="https://dev.gentoo.org/~zmedico/portage/doc/portage.html?utm_source=cherises.github.io" title="Portage Documentation">dev.gentoo.org</a>)</p>
<p>优点：层级灵活、可定制性强、可为硬件&#x2F;用途优化编译选项。缺点：编译时间长、对新手不友好、维护成本高。(<a target="_blank" rel="noopener" href="https://www.linode.com/docs/guides/portage-package-manager/?utm_source=cherises.github.io" title="How to Use Portage to Manage Packages in Gentoo - Linode">Akamai</a>)</p>
<h1 id="2-“跨发行版-桌面导向-可移植”打包格式（Flatpak-Snap-AppImage）"><a href="#2-“跨发行版-桌面导向-可移植”打包格式（Flatpak-Snap-AppImage）" class="headerlink" title="2. “跨发行版 &#x2F; 桌面导向 &#x2F; 可移植”打包格式（Flatpak &#x2F; Snap &#x2F; AppImage）"></a>2. “跨发行版 &#x2F; 桌面导向 &#x2F; 可移植”打包格式（Flatpak &#x2F; Snap &#x2F; AppImage）</h1><p>这些方案目的在于“让桌面应用一次打包，能在多数发行版上运行”——但实现方式与权衡不同。</p>
<h3 id="Flatpak（桌面沙箱-OSTree-后端）"><a href="#Flatpak（桌面沙箱-OSTree-后端）" class="headerlink" title="Flatpak（桌面沙箱 + OSTree 后端）"></a>Flatpak（桌面沙箱 + OSTree 后端）</h3><p>原理：应用以运行时（runtimes）+应用内容形式存储，借助 OSTree 管理版本（类似 Git 的文件系统对象），运行时沙箱通常由 <code>bubblewrap</code> 提供。适合桌面图形应用，Flathub 是主流远程仓库。优点包括跨发行版、权限隔离（可声明权限）与由 runtimes 减少重复依赖。缺点是磁盘占用（runtime 重复）、权限与集成细节需要处理。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</p>
<h3 id="Snap（Canonical-出品）"><a href="#Snap（Canonical-出品）" class="headerlink" title="Snap（Canonical 出品）"></a>Snap（Canonical 出品）</h3><p>原理：Snap 将应用与依赖打包为 snap，使用 <code>snapd</code> 在系统上运行并采用严格&#x2F;经典&#x2F;开发三类 confinement（基于 AppArmor 实现沙箱）。Canonical 提供 Snap Store。优点是统一更新（snapd 管理自动更新）、跨发行版分发；缺点有磁盘&#x2F;启动速度、以及在某些社区里关于中央化（Canonical store）与集成（例如与桌面集成的体验）争议。(<a target="_blank" rel="noopener" href="https://snapcraft.io/docs/snap-confinement?utm_source=cherises.github.io" title="Snap confinement | Snapcraft documentation">Snapcraft</a>)</p>
<h3 id="AppImage（单文件可执行）"><a href="#AppImage（单文件可执行）" class="headerlink" title="AppImage（单文件可执行）"></a>AppImage（单文件可执行）</h3><p>原理：把应用和所需库打包成单个可执行文件，用户直接执行或挂载运行（内部通过 FUSE 或解包运行）。优点是极致的便携性（“一文件运行”）、无需 root 安装；缺点是没有统一的更新&#x2F;回滚机制、缺乏系统级依赖管理与沙箱（需要额外工具来做隔离），对安全与集成的自动化支持较少。(<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</p>
<h1 id="3-“函数式-事务性-原子更新”管理器（Nix-Guix-rpm-ostree-等）"><a href="#3-“函数式-事务性-原子更新”管理器（Nix-Guix-rpm-ostree-等）" class="headerlink" title="3. “函数式 &#x2F; 事务性 &#x2F; 原子更新”管理器（Nix &#x2F; Guix &#x2F; rpm-ostree 等）"></a>3. “函数式 &#x2F; 事务性 &#x2F; 原子更新”管理器（Nix &#x2F; Guix &#x2F; rpm-ostree 等）</h1><p>这些方案关注可回滚、可重复构建、原子更新或不可变系统镜像。</p>
<h3 id="Nix（纯函数式包管理）"><a href="#Nix（纯函数式包管理）" class="headerlink" title="Nix（纯函数式包管理）"></a>Nix（纯函数式包管理）</h3><p>说明：Nix 使用“纯函数式”的构建描述，包被安装到 <code>/nix/store</code> 的独立路径（内容寻址），支持二进制缓存、精确依赖与原子回滚。非常适合需要可重现构建和并行共存不同版本的场景，但学习曲线较陡，和传统发行版的集成也不同。(<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</p>
<h3 id="Guix（类似-Nix，但用-GNU-Scheme）"><a href="#Guix（类似-Nix，但用-GNU-Scheme）" class="headerlink" title="Guix（类似 Nix，但用 GNU Scheme）"></a>Guix（类似 Nix，但用 GNU Scheme）</h3><p>说明：Guix 也是函数式包管理器，强调自由软件原则并用 Scheme 作为描述语言。功能与 Nix 类似（可重现、事务、回滚），适合需要严格重现性的场景。(<a target="_blank" rel="noopener" href="https://guix.gnu.org/manual/?utm_source=cherises.github.io" title="GNU Guix Reference Manual">guix.gnu.org</a>)</p>
<h3 id="rpm-ostree（混合镜像-包系统；用于-Silverblue-等不可变桌面）"><a href="#rpm-ostree（混合镜像-包系统；用于-Silverblue-等不可变桌面）" class="headerlink" title="rpm-ostree（混合镜像&#x2F;包系统；用于 Silverblue 等不可变桌面）"></a>rpm-ostree（混合镜像&#x2F;包系统；用于 Silverblue 等不可变桌面）</h3><p>说明：把操作系统作为 OSTree 镜像对待，<code>rpm-ostree</code> 提供将 RPM “层叠”到基础镜像的能力，更新是原子的（重启后切换新镜像）。适合不可变桌面或对系统一致性有强要求的场景。(<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</p>
<h1 id="4-对比矩阵（关键维度：兼容性-沙箱-原子更新-可移植性-维护成本-推荐场景）"><a href="#4-对比矩阵（关键维度：兼容性-沙箱-原子更新-可移植性-维护成本-推荐场景）" class="headerlink" title="4. 对比矩阵（关键维度：兼容性 &#x2F; 沙箱 &#x2F; 原子更新 &#x2F; 可移植性 &#x2F; 维护成本 &#x2F; 推荐场景）"></a>4. 对比矩阵（关键维度：兼容性 &#x2F; 沙箱 &#x2F; 原子更新 &#x2F; 可移植性 &#x2F; 维护成本 &#x2F; 推荐场景）</h1><blockquote>
<p>下面为简化矩阵（文字版），方便快速对比 </p>
</blockquote>
<ul>
<li><p><strong>兼容性（跨发行版）</strong></p>
<ul>
<li><code>.deb</code>, <code>.rpm</code>, <code>pacman</code>：仅限对应发行版家族（需要分别打包）。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</li>
<li>Flatpak &#x2F; Snap &#x2F; AppImage：高度跨发行版（桌面优先）。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>Nix &#x2F; Guix：可在多发行版上安装 Nix&#x2F;Guix 管理器，软件环境由 store 管理，兼容性好但模式不同并需学习成本。(<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
</ul>
</li>
<li><p><strong>隔离&#x2F;安全</strong></p>
<ul>
<li>Flatpak &#x2F; Snap：内建沙箱&#x2F;接口声明（Flatpak 用 bubblewrap，Snap 依赖 AppArmor 等）。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>AppImage：默认无沙箱（需额外工具），更像“便携二进制”。(<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li>传统包：无额外隔离（取决于系统安全策略）。(<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/dpkg.1.html?utm_source=cherises.github.io" title="dpkg(1) - Linux manual page">man7.org</a>)</li>
</ul>
</li>
<li><p><strong>原子更新 &#x2F; 回滚</strong></p>
<ul>
<li>rpm-ostree、Nix、Guix 提供强回滚&#x2F;事务能力。Flatpak 在应用层面支持回滚（通过 runtimes&#x2F;OSTree），但系统包管理传统上不提供原子整体回滚。(<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</li>
</ul>
</li>
<li><p><strong>磁盘&#x2F;下载开销</strong></p>
<ul>
<li>AppImage（单文件）与 Flatpak（runtimes 可以被共享）与 Snap（每个 snap 含其依赖）在磁盘占用上各有不同：Flatpak 通过 runtimes 减少重复，Snap 往往占用更多空间（但实现细节随应用而变）。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
</ul>
</li>
<li><p><strong>维护&#x2F;打包成本（对上游项目而言）</strong></p>
<ul>
<li>做 <code>.deb</code> &#x2F; <code>.rpm</code>：需要针对多个发行版&#x2F;版本分别打包（高维护）。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</li>
<li>提供 Flatpak &#x2F; Snap &#x2F; AppImage：可以覆盖更多桌面发行版，降低多次打包痛点，但需学习对应工具链（flatpak-builder &#x2F; snapcraft &#x2F; appimagetool），并处理沙箱权限&#x2F;集成问题。(<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/snapcraft/?utm_source=cherises.github.io" title="Snapcraft 8.12.1 documentation">documentation.ubuntu.com</a>)</li>
</ul>
</li>
</ul>
<h1 id="5-实务建议（给不同角色的决策树与最佳实践）"><a href="#5-实务建议（给不同角色的决策树与最佳实践）" class="headerlink" title="5. 实务建议（给不同角色的决策树与最佳实践）"></a>5. 实务建议（给不同角色的决策树与最佳实践）</h1><h3 id="如果你是桌面应用开发者（目标覆盖多数-Linux-桌面用户）"><a href="#如果你是桌面应用开发者（目标覆盖多数-Linux-桌面用户）" class="headerlink" title="如果你是桌面应用开发者（目标覆盖多数 Linux 桌面用户）"></a>如果你是<strong>桌面应用开发者</strong>（目标覆盖多数 Linux 桌面用户）</h3><ul>
<li>首选：<strong>Flatpak（上传 Flathub）</strong> 或 <strong>AppImage</strong>：Flatpak 提供更好的权限声明与自动更新机制，Flathub 有较大用户流量；AppImage 适合极致便携与不想依赖中心仓库的场景。若你愿意接受 Canonical 的生态与 Snap Store，也可发布 Snap。(<a target="_blank" rel="noopener" href="https://docs.flathub.org/blog/app-safety-layered-approach-source-to-user?utm_source=cherises.github.io" title="Flathub Safety: A Layered Approach from Source to User">docs.flathub.org</a>)</li>
<li>同时策略：发布一个官方“通用包”（Flatpak 或 Snap 或 AppImage）+ 为主要发行版（Debian&#x2F;Ubuntu、Fedora）提供 <code>.deb</code> &#x2F; <code>.rpm</code> 包（可通过 CI 自动化构建）。这样覆盖广且兼顾系统集成。(<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/server/how-to/software/package-management/?utm_source=cherises.github.io" title="Install and manage packages - Ubuntu Server">documentation.ubuntu.com</a>)</li>
</ul>
<h3 id="如果你是服务器软件-运维（稳定性、性能与可审计性优先）"><a href="#如果你是服务器软件-运维（稳定性、性能与可审计性优先）" class="headerlink" title="如果你是服务器软件&#x2F;运维（稳定性、性能与可审计性优先）"></a>如果你是<strong>服务器软件&#x2F;运维</strong>（稳定性、性能与可审计性优先）</h3><ul>
<li>仍以发行版原生包（<code>.deb</code>&#x2F;<code>.rpm</code>）或容器化（Docker&#x2F;OCI 镜像）为主。对关键生产系统推荐使用发行版包或容器镜像来获得安全补丁与长期支持。对想要可回滚、可重现部署的环境，可以评估 <strong>Nix</strong> 或 <strong>Guix</strong>。(<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
</ul>
<h3 id="如果你是发行版维护者-打包维护者"><a href="#如果你是发行版维护者-打包维护者" class="headerlink" title="如果你是发行版维护者 &#x2F; 打包维护者"></a>如果你是<strong>发行版维护者 &#x2F; 打包维护者</strong></h3><ul>
<li>继续维护本家族的包（<code>.deb</code>&#x2F;<code>.rpm</code>&#x2F;<code>pacman</code> 等）以保证系统一致性；同时考虑为桌面应用维护 Flatpak 包以降低上游重复工作。对于希望走“不可变 OS”路线（比如 Fedora Silverblue），可采用 <code>rpm-ostree</code> 模式。(<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</li>
</ul>
<h1 id="6-常见误区与实际坑（给开发者-管理员的提醒）"><a href="#6-常见误区与实际坑（给开发者-管理员的提醒）" class="headerlink" title="6. 常见误区与实际坑（给开发者&#x2F;管理员的提醒）"></a>6. 常见误区与实际坑（给开发者&#x2F;管理员的提醒）</h1><ol>
<li><strong>“只做一个 Flatpak 就万事大吉”</strong>：Flatpak 在桌面非常好，但它不是系统服务&#x2F;daemon 的替代（有些后台服务仍应用系统包或容器部署）。同时，桌面集成（桌面主题、文件对接）需要额外工作。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li><strong>“AppImage 安全”</strong>：AppImage 本身不提供强制沙箱，运行时权限需开发者&#x2F;用户额外控制。若关注安全隔离，优先考虑 Flatpak&#x2F;Snap（并按最佳实践限制权限）。(<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li><strong>“Nix&#x2F;Guix 太复杂就放弃”</strong>：确实学习曲线陡，但在需要可重现构建、并行共存不同版本、或 CI&#x2F;CD 要求严格时，投入回报相当可观。(<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
</ol>
<h1 id="7-给上游发布者的一套可执行发布流程建议（最小惊扰、覆盖最大用户）"><a href="#7-给上游发布者的一套可执行发布流程建议（最小惊扰、覆盖最大用户）" class="headerlink" title="7. 给上游发布者的一套可执行发布流程建议（最小惊扰、覆盖最大用户）"></a>7. 给上游发布者的一套<strong>可执行发布流程建议</strong>（最小惊扰、覆盖最大用户）</h1><ol>
<li><p>在 CI（GitHub Actions &#x2F; GitLab CI）中配置自动构建：</p>
<ul>
<li>构建 <code>.deb</code>（Debian&#x2F;Ubuntu LTS targets）与 <code>.rpm</code>（Fedora &#x2F; CentOS &#x2F; RHEL targets）。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</li>
<li>同时用 <code>flatpak-builder</code> 构建并在合适时推送到 Flathub（或项目自有 remote）。(<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/snapcraft/?utm_source=cherises.github.io" title="Snapcraft 8.12.1 documentation">documentation.ubuntu.com</a>)</li>
<li>可选：生成 AppImage（方便单文件下载）与 Snap（如果希望进 Canonical 的生态）。(<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
</ul>
</li>
<li><p>自动化签名与发布：为发行包与 Flatpak 进行数字签名，保证用户端可验证来源。Flatpak&#x2F;OSTree 本身支持签名机制；传统仓库用 GPG 签名。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</p>
</li>
<li><p>提供多种安装方式的文档（安装说明、权限需求、沙箱声明、桌面集成说明），并在 README 中明确推荐的方式（例如“对桌面用户请优先 Flatpak&#x2F;Flathub；对服务器请使用 Docker&#x2F;Native package”）。(<a target="_blank" rel="noopener" href="https://docs.flathub.org/blog/app-safety-layered-approach-source-to-user?utm_source=cherises.github.io" title="Flathub Safety: A Layered Approach from Source to User">docs.flathub.org</a>)</p>
</li>
</ol>
<h1 id="8-结论（一句话版-推荐）"><a href="#8-结论（一句话版-推荐）" class="headerlink" title="8. 结论（一句话版 + 推荐）"></a>8. 结论（一句话版 + 推荐）</h1><ul>
<li><strong>桌面应用优先采用 Flatpak（Flathub）或同时提供 AppImage，再根据用户需求补 <code>.deb</code>&#x2F;<code>.rpm</code>。</strong> 这是兼顾可移植性与用户体验的平衡解。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li><strong>服务器与生产环境仍然以发行版原生包或容器为主</strong>，需要高可用&#x2F;可审计&#x2F;安全可控时，强烈考虑 Nix&#x2F;Guix 或 rpm-ostree 这种可回滚&#x2F;原子更新的方案（取决于你的运维哲学）。(<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
</ul>
<hr>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>Debian packaging &#x2F; APT &#x2F; dpkg 文档。(<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</li>
<li>Red Hat &#x2F; DNF 文档（DNF 是 YUM 的下一代）。(<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
<li>ArchWiki — Pacman。(<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Pacman?utm_source=cherises.github.io" title="pacman - ArchWiki">ArchWiki</a>)</li>
<li>Alpine <code>apk</code> 文档与 Wiki。(<a target="_blank" rel="noopener" href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html?utm_source=cherises.github.io" title="Working with the Alpine Package Keeper (apk)">docs.alpinelinux.org</a>)</li>
<li>Flatpak 文档（under-the-hood, runtimes, bubblewrap）与 Flathub 安全说明。(<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>Snap &#x2F; Snapcraft 文档（confinement &#x2F; 安全策略）。(<a target="_blank" rel="noopener" href="https://snapcraft.io/docs/snap-confinement?utm_source=cherises.github.io" title="Snap confinement | Snapcraft documentation">Snapcraft</a>)</li>
<li>AppImage 官方站点与说明。(<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li>Nix &#x2F; NixOS 手册（纯函数式包管理）。(<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
<li>GNU Guix manual。(<a target="_blank" rel="noopener" href="https://guix.gnu.org/manual/?utm_source=cherises.github.io" title="GNU Guix Reference Manual">guix.gnu.org</a>)</li>
<li>Portage（Gentoo）文档，Zypper（openSUSE），rpm-ostree（Fedora Silverblue）文档。(<a target="_blank" rel="noopener" href="https://dev.gentoo.org/~zmedico/portage/doc/portage.html?utm_source=cherises.github.io" title="Portage Documentation">dev.gentoo.org</a>)</li>
</ul>
<hr>
<h1 id="Linux-Windows-macOS-—-软件安装全生命周期对比报告"><a href="#Linux-Windows-macOS-—-软件安装全生命周期对比报告" class="headerlink" title="Linux &#x2F; Windows &#x2F; macOS — 软件安装全生命周期对比报告"></a>Linux &#x2F; Windows &#x2F; macOS — 软件安装全生命周期对比报告</h1><p>下面是一份结构化、可操作的对比报告，覆盖<strong>从发现 → 安装 → 运行 → 升级 → 卸载 → 回滚&#x2F;清理</strong>的完整生命周期，指出三大操作系统（及常见 Linux 发行版家族）在流程、技术实现、权限、安全、运维与开发者视角上的关键差别与实务建议。</p>
<h1 id="Executive-summary（要点）"><a href="#Executive-summary（要点）" class="headerlink" title="Executive summary（要点）"></a>Executive summary（要点）</h1><ul>
<li><strong>Windows &#x2F; macOS</strong> 的桌面应用分发更集中（Installer + App Store &#x2F; Notarized apps），用户体验偏“单文件&#x2F;可视化安装器”。</li>
<li><strong>Linux</strong> 生态分散：有传统 <em>发行版原生包管理器</em>（<code>.deb</code>&#x2F;<code>.rpm</code>&#x2F;<code>pacman</code>&#x2F;<code>apk</code> 等），也有 <strong>跨发行版打包</strong>（Flatpak &#x2F; Snap &#x2F; AppImage）和 <strong>函数式&#x2F;不可变</strong> 方案（Nix&#x2F;Guix&#x2F;rpm-ostree）。</li>
<li>生命周期的每一步在实现细节上差异很大（如依赖解析、权限、文件位置、服务注册、回滚策略等），这影响到开发者打包策略与运维选择。</li>
</ul>
<h1 id="一、软件安装的-通用生命周期阶段（任何平台都存在的高层步骤）"><a href="#一、软件安装的-通用生命周期阶段（任何平台都存在的高层步骤）" class="headerlink" title="一、软件安装的 通用生命周期阶段（任何平台都存在的高层步骤）"></a>一、软件安装的 <strong>通用生命周期阶段</strong>（任何平台都存在的高层步骤）</h1><ol>
<li><strong>发现</strong>：用户&#x2F;自动化工具找到软件（仓库、商店、官网、包管理器索引、容器镜像仓库）。</li>
<li><strong>获取&#x2F;下载</strong>：从仓库、商店或官网下载二进制&#x2F;源代码&#x2F;镜像。</li>
<li><strong>验证</strong>：数字签名、证书、哈希校验、商店审核或沙箱策略。</li>
<li><strong>解包&#x2F;安装</strong>：把文件放到适当位置、更新索引&#x2F;缓存、执行安装脚本、注册服务或桌面条目。</li>
<li><strong>配置</strong>：生成&#x2F;保留配置文件（全局 <code>/etc</code> &#x2F; Windows 注册表 &#x2F; macOS <code>~/Library</code>），设置权限。</li>
<li><strong>集成</strong>：在桌面菜单、启动器、系统服务、文件关联中注册。</li>
<li><strong>运行</strong>：加载二进制（ELF &#x2F; PE &#x2F; Mach-O）、动态链接库解析、权限检查、沙箱&#x2F;容器约束。</li>
<li><strong>升级&#x2F;补丁</strong>：通过包管理器&#x2F;商店&#x2F;自带更新机制获取并应用更新（增量或完整替换）。</li>
<li><strong>卸载&#x2F;清理</strong>：移除程序文件，处理依赖&#x2F;残留配置、回滚（若支持）。</li>
<li><strong>审计&#x2F;回滚</strong>（可选）：查看变更日志、恢复到先前版本（如果包管理器或系统支持原子回滚）。</li>
</ol>
<p>下面按平台和常见 Linux 发行版逐项展开实现细节与区别。</p>
<h1 id="二、Linux（分发式生态）——详尽流程与差异"><a href="#二、Linux（分发式生态）——详尽流程与差异" class="headerlink" title="二、Linux（分发式生态）——详尽流程与差异"></a>二、Linux（分发式生态）——详尽流程与差异</h1><h2 id="2-1-两类“主要范式”"><a href="#2-1-两类“主要范式”" class="headerlink" title="2.1 两类“主要范式”"></a>2.1 两类“主要范式”</h2><p>A. <strong>发行版原生包管理器（系统包）</strong>：例如 Debian&#x2F;Ubuntu (<code>.deb</code>, <code>apt</code>&#x2F;<code>dpkg</code>)，RHEL&#x2F;Fedora (<code>.rpm</code>, <code>dnf</code>&#x2F;<code>rpm</code>)，Arch (<code>pacman</code>)，Alpine (<code>apk</code>)，Gentoo (<code>Portage/emerge</code>)。<br>B. <strong>跨发行版 &#x2F; 桌面优先或便携方案</strong>：Flatpak、Snap、AppImage。<br>此外还有 <strong>函数式包管理&#x2F;不可变系统</strong>：Nix、Guix、rpm-ostree（Silverblue 等）。</p>
<h2 id="2-2-从获取到安装（举例与实现要点）"><a href="#2-2-从获取到安装（举例与实现要点）" class="headerlink" title="2.2 从获取到安装（举例与实现要点）"></a>2.2 从获取到安装（举例与实现要点）</h2><h3 id="Debian-Ubuntu-apt-dpkg"><a href="#Debian-Ubuntu-apt-dpkg" class="headerlink" title="Debian&#x2F;Ubuntu (apt + dpkg)"></a>Debian&#x2F;Ubuntu (<code>apt</code> + <code>dpkg</code>)</h3><ul>
<li><strong>获取</strong>：<code>apt update</code> 刷新索引，<code>apt install pkg</code> 从 APT 仓库下载 <code>.deb</code>。</li>
<li><strong>验证</strong>：仓库元数据通常用 GPG 签名；<code>apt</code>&#x2F;<code>dpkg</code> 校验签名与包完整性。</li>
<li><strong>安装流程</strong>：<code>dpkg</code> 解包到文件系统（通常 <code>/usr/bin</code> <code>/usr/lib</code> <code>/etc</code>），处理 control 文件（依赖、元数据），执行 <code>preinst</code>, <code>postinst</code>, <code>prerm</code>, <code>postrm</code> 脚本（包维护脚本）。<code>apt</code> 在高层解析依赖、自动拉取需要的包并调用 <code>dpkg</code>。安装后可能运行 <code>ldconfig</code>、<code>update-desktop-database</code>、<code>update-mime-database</code> 等。</li>
<li><strong>配置保存</strong>：默认 <code>apt remove</code> 会保留 <code>/etc</code> 中的配置文件（称为 conffiles）；<code>apt purge</code> 或 <code>dpkg --purge</code> 可删除配置。</li>
<li><strong>卸载</strong>：<code>apt remove packagename</code> &#x2F; <code>apt purge packagename</code>；遗留孤立依赖可用 <code>apt autoremove</code> 清理。</li>
<li><strong>回滚</strong>：没有内建原子回滚（可用快照技术如 LVM&#x2F;ZFS 或使用 NixOS 等实现回滚）。</li>
</ul>
<h3 id="RHEL-Fedora-dnf-yum-rpm"><a href="#RHEL-Fedora-dnf-yum-rpm" class="headerlink" title="RHEL &#x2F; Fedora (dnf&#x2F;yum + rpm)"></a>RHEL &#x2F; Fedora (<code>dnf</code>&#x2F;<code>yum</code> + <code>rpm</code>)</h3><ul>
<li>工作原理类似 <code>.deb</code>：<code>rpm</code> 管理包安装&#x2F;卸载，<code>dnf</code> 处理仓库&#x2F;依赖解析并调用 <code>rpm</code>。</li>
<li><code>rpm</code> 有 pre&#x2F;post 脚本，处理 SELinux context 安装（<code>restorecon</code>），以及 <code>alternatives</code> 管理器用于选择不同实现。</li>
<li><strong>注意</strong>：SELinux 可能影响安装后的行为（需要 <code>restorecon</code>&#x2F;策略允许）。</li>
</ul>
<h3 id="Arch-pacman-1"><a href="#Arch-pacman-1" class="headerlink" title="Arch (pacman)"></a>Arch (<code>pacman</code>)</h3><ul>
<li>二进制包管理，滚动更新；<code>pacman -Syu</code> 更新系统，<code>pacman -S package</code> 安装。</li>
<li>有 AUR（用户构建存档）提供 PKGBUILD 源包脚本，社区维护。</li>
<li>删除含有配置&#x2F;依赖的多种选项（<code>pacman -R</code>, <code>-Rs</code>, <code>-Rns</code>）。</li>
</ul>
<h3 id="Alpine-apk"><a href="#Alpine-apk" class="headerlink" title="Alpine (apk)"></a>Alpine (<code>apk</code>)</h3><ul>
<li>轻量、用于容器镜像优化；<code>apk add pkg</code>，包通常更小，面向 musl libc。</li>
<li>容器镜像大小友好，但生态较小。</li>
</ul>
<h3 id="Gentoo-Portage"><a href="#Gentoo-Portage" class="headerlink" title="Gentoo (Portage)"></a>Gentoo (<code>Portage</code>)</h3><ul>
<li><code>emerge package</code> 从源代码编译，使用 <code>USE</code> flags 自定义功能。安装实质是源码配置 + make -&gt; install。可高度优化但耗时长。</li>
</ul>
<h3 id="Nix-Guix"><a href="#Nix-Guix" class="headerlink" title="Nix &#x2F; Guix"></a>Nix &#x2F; Guix</h3><ul>
<li>包安装进 <code>/nix/store</code>（内容寻址路径），不会覆盖系统文件；通过环境或 profile 激活软件。</li>
<li>优点：并存多个版本、可重现、原子回滚。学习曲线较大。</li>
</ul>
<h2 id="2-3-跨发行包：Flatpak-Snap-AppImage（桌面应用）"><a href="#2-3-跨发行包：Flatpak-Snap-AppImage（桌面应用）" class="headerlink" title="2.3 跨发行包：Flatpak &#x2F; Snap &#x2F; AppImage（桌面应用）"></a>2.3 跨发行包：Flatpak &#x2F; Snap &#x2F; AppImage（桌面应用）</h2><ul>
<li><strong>Flatpak</strong>：应用与 runtime（共享运行时）分离，使用 <code>flatpak install flathub com.example.App</code>。有权限声明（文件访问、网络等），沙箱基于 bubblewrap。优点：一致性好、权限可控；缺点：磁盘占用、集成需处理。</li>
<li><strong>Snap</strong>：<code>snap install package</code>；snapd 管理 auto-update、confinement（AppArmor）；常被批评为较中央化（Canonical 商店）。</li>
<li><strong>AppImage</strong>：单文件可执行，用户下载后 <code>chmod +x file.AppImage</code> 并直接运行。无自动更新或沙箱（可配合工具）。优点便携，缺点更新与集成需自己实现。</li>
</ul>
<h2 id="2-4-典型安装脚本与-hook（Linux-的“魔法”）"><a href="#2-4-典型安装脚本与-hook（Linux-的“魔法”）" class="headerlink" title="2.4 典型安装脚本与 hook（Linux 的“魔法”）"></a>2.4 典型安装脚本与 hook（Linux 的“魔法”）</h2><ul>
<li>包含 <code>preinst/postinst/prerm/postrm</code>（Debian）或 <code>%pre/%post/%preun/%postun</code>（RPM）脚本，用于：创建用户&#x2F;组、设置权限、注册 systemd unit、重建 caches。</li>
<li>System integration：systemd 单元文件通常放 <code>/lib/systemd/system</code> 或 <code>/etc/systemd/system</code>；安装后需要 <code>systemctl daemon-reload</code> 并启用服务 <code>systemctl enable --now foo.service</code>。</li>
</ul>
<h2 id="2-5-文件位置（遵循-FHS）"><a href="#2-5-文件位置（遵循-FHS）" class="headerlink" title="2.5 文件位置（遵循 FHS）"></a>2.5 文件位置（遵循 FHS）</h2><p>常见路径（Linux）：</p>
<ul>
<li>可执行：<code>/usr/bin</code>, <code>/usr/sbin</code>, <code>/usr/local/bin</code>, <code>/opt/&lt;app&gt;/bin</code></li>
<li>库：<code>/usr/lib</code>（架构子目录），<code>/usr/local/lib</code></li>
<li>配置：<code>/etc/&lt;app&gt;</code>（系统级配置）</li>
<li>数据：<code>/var/lib/&lt;app&gt;</code>（数据库、状态）</li>
<li>日志：<code>/var/log/&lt;app&gt;</code></li>
<li>桌面文件：<code>/usr/share/applications/*.desktop</code>（用于菜单集成）</li>
</ul>
<h2 id="2-6-权限、签名与安全"><a href="#2-6-权限、签名与安全" class="headerlink" title="2.6 权限、签名与安全"></a>2.6 权限、签名与安全</h2><ul>
<li>发行版仓库通常用 GPG 签名元数据；<code>apt</code>&#x2F;<code>dnf</code> 检查签名。Flatpak&#x2F;Snap&#x2F;Store 有各自签名与审查。</li>
<li>沙箱：Flatpak（bubblewrap）、Snap（AppArmor），传统包通常没有沙箱（依靠系统安全机制如 SELinux &#x2F; AppArmor）。</li>
<li>升级策略：snap 自动后台更新，flatpak 也能定期更新；传统包靠 <code>apt/dnf/pacman</code>。</li>
</ul>
<h2 id="2-7-卸载与清理的细节"><a href="#2-7-卸载与清理的细节" class="headerlink" title="2.7 卸载与清理的细节"></a>2.7 卸载与清理的细节</h2><ul>
<li>Debian 的 <code>conffiles</code>：<code>apt remove</code> 保留配置，<code>apt purge</code> 删除配置。<code>dpkg -l</code> 可查看状态。</li>
<li>orphaned dependencies：<code>apt autoremove</code>, <code>dnf autoremove</code>, <code>pacman -Qdt</code> 等。</li>
<li>编译安装（<code>make install</code>）的卸载常常困难，推荐使用 checkinstall 或将编译产物打包为 <code>.deb</code>&#x2F;<code>.rpm</code>，或使用 stow 管理 <code>/usr/local</code> 下的文件。</li>
</ul>
<h1 id="三、Windows-——-安装流程与特点"><a href="#三、Windows-——-安装流程与特点" class="headerlink" title="三、Windows —— 安装流程与特点"></a>三、Windows —— 安装流程与特点</h1><h2 id="3-1-常见打包-分发方式"><a href="#3-1-常见打包-分发方式" class="headerlink" title="3.1 常见打包&#x2F;分发方式"></a>3.1 常见打包&#x2F;分发方式</h2><ul>
<li><strong>EXE installer</strong>（自定义安装程序，通常 NSIS&#x2F;InnoSetup&#x2F;InstallShield）</li>
<li><strong>MSI (Windows Installer)</strong>（结构化安装、支持事务、可被企业管理）</li>
<li><strong>MSIX &#x2F; APPX</strong>（现代安装包、受 Windows Store 支持，沙箱化与签名）</li>
<li><strong>Windows Store &#x2F; Microsoft Store</strong>（集中式审查与自动更新）</li>
<li><strong>可移植单文件</strong>（绿色版，直接解压运行）</li>
<li><strong>包管理器</strong>：<code>winget</code>, Chocolatey, Scoop（第三方）</li>
</ul>
<h2 id="3-2-生命周期实现要点"><a href="#3-2-生命周期实现要点" class="headerlink" title="3.2 生命周期实现要点"></a>3.2 生命周期实现要点</h2><ul>
<li><strong>获取与验证</strong>：数字签名（Authenticode）为常见验证方式；MSI 包&#x2F;EXE 可带签名证书。Windows Store 应用受商店审核与签名。</li>
<li><strong>安装</strong>：EXE&#x2F;MSI 需要管理员权限（UAC）来写入 <code>C:\Program Files</code> 或注册系统服务、驱动。MSI 支持 rollback、安装事务与标准卸载接口。</li>
<li><strong>注册与集成</strong>：写入注册表（<code>HKLM</code> &#x2F; <code>HKCU</code>），添加 Start Menu 快捷方式，修改 PATH（系统级或用户级）。</li>
<li><strong>服务 &#x2F; 驱动</strong>：Windows 服务通过 Service Control Manager（SCM）注册；驱动需签名（WHQL）并加载为内核模块。</li>
<li><strong>升级</strong>：通过内置更新、MSI patch（MSP）或应用自带更新（Squirrel、Sparkle-like frameworks for Windows）或 Windows Update &#x2F; Store。</li>
<li><strong>卸载</strong>：通过控制面板&#x2F;设置中的卸载条目（MSI 会自动处理回滚），若 EXE 提供卸载程序则运行对应卸载器。残留常见（注册表、用户配置），需清理工具或第三方清理。</li>
</ul>
<h2 id="3-3-安全与权限"><a href="#3-3-安全与权限" class="headerlink" title="3.3 安全与权限"></a>3.3 安全与权限</h2><ul>
<li><strong>UAC</strong>：用户确认后获得管理员权限。安装者若不请求 UAC，则只能做用户级安装（<code>%LocalAppData%</code>）。</li>
<li><strong>签名与信誉</strong>：未签名&#x2F;被标记的软件在安装时会收到 Windows Defender &#x2F; SmartScreen 警告。企业可以使用代码签名证书与企业签名策略。</li>
</ul>
<h1 id="四、macOS-——-安装流程与特点"><a href="#四、macOS-——-安装流程与特点" class="headerlink" title="四、macOS —— 安装流程与特点"></a>四、macOS —— 安装流程与特点</h1><h2 id="4-1-常见分发方式"><a href="#4-1-常见分发方式" class="headerlink" title="4.1 常见分发方式"></a>4.1 常见分发方式</h2><ul>
<li><strong>App Store</strong>（集中、签名与审查，自动更新）</li>
<li><strong>.dmg + Drag-and-drop <code>.app</code></strong>（最常见桌面应用分发方式）</li>
<li><strong>.pkg 安装器</strong>（更复杂的安装步骤、可能需要 root、支持 postinstall 脚本）</li>
<li><strong>Homebrew &#x2F; MacPorts &#x2F; Fink</strong>（包管理，偏开发&#x2F;命令行工具）</li>
<li>** notarization &amp; Gatekeeper**：Apple 要求开发者对分发的二进制进行 notarize（上 Apple 扫描）以避免 Gatekeeper 阻止安装。</li>
</ul>
<h2 id="4-2-生命周期算法"><a href="#4-2-生命周期算法" class="headerlink" title="4.2 生命周期算法"></a>4.2 生命周期算法</h2><ul>
<li><strong>安装</strong>：拖拽 <code>.app</code> 到 <code>/Applications</code>（用户可拖拽到自己目录），或运行 <code>.pkg</code>（需要管理员密码）。<code>.app</code> 本质上是目录包（bundle），包含二进制（Mach-O）、资源、Info.plist。</li>
<li><strong>验证</strong>：Gatekeeper 会检查签名与 notarization。App Store 应用由 Apple 管理签名&#x2F;更新。</li>
<li><strong>服务</strong>：后台服务使用 <code>launchd</code>（<code>.plist</code> 放 <code>/Library/LaunchDaemons</code> 或 <code>~/Library/LaunchAgents</code>）。</li>
<li><strong>升级</strong>：App Store 自动更新；非商店应用常用 Sparkle（macOS 的常见自动更新框架）或开发者自建更新。Homebrew 使用 <code>brew upgrade</code>。</li>
<li><strong>卸载</strong>：拖 <code>.app</code> 到废纸篓（常见），但会残留配置（<code>~/Library/Preferences</code>、<code>~/Library/Application Support</code>）；<code>pkg</code> 安装的可能有卸载脚本或需人工清理。Homebrew 提供 <code>brew uninstall</code> 完整卸载。</li>
</ul>
<h2 id="4-3-权限与内核扩展"><a href="#4-3-权限与内核扩展" class="headerlink" title="4.3 权限与内核扩展"></a>4.3 权限与内核扩展</h2><ul>
<li>新 macOS 版本限制 kext（kernel extensions），使用 System Extensions 或 DriverKit。Notarization 与用户交互（安全性）强。</li>
</ul>
<h1 id="五、关键对比（快速要点）"><a href="#五、关键对比（快速要点）" class="headerlink" title="五、关键对比（快速要点）"></a>五、关键对比（快速要点）</h1><ul>
<li><strong>依赖管理</strong>：Linux 发行版包管理器自动解析并安装依赖（<code>.deb</code> &#x2F; <code>.rpm</code> &#x2F; <code>pacman</code>）；Windows 多数 EXE 打包会包含所需依赖或依赖系统库（有时通过 redistributables）；macOS <code>.app</code> 通常包含所需库或使用系统框架。</li>
<li><strong>沙箱&#x2F;隔离</strong>：Flatpak&#x2F;Snap&#x2F;Container（Linux） vs App Store&#x2F;Notarized apps + sandboxing（macOS） vs MSIX&#x2F;Store（Windows）。传统系统包（Linux、Windows EXE&#x2F;Installer）常不提供自动化沙箱。</li>
<li><strong>权限&#x2F;管理员</strong>：Linux 安装系统包需要 root；Windows 安装到 Program Files &#x2F; 注册表需要 UAC 授权；macOS 拖动 <code>.app</code> 可以免 root（放 <code>/Applications</code> 可能需要）。</li>
<li><strong>回滚&#x2F;事务</strong>：Nix&#x2F;Guix&#x2F;rpm-ostree 提供原子回滚；MSI 提供事务与回滚支持；传统 apt&#x2F;rpm&#x2F;pacman 无原子全系统回滚（可借快照）。</li>
<li><strong>更新机制</strong>：Linux：集中仓库&#x2F;flatpak&#x2F;snap 自动或手动更新；Windows：Store&#x2F;Windows Update + 应用自带；macOS：App Store&#x2F;Sparkle&#x2F;Homebrew。</li>
<li><strong>卸载后的残留</strong>：Windows 注册表与服务常残留；macOS <code>.app</code> 常留 Library 配置；Linux <code>purge</code>&#x2F;<code>autoremove</code> 可清理但必须正确运维。</li>
</ul>
<h1 id="六、对开发者-打包维护者的实务建议"><a href="#六、对开发者-打包维护者的实务建议" class="headerlink" title="六、对开发者 &#x2F; 打包维护者的实务建议"></a>六、对开发者 &#x2F; 打包维护者的实务建议</h1><ol>
<li><p><strong>桌面应用</strong>：</p>
<ul>
<li>优先：<strong>Flatpak (Flathub)</strong> + <strong>AppImage</strong>（作为快速下载）; 同时提供 <code>.deb</code>&#x2F;<code>.rpm</code>（或 distro-specific repo）以便系统深度集成。</li>
<li>macOS：提供 <code>.dmg</code> 或 App Store；Windows：提供 MSI（更易于企业管理）并签名。</li>
</ul>
</li>
<li><p><strong>服务器软件</strong>：优先 native package (<code>.deb</code>&#x2F;<code>.rpm</code>) 或容器镜像（Docker&#x2F;OCI）；对可重复部署选 Nix&#x2F;Guix 或将部署纳入镜像&#x2F;配置管理（Ansible、Salt）。</p>
</li>
<li><p><strong>自动化 CI</strong>：在 CI 中自动构建多个目标（deb&#x2F;rpm&#x2F;flatpak&#x2F;appimage&#x2F;msi&#x2F;zip）并签名、发布到相应渠道。</p>
</li>
<li><p><strong>安全</strong>：签名与自动更新非常重要；使用沙箱（flatpak, snap）或容器化来减小攻击面。</p>
</li>
<li><p><strong>清理策略</strong>：提供 uninstall&#x2F;purge 脚本、清楚告知配置文件位置，避免用户数据误删（提示保留用户数据或备份）。</p>
</li>
</ol>
<h1 id="七、示例命令速查（实用）"><a href="#七、示例命令速查（实用）" class="headerlink" title="七、示例命令速查（实用）"></a>七、示例命令速查（实用）</h1><h2 id="Linux（Debian-Ubuntu）"><a href="#Linux（Debian-Ubuntu）" class="headerlink" title="Linux（Debian&#x2F;Ubuntu）"></a>Linux（Debian&#x2F;Ubuntu）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看包信息</span></span><br><span class="line">apt show nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载（保留配置）</span></span><br><span class="line"><span class="built_in">sudo</span> apt remove nginx</span><br><span class="line"><span class="comment"># 卸载并删除配置</span></span><br><span class="line"><span class="built_in">sudo</span> apt purge nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理孤立依赖</span></span><br><span class="line"><span class="built_in">sudo</span> apt autoremove</span><br></pre></td></tr></table></figure>

<h2 id="Fedora-RHEL"><a href="#Fedora-RHEL" class="headerlink" title="Fedora&#x2F;RHEL"></a>Fedora&#x2F;RHEL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dnf install httpd</span><br><span class="line"><span class="built_in">sudo</span> dnf remove httpd</span><br><span class="line"><span class="built_in">sudo</span> dnf autoremove</span><br></pre></td></tr></table></figure>

<h2 id="Arch"><a href="#Arch" class="headerlink" title="Arch"></a>Arch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -Syu</span><br><span class="line"><span class="built_in">sudo</span> pacman -S package</span><br><span class="line"><span class="built_in">sudo</span> pacman -Rns package   <span class="comment"># 删除并移除未被其它包依赖的文件</span></span><br></pre></td></tr></table></figure>

<h2 id="Flatpak-Snap-AppImage"><a href="#Flatpak-Snap-AppImage" class="headerlink" title="Flatpak &#x2F; Snap &#x2F; AppImage"></a>Flatpak &#x2F; Snap &#x2F; AppImage</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flatpak</span></span><br><span class="line">flatpak install flathub com.spotify.Client</span><br><span class="line">flatpak update</span><br><span class="line">flatpak uninstall com.spotify.Client</span><br><span class="line"></span><br><span class="line"><span class="comment"># Snap</span></span><br><span class="line"><span class="built_in">sudo</span> snap install vlc</span><br><span class="line"><span class="built_in">sudo</span> snap remove vlc</span><br><span class="line"></span><br><span class="line"><span class="comment"># AppImage (运行)</span></span><br><span class="line"><span class="built_in">chmod</span> +x SomeApp.AppImage</span><br><span class="line">./SomeApp.AppImage</span><br></pre></td></tr></table></figure>

<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># winget</span></span><br><span class="line">winget search <span class="number">7</span>zip</span><br><span class="line">winget install <span class="literal">--id</span>=<span class="number">7</span>zip.<span class="number">7</span>zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># MSI (卸载)</span></span><br><span class="line">msiexec /x &#123;PRODUCT<span class="literal">-CODE-GUID</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Homebrew</span></span><br><span class="line">brew install wget</span><br><span class="line">brew uninstall wget</span><br><span class="line"></span><br><span class="line"><span class="comment"># DMG: 挂载并复制到 /Applications（GUI常用）</span></span><br><span class="line">hdiutil attach MyApp.dmg</span><br><span class="line"><span class="comment"># 手动拖放或通过命令复制 .app 到 /Applications</span></span><br></pre></td></tr></table></figure>

<h2 id="Nix"><a href="#Nix" class="headerlink" title="Nix"></a>Nix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nix-env -iA nixpkgs.hello</span><br><span class="line">nix-env -e hello</span><br><span class="line"><span class="comment"># NixOS: system configuration + nixos-rebuild switch</span></span><br></pre></td></tr></table></figure>


<h1 id="八、常见问题-陷阱与注意事项"><a href="#八、常见问题-陷阱与注意事项" class="headerlink" title="八、常见问题 &#x2F; 陷阱与注意事项"></a>八、常见问题 &#x2F; 陷阱与注意事项</h1><ul>
<li><strong>不要直接用 <code>make install</code> 管理系统包</strong>：除非包被打包成 <code>.deb</code>&#x2F;<code>.rpm</code>，否则卸载困难；推荐使用 checkinstall 或创建本地包。</li>
<li><strong>注意 glibc &#x2F; libc 兼容性</strong>：AppImage 可自包含，flatpak&#x2F;runtime 设计尽量避免 glibc 兼容问题；但编译针对特定发行版时仍需留意。</li>
<li><strong>图形集成问题</strong>：Flatpak 应用需要正确声明文件访问与桌面集成权限（<code>--filesystem=home</code> 等）。</li>
<li><strong>自动更新的权衡</strong>：snap 的自动更新便捷但可能影响部署可控性；服务器环境通常禁用自动更新，使用受控更新策略。</li>
<li><strong>驱动&#x2F;内核模块</strong>：需要特权安装并签名（Linux DKMS，Windows WHQL，macOS kext notarize&#x2F;approval）。</li>
</ul>
<h1 id="九、简明对比表"><a href="#九、简明对比表" class="headerlink" title="九、简明对比表"></a>九、简明对比表</h1><ul>
<li><strong>桌面友好 &#x2F; 用户易用性</strong>：macOS App Store ≈ Windows Store &gt; DMG&#x2F;MSI installers &gt; Flatpak&#x2F;Snap &gt; AppImage &gt; Native distro packages（普通用户）</li>
<li><strong>跨发行版可移植性</strong>：AppImage ≈ Flatpak &gt; Snap &gt; Native packages</li>
<li><strong>系统集成 &amp; 可管理性（企业&#x2F;服务器）</strong>：Native packages (<code>.deb</code>&#x2F;<code>.rpm</code>) &gt; MSI&#x2F;MSIX &gt; Containers（Docker）</li>
<li><strong>安全&#x2F;隔离</strong>：Nix&#x2F;Guix &#x2F; rpm-ostree（系统不可变） ≈ Flatpak&#x2F;Snap（应用级沙箱） &gt; Native packages（依赖主机安全）</li>
<li><strong>回滚</strong>：Nix&#x2F;Guix&#x2F;rpm-ostree &gt; MSI（有限事务性） &gt; 普通包管理器（需快照）</li>
</ul>
<h1 id="十、结论与建议"><a href="#十、结论与建议" class="headerlink" title="十、结论与建议"></a>十、结论与建议</h1><ul>
<li><strong>作为 Linux 桌面用户 &#x2F; 开发者</strong>：优先支持 <strong>Flatpak（Flathub）</strong> 来覆盖最多发行版；提供 AppImage 作为轻量下载；对关键发行版再做 <code>.deb</code>&#x2F;<code>.rpm</code>。</li>
<li><strong>作为 Linux 服务器&#x2F;运维</strong>：使用发行版原生包或容器镜像；若需要可重现&#x2F;回滚，评估 <strong>NixOS &#x2F; Guix &#x2F; rpm-ostree</strong> 或磁盘层快照策略。</li>
<li><strong>如果你维护跨平台应用</strong>：在 CI 中自动生成目标平台（MSI&#x2F;EXE + dmg + flatpak + snap + appimage + deb&#x2F;rpm）并对每种包做签名与自动发布。</li>
</ul>
<hr>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><blockquote>
<p>Different versions of Linux distributions use different package managers, such as <strong>deb</strong> (led by Debian), <strong>RPM</strong> (RedHat’s format), <strong>Snap</strong>, <strong>Flatpak</strong>, some Arch-based tools, and <strong>AppImage</strong>. These varied formats mean the same software must be packaged multiple times. Therefore, I want to research in detail how they differ and how a piece of software is installed and used within a Linux system.</p>
</blockquote>
<hr>
<h1 id="Executive-Summary"><a href="#Executive-Summary" class="headerlink" title="Executive Summary"></a>Executive Summary</h1><p>Various Linux distributions use different package formats and managers (e.g., Debian&#x2F;Ubuntu use <code>.deb</code> + <code>dpkg/apt</code>; Fedora&#x2F;RHEL use <code>rpm</code> + <code>dnf</code>&#x2F;<code>yum</code>; Arch uses <code>pacman</code>; Alpine uses <code>apk</code>; Gentoo uses Portage; SUSE uses <code>zypper</code>, etc.). These traditional package managers handle system-level software installation, dependency resolution, and upgrades. Recently, “cross-distribution” packaging solutions (<strong>Flatpak</strong>, <strong>Snap</strong>, <strong>AppImage</strong>) and “functional&#x2F;transactional” managers (<strong>Nix</strong>, <strong>Guix</strong>, <strong>rpm-ostree</strong>) have emerged, offering portability, sandboxing, security, or rollback features. However, each comes with trade-offs in resource consumption, maintenance, and ecosystem. Below, I will provide a detailed evaluation and specific recommendations for desktop users, servers, distribution maintainers, and application developers. (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</p>
<hr>
<h1 id="1-Common-“Traditional”-Package-Formats-and-Managers-by-Distribution-Family"><a href="#1-Common-“Traditional”-Package-Formats-and-Managers-by-Distribution-Family" class="headerlink" title="1. Common “Traditional” Package Formats and Managers (by Distribution&#x2F;Family)"></a>1. Common “Traditional” Package Formats and Managers (by Distribution&#x2F;Family)</h1><h3 id="Debian-Ubuntu-deb-dpkg-apt-1"><a href="#Debian-Ubuntu-deb-dpkg-apt-1" class="headerlink" title="Debian &#x2F; Ubuntu: .deb (+ dpkg &#x2F; apt)"></a>Debian &#x2F; Ubuntu: <code>.deb</code> (+ <code>dpkg</code> &#x2F; <code>apt</code>)</h3><p><strong>Description</strong>: <code>.deb</code> is the binary package format for Debian systems. <code>dpkg</code> is the low-level tool, and <code>apt</code> (<code>apt-get</code> &#x2F; <code>apt</code>) is the higher-level front-end for dependency resolution and repository management. It is suitable for system-level installation and dependency management. Refer to official Debian &#x2F; Ubuntu documentation. (<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/dpkg.1.html?utm_source=cherises.github.io" title="dpkg(1) - Linux manual page">man7.org</a>)</p>
<p><strong>Pros</strong>: Mature, rich repositories (Debian&#x2F;Ubuntu have a large software selection), complete toolchain and ecosystem (automatic dependencies, signing, mirror network). <strong>Cons</strong>: Packages must be built specifically for each distribution&#x2F;version; ABI differences among Debian families can still lead to compatibility issues. (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</p>
<h3 id="RPM-Family-rpm-dnf-yum-zypper-Fedora-RHEL-CentOS-openSUSE"><a href="#RPM-Family-rpm-dnf-yum-zypper-Fedora-RHEL-CentOS-openSUSE" class="headerlink" title="RPM Family: rpm + dnf&#x2F;yum&#x2F;zypper (Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE)"></a>RPM Family: <code>rpm</code> + <code>dnf</code>&#x2F;<code>yum</code>&#x2F;<code>zypper</code> (Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE)</h3><p><strong>Description</strong>: <code>rpm</code> is the package format. <code>dnf</code> (modern) &#x2F; <code>yum</code> (legacy) are the package management front-ends for RHEL&#x2F;Fedora; openSUSE commonly uses <code>zypper</code> (based on libzypp). Newer RHEL versions use <code>yum</code> as a compatibility front-end for <code>dnf</code>. (<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</p>
<p><strong>Pros</strong>: Enterprise-grade ecosystem (RHEL&#x2F;Fedora&#x2F;SUSE), powerful repository management and modularity support (RHEL 8+), <code>zypper</code> is stable in enterprise scenarios. <strong>Cons</strong>: Like <code>.deb</code>, requires specific building for target distributions; the historical migration from <code>yum</code> to <code>dnf</code> involved a learning curve. (<a target="_blank" rel="noopener" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/software-management_considerations-in-adopting-rhel-8?utm_source=cherises.github.io" title="Chapter 7. Software management">docs.redhat.com</a>)</p>
<h3 id="Arch-pacman-2"><a href="#Arch-pacman-2" class="headerlink" title="Arch: pacman"></a>Arch: <code>pacman</code></h3><p><strong>Description</strong>: A lightweight, rolling-release distribution manager. <code>pacman</code> manages binary packages and is complemented by the AUR (Arch User Repository, a user-maintained source). Suitable for users who prioritize the latest software and deep customization. (<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Pacman?utm_source=cherises.github.io" title="pacman - ArchWiki">ArchWiki</a>)</p>
<p><strong>Pros</strong>: Simple, fast, excellent rolling-release experience; AUR offers a vast array of user-submitted packages. <strong>Cons</strong>: Maintainers&#x2F;users must pay closer attention to compatibility and update risks (rolling-release risk). (<a target="_blank" rel="noopener" href="https://pacman.archlinux.page/?utm_source=cherises.github.io" title="Pacman Home Page">pacman.archlinux.page</a>)</p>
<h3 id="Alpine-apk-Alpine-Package-Keeper"><a href="#Alpine-apk-Alpine-Package-Keeper" class="headerlink" title="Alpine: apk (Alpine Package Keeper)"></a>Alpine: <code>apk</code> (Alpine Package Keeper)</h3><p><strong>Description</strong>: A package manager focused on lightweight and container scenarios. Small package size, simple design, often used for container images. (<a target="_blank" rel="noopener" href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html?utm_source=cherises.github.io" title="Working with the Alpine Package Keeper (apk)">docs.alpinelinux.org</a>)</p>
<p><strong>Pros</strong>: Small image size, low runtime overhead, facilitates building lightweight container images. <strong>Cons</strong>: Relatively small package ecosystem; some common applications require porting or compilation. (<a target="_blank" rel="noopener" href="https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package?utm_source=cherises.github.io" title="Creating an Alpine package">wiki.alpinelinux.org</a>)</p>
<h3 id="Gentoo-Portage-emerge-1"><a href="#Gentoo-Portage-emerge-1" class="headerlink" title="Gentoo: Portage (emerge)"></a>Gentoo: Portage (<code>emerge</code>)</h3><p><strong>Description</strong>: A source-code compilation package manager, using <code>ebuild</code> scripts and USE flags. Offers extremely high customizability and optimization potential, suitable for users who need source optimization and fine control. (<a target="_blank" rel="noopener" href="https://dev.gentoo.org/~zmedico/portage/doc/portage.html?utm_source=cherises.github.io" title="Portage Documentation">dev.gentoo.org</a>)</p>
<p><strong>Pros</strong>: Flexible layering, highly customizable, allows compilation options to be optimized for specific hardware&#x2F;use cases. <strong>Cons</strong>: Long compilation times, unfriendly to beginners, high maintenance costs. (<a target="_blank" rel="noopener" href="https://www.linode.com/docs/guides/portage-package-manager/?utm_source=cherises.github.io" title="How to Use Portage to Manage Packages in Gentoo - Linode">Akamai</a>)</p>
<hr>
<h1 id="2-“Cross-Distribution-Desktop-Oriented-Portable”-Packaging-Formats-Flatpak-Snap-AppImage"><a href="#2-“Cross-Distribution-Desktop-Oriented-Portable”-Packaging-Formats-Flatpak-Snap-AppImage" class="headerlink" title="2. “Cross-Distribution &#x2F; Desktop-Oriented &#x2F; Portable” Packaging Formats (Flatpak &#x2F; Snap &#x2F; AppImage)"></a>2. “Cross-Distribution &#x2F; Desktop-Oriented &#x2F; Portable” Packaging Formats (Flatpak &#x2F; Snap &#x2F; AppImage)</h1><p>These solutions aim to “package a desktop application once and run it on most distributions,” but they differ in implementation and trade-offs.</p>
<h3 id="Flatpak-Desktop-Sandbox-OSTree-Backend"><a href="#Flatpak-Desktop-Sandbox-OSTree-Backend" class="headerlink" title="Flatpak (Desktop Sandbox + OSTree Backend)"></a>Flatpak (Desktop Sandbox + OSTree Backend)</h3><p><strong>Principle</strong>: Applications are stored as <strong>runtimes</strong> + application content. It uses <strong>OSTree</strong> for version management (similar to Git’s file system objects), and sandboxing is typically provided by <code>bubblewrap</code>. Suitable for desktop graphical applications; <strong>Flathub</strong> is the main remote repository. <strong>Pros</strong> include cross-distribution support, permission isolation (declarative permissions), and reduced duplicate dependencies via runtimes. <strong>Cons</strong> include potential disk usage (runtime duplication) and the need to manage permissions and integration details. (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</p>
<h3 id="Snap-Canonical-Product"><a href="#Snap-Canonical-Product" class="headerlink" title="Snap (Canonical Product)"></a>Snap (Canonical Product)</h3><p><strong>Principle</strong>: Snap packages the application and its dependencies into a “snap.” It uses <code>snapd</code> to run on the system and employs three types of confinement (strict&#x2F;classic&#x2F;dev, based on AppArmor for sandboxing). Canonical provides the <strong>Snap Store</strong>. <strong>Pros</strong> are unified updates (<code>snapd</code> manages automatic updates) and cross-distribution delivery. <strong>Cons</strong> include potential disk&#x2F;startup speed issues and controversy in some communities regarding centralization (Canonical Store) and integration (e.g., desktop integration experience). (<a target="_blank" rel="noopener" href="https://snapcraft.io/docs/snap-confinement?utm_source=cherises.github.io" title="Snap confinement | Snapcraft documentation">Snapcraft</a>)</p>
<h3 id="AppImage-Single-File-Executable"><a href="#AppImage-Single-File-Executable" class="headerlink" title="AppImage (Single-File Executable)"></a>AppImage (Single-File Executable)</h3><p><strong>Principle</strong>: Packages the application and necessary libraries into a single executable file. Users run it directly or mount it (internally via FUSE or unpacking). <strong>Pros</strong> are extreme portability (“run in one file”) and no need for root installation. <strong>Cons</strong> include a lack of unified update&#x2F;rollback mechanisms, lack of system-level dependency management, and no built-in sandboxing (requires additional tools for isolation), with less automated support for security and integration. (<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</p>
<hr>
<h1 id="3-“Functional-Transactional-Atomic-Update”-Managers-Nix-Guix-rpm-ostree-etc"><a href="#3-“Functional-Transactional-Atomic-Update”-Managers-Nix-Guix-rpm-ostree-etc" class="headerlink" title="3. “Functional &#x2F; Transactional &#x2F; Atomic Update” Managers (Nix &#x2F; Guix &#x2F; rpm-ostree, etc.)"></a>3. “Functional &#x2F; Transactional &#x2F; Atomic Update” Managers (Nix &#x2F; Guix &#x2F; rpm-ostree, etc.)</h1><p>These solutions focus on rollback capability, reproducible builds, atomic updates, or immutable system images.</p>
<h3 id="Nix-Purely-Functional-Package-Management"><a href="#Nix-Purely-Functional-Package-Management" class="headerlink" title="Nix (Purely Functional Package Management)"></a>Nix (Purely Functional Package Management)</h3><p><strong>Description</strong>: Nix uses “purely functional” build descriptions. Packages are installed into isolated, content-addressed paths in the <code>/nix/store</code>, supporting binary caching, precise dependencies, and atomic rollback. Highly suitable for scenarios requiring reproducible builds and the co-existence of different versions, but it has a steep learning curve and integrates differently with traditional distributions. (<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</p>
<h3 id="Guix-Similar-to-Nix-but-uses-GNU-Scheme"><a href="#Guix-Similar-to-Nix-but-uses-GNU-Scheme" class="headerlink" title="Guix (Similar to Nix, but uses GNU Scheme)"></a>Guix (Similar to Nix, but uses GNU Scheme)</h3><p><strong>Description</strong>: Guix is also a functional package manager, emphasizing free software principles and using Scheme as its description language. Functionality is similar to Nix (reproducible, transactional, rollback), suitable for scenarios requiring strict reproducibility. (<a target="_blank" rel="noopener" href="https://guix.gnu.org/manual/?utm_source=cherises.github.io" title="GNU Guix Reference Manual">guix.gnu.org</a>)</p>
<h3 id="rpm-ostree-Hybrid-Image-Package-System-used-for-Silverblue-and-other-immutable-desktops"><a href="#rpm-ostree-Hybrid-Image-Package-System-used-for-Silverblue-and-other-immutable-desktops" class="headerlink" title="rpm-ostree (Hybrid Image&#x2F;Package System; used for Silverblue and other immutable desktops)"></a>rpm-ostree (Hybrid Image&#x2F;Package System; used for Silverblue and other immutable desktops)</h3><p><strong>Description</strong>: Treats the operating system as an <strong>OSTree</strong> image. <code>rpm-ostree</code> provides the ability to “layer” RPMs onto the base image. Updates are atomic (a reboot switches to the new image). Suitable for immutable desktops or scenarios with strong requirements for system consistency. (<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</p>
<hr>
<h1 id="4-Comparison-Matrix-Key-Dimensions-Compatibility-Sandboxing-Atomic-Updates-Portability-Maintenance-Cost-Recommended-Scenarios"><a href="#4-Comparison-Matrix-Key-Dimensions-Compatibility-Sandboxing-Atomic-Updates-Portability-Maintenance-Cost-Recommended-Scenarios" class="headerlink" title="4. Comparison Matrix (Key Dimensions: Compatibility &#x2F; Sandboxing &#x2F; Atomic Updates &#x2F; Portability &#x2F; Maintenance Cost &#x2F; Recommended Scenarios)"></a>4. Comparison Matrix (Key Dimensions: Compatibility &#x2F; Sandboxing &#x2F; Atomic Updates &#x2F; Portability &#x2F; Maintenance Cost &#x2F; Recommended Scenarios)</h1><blockquote>
<p>Simplified matrix (text-based) for quick comparison</p>
</blockquote>
<ul>
<li><p><strong>Compatibility (Cross-Distro)</strong></p>
<ul>
<li><code>.deb</code>, <code>.rpm</code>, <code>pacman</code>: Limited to their respective distribution families (require separate packaging). (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</li>
<li>Flatpak &#x2F; Snap &#x2F; AppImage: Highly cross-distribution (desktop-first). (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>Nix &#x2F; Guix: The Nix&#x2F;Guix manager can be installed on multiple distributions, and the software environment is managed by the store, offering good compatibility but using a different model with a learning cost. (<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
</ul>
</li>
<li><p><strong>Isolation&#x2F;Security</strong></p>
<ul>
<li>Flatpak &#x2F; Snap: Built-in sandboxing&#x2F;interface declaration (Flatpak uses bubblewrap, Snap relies on AppArmor, etc.). (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>AppImage: No sandboxing by default (requires external tools), more like a “portable binary.” (<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li>Traditional Packages: No extra isolation (depends on system security policies like SELinux&#x2F;AppArmor). (<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/dpkg.1.html?utm_source=cherises.github.io" title="dpkg(1) - Linux manual page">man7.org</a>)</li>
</ul>
</li>
<li><p><strong>Atomic Updates &#x2F; Rollback</strong></p>
<ul>
<li>rpm-ostree, Nix, Guix offer strong rollback&#x2F;transactional capabilities. Flatpak supports rollback at the application level (via runtimes&#x2F;OSTree), but traditional system package management does not typically provide atomic system-wide rollback. (<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</li>
</ul>
</li>
<li><p><strong>Disk&#x2F;Download Overhead</strong></p>
<ul>
<li>AppImage (single file), Flatpak (runtimes can be shared), and Snap (each snap contains its dependencies) differ in disk usage: Flatpak reduces duplication through runtimes, while Snap often takes up more space (though implementation details vary by application). (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
</ul>
</li>
<li><p><strong>Maintenance&#x2F;Packaging Cost (for upstream projects)</strong></p>
<ul>
<li>Building <code>.deb</code> &#x2F; <code>.rpm</code>: Requires separate packaging for multiple distributions&#x2F;versions (high maintenance). (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</li>
<li>Providing Flatpak &#x2F; Snap &#x2F; AppImage: Can cover more desktop distributions, reducing the burden of multiple packaging efforts, but requires learning the corresponding toolchains (flatpak-builder &#x2F; snapcraft &#x2F; appimagetool) and handling sandbox permissions&#x2F;integration issues. (<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/snapcraft/?utm_source=cherises.github.io" title="Snapcraft 8.12.1 documentation">documentation.ubuntu.com</a>)</li>
</ul>
</li>
</ul>
<hr>
<h1 id="5-Practical-Advice-Decision-Tree-and-Best-Practices-for-Different-Roles"><a href="#5-Practical-Advice-Decision-Tree-and-Best-Practices-for-Different-Roles" class="headerlink" title="5. Practical Advice (Decision Tree and Best Practices for Different Roles)"></a>5. Practical Advice (Decision Tree and Best Practices for Different Roles)</h1><h3 id="If-you-are-a-Desktop-Application-Developer-aiming-to-cover-most-Linux-desktop-users"><a href="#If-you-are-a-Desktop-Application-Developer-aiming-to-cover-most-Linux-desktop-users" class="headerlink" title="If you are a Desktop Application Developer (aiming to cover most Linux desktop users)"></a>If you are a <strong>Desktop Application Developer</strong> (aiming to cover most Linux desktop users)</h3><ul>
<li><strong>Primary Choice</strong>: <strong>Flatpak (Upload to Flathub)</strong> or <strong>AppImage</strong>: Flatpak offers better permission declaration and automatic updates, and Flathub has significant user traffic. AppImage is suitable for extreme portability and scenarios where you don’t want to rely on a central repository. If you accept the Canonical ecosystem and the Snap Store, you can also publish a Snap. (<a target="_blank" rel="noopener" href="https://docs.flathub.org/blog/app-safety-layered-approach-source-to-user?utm_source=cherises.github.io" title="Flathub Safety: A Layered Approach from Source to User">docs.flathub.org</a>)</li>
<li><strong>Concurrent Strategy</strong>: Publish one official “universal package” (Flatpak, Snap, or AppImage) + provide <code>.deb</code> &#x2F; <code>.rpm</code> packages for major distributions (Debian&#x2F;Ubuntu, Fedora) (which can be automated via CI). This offers broad coverage while maintaining system integration. (<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/server/how-to/software/package-management/?utm_source=cherises.github.io" title="Install and manage packages - Ubuntu Server">documentation.ubuntu.com</a>)</li>
</ul>
<h3 id="If-you-are-Server-Software-Operations-stability-performance-and-auditability-prioritized"><a href="#If-you-are-Server-Software-Operations-stability-performance-and-auditability-prioritized" class="headerlink" title="If you are Server Software &#x2F; Operations (stability, performance, and auditability prioritized)"></a>If you are <strong>Server Software &#x2F; Operations</strong> (stability, performance, and auditability prioritized)</h3><ul>
<li>Still primarily use distribution native packages (<code>.deb</code>&#x2F;<code>.rpm</code>) or containerization (Docker&#x2F;OCI images). For critical production systems, use distribution packages or container images to receive security patches and long-term support. For environments requiring rollback and reproducible deployment, you can evaluate <strong>Nix</strong> or <strong>Guix</strong>. (<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
</ul>
<h3 id="If-you-are-a-Distribution-Maintainer-Packager"><a href="#If-you-are-a-Distribution-Maintainer-Packager" class="headerlink" title="If you are a Distribution Maintainer &#x2F; Packager"></a>If you are a <strong>Distribution Maintainer &#x2F; Packager</strong></h3><ul>
<li>Continue maintaining the native packages for your family (<code>.deb</code>&#x2F;<code>.rpm</code>&#x2F;<code>pacman</code>, etc.) to ensure system consistency. Simultaneously, consider maintaining Flatpak packages for desktop applications to reduce upstream duplication. For those pursuing an “Immutable OS” route (like Fedora Silverblue), the <code>rpm-ostree</code> model can be adopted. (<a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora/f40/system-administrators-guide/package-management/rpm-ostree/?utm_source=cherises.github.io" title="rpm-ostree - Fedora Docs">docs.fedoraproject.org</a>)</li>
</ul>
<hr>
<h1 id="6-Common-Misconceptions-and-Real-World-Pitfalls-Reminders-for-Developers-Administrators"><a href="#6-Common-Misconceptions-and-Real-World-Pitfalls-Reminders-for-Developers-Administrators" class="headerlink" title="6. Common Misconceptions and Real-World Pitfalls (Reminders for Developers&#x2F;Administrators)"></a>6. Common Misconceptions and Real-World Pitfalls (Reminders for Developers&#x2F;Administrators)</h1><ol>
<li><strong>“Just building a Flatpak is enough”</strong>: Flatpak is excellent for the desktop, but it’s not a substitute for system services&#x2F;daemons (some background services should still use system packages or containers). Also, desktop integration (theming, file handling) may require extra work. (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li><strong>“AppImage is secure”</strong>: AppImage itself does not provide mandatory sandboxing; runtime permissions must be controlled by the developer&#x2F;user externally. If security isolation is a concern, prioritize Flatpak&#x2F;Snap (and restrict permissions according to best practices). (<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li><strong>“Nix&#x2F;Guix is too complicated to bother with”</strong>: The learning curve is steep, but the return on investment is substantial in cases where reproducible builds, parallel co-existence of different versions, or strict CI&#x2F;CD requirements are necessary. (<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
</ol>
<hr>
<h1 id="7-Recommended-Actionable-Release-Process-for-Upstream-Publishers-Minimal-disruption-maximum-user-coverage"><a href="#7-Recommended-Actionable-Release-Process-for-Upstream-Publishers-Minimal-disruption-maximum-user-coverage" class="headerlink" title="7. Recommended Actionable Release Process for Upstream Publishers (Minimal disruption, maximum user coverage)"></a>7. Recommended <strong>Actionable Release Process</strong> for Upstream Publishers (Minimal disruption, maximum user coverage)</h1><ol>
<li><p>Configure automatic building in your CI (GitHub Actions &#x2F; GitLab CI):</p>
<ul>
<li>Build <strong>.deb</strong> (for Debian&#x2F;Ubuntu LTS targets) and <strong>.rpm</strong> (for Fedora &#x2F; CentOS &#x2F; RHEL targets). (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch02.en.html?utm_source=cherises.github.io" title="Chapter 2. Debian package management">debian.org</a>)</li>
<li>Simultaneously build with <code>flatpak-builder</code> and push to <strong>Flathub</strong> (or the project’s own remote) when ready. (<a target="_blank" rel="noopener" href="https://documentation.ubuntu.com/snapcraft/?utm_source=cherises.github.io" title="Snapcraft 8.12.1 documentation">documentation.ubuntu.com</a>)</li>
<li><strong>Optional</strong>: Generate an <strong>AppImage</strong> (for easy single-file download) and a <strong>Snap</strong> (if you want to be in Canonical’s ecosystem). (<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
</ul>
</li>
<li><p><strong>Automate Signing and Publishing</strong>: Digitally sign your release packages and Flatpaks to allow users to verify the source. Flatpak&#x2F;OSTree supports its own signing mechanism; traditional repositories use GPG signing. (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</p>
</li>
<li><p>Provide documentation for various installation methods (installation instructions, permission requirements, sandbox declarations, desktop integration notes), and clearly state the recommended method in the README (e.g., “For desktop users, please prioritize Flatpak&#x2F;Flathub; for servers, please use Docker&#x2F;Native package”). (<a target="_blank" rel="noopener" href="https://docs.flathub.org/blog/app-safety-layered-approach-source-to-user?utm_source=cherises.github.io" title="Flathub Safety: A Layered Approach from Source to User">docs.flathub.org</a>)</p>
</li>
</ol>
<hr>
<h1 id="8-Conclusion-One-Sentence-Summary-Recommendations"><a href="#8-Conclusion-One-Sentence-Summary-Recommendations" class="headerlink" title="8. Conclusion (One-Sentence Summary + Recommendations)"></a>8. Conclusion (One-Sentence Summary + Recommendations)</h1><ul>
<li><strong>For desktop applications, prioritize Flatpak (Flathub) or provide AppImage concurrently, then supplement with <code>.deb</code>&#x2F;<code>.rpm</code> based on user demand.</strong> This is the balanced solution for portability and user experience. (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li><strong>For servers and production environments, still rely on distribution native packages or containers.</strong> When high availability&#x2F;auditability&#x2F;security control is needed, strongly consider solutions like <strong>Nix&#x2F;Guix</strong> or <strong>rpm-ostree</strong> that offer rollback&#x2F;atomic updates (depending on your operations philosophy). (<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
</ul>
<hr>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li>Debian packaging &#x2F; APT &#x2F; dpkg documentation. (<a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-faq/pkgtools.en.html?utm_source=cherises.github.io" title="Chapter 8. The Debian package management tools">debian.org</a>)</li>
<li>Red Hat &#x2F; DNF documentation (DNF is the successor to YUM). (<a target="_blank" rel="noopener" href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/9/html-single/managing_software_with_the_dnf_tool/index?utm_source=cherises.github.io" title="Managing software with the DNF tool">docs.redhat.com</a>)</li>
<li>ArchWiki — Pacman. (<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Pacman?utm_source=cherises.github.io" title="pacman - ArchWiki">ArchWiki</a>)</li>
<li>Alpine <code>apk</code> documentation and Wiki. (<a target="_blank" rel="noopener" href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html?utm_source=cherises.github.io" title="Working with the Alpine Package Keeper (apk)">docs.alpinelinux.org</a>)</li>
<li>Flatpak documentation (under-the-hood, runtimes, bubblewrap) and Flathub security notes. (<a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/under-the-hood.html?utm_source=cherises.github.io" title="Under the Hood - Flatpak documentation">Flatpak</a>)</li>
<li>Snap &#x2F; Snapcraft documentation (confinement &#x2F; security policy). (<a target="_blank" rel="noopener" href="https://snapcraft.io/docs/snap-confinement?utm_source=cherises.github.io" title="Snap confinement | Snapcraft documentation">Snapcraft</a>)</li>
<li>AppImage official site and documentation. (<a target="_blank" rel="noopener" href="https://appimage.org/?utm_source=cherises.github.io" title="AppImage | Linux apps that run anywhere">appimage.org</a>)</li>
<li>Nix &#x2F; NixOS Manual (purely functional package management). (<a target="_blank" rel="noopener" href="https://nix.dev/manual/nix/2.24/?utm_source=cherises.github.io" title="Introduction - Nix Reference Manual">nix.dev</a>)</li>
<li>GNU Guix manual. (<a target="_blank" rel="noopener" href="https://guix.gnu.org/manual/?utm_source=cherises.github.io" title="GNU Guix Reference Manual">guix.gnu.org</a>)</li>
<li>Portage (Gentoo) documentation, Zypper (openSUSE), rpm-ostree (Fedora Silverblue) documentation. (<a target="_blank" rel="noopener" href="https://dev.gentoo.org/~zmedico/portage/doc/portage.html?utm_source=cherises.github.io" title="Portage Documentation">dev.gentoo.org</a>)</li>
</ul>
<hr>
<h1 id="Linux-Windows-macOS-—-Software-Installation-Full-Life-Cycle-Comparison-Report"><a href="#Linux-Windows-macOS-—-Software-Installation-Full-Life-Cycle-Comparison-Report" class="headerlink" title="Linux &#x2F; Windows &#x2F; macOS — Software Installation Full Life Cycle Comparison Report"></a>Linux &#x2F; Windows &#x2F; macOS — Software Installation Full Life Cycle Comparison Report</h1><p>Below is a structured, actionable comparison report covering the full life cycle—from <strong>Discovery → Installation → Execution → Upgrade → Uninstallation → Rollback&#x2F;Cleanup</strong>—highlighting key differences and practical advice for the three major operating systems (and common Linux distribution families) in terms of process, technical implementation, permissions, security, operations, and the developer’s perspective.</p>
<hr>
<h1 id="Executive-Summary-Key-Points"><a href="#Executive-Summary-Key-Points" class="headerlink" title="Executive Summary (Key Points)"></a>Executive Summary (Key Points)</h1><ul>
<li><strong>Windows &#x2F; macOS</strong> desktop application distribution is more centralized (Installer + App Store &#x2F; Notarized apps), with the user experience leaning toward “single file&#x2F;visual installer.”</li>
<li>The <strong>Linux</strong> ecosystem is fragmented: it includes traditional <em>distribution native package managers</em> (<code>.deb</code>&#x2F;<code>.rpm</code>&#x2F;<code>pacman</code>&#x2F;<code>apk</code>, etc.), <strong>cross-distribution packaging</strong> (<strong>Flatpak</strong> &#x2F; <strong>Snap</strong> &#x2F; <strong>AppImage</strong>), and <strong>functional&#x2F;immutable</strong> solutions (<strong>Nix</strong> &#x2F; <strong>Guix</strong> &#x2F; <strong>rpm-ostree</strong>).</li>
<li>Every step of the life cycle differs significantly in implementation details (e.g., dependency resolution, permissions, file locations, service registration, rollback strategy), which impacts developer packaging strategy and operational choices.</li>
</ul>
<hr>
<h1 id="I-The-Generic-Software-Installation-Life-Cycle-Stages-High-level-steps-present-on-any-platform"><a href="#I-The-Generic-Software-Installation-Life-Cycle-Stages-High-level-steps-present-on-any-platform" class="headerlink" title="I. The Generic Software Installation Life Cycle Stages (High-level steps present on any platform)"></a>I. The <strong>Generic Software Installation Life Cycle Stages</strong> (High-level steps present on any platform)</h1><ol>
<li><strong>Discovery</strong>: User&#x2F;automation tool finds the software (repositories, stores, official websites, package manager indexes, container registries).</li>
<li><strong>Acquisition&#x2F;Download</strong>: Downloading the binary&#x2F;source code&#x2F;image from the repository, store, or official website.</li>
<li><strong>Verification</strong>: Digital signature, certificate, hash checking, store review, or sandboxing policy checks.</li>
<li><strong>Unpacking&#x2F;Installation</strong>: Placing files in the appropriate location, updating indexes&#x2F;caches, executing installation scripts, registering services or desktop entries.</li>
<li><strong>Configuration</strong>: Generating&#x2F;preserving configuration files (global <code>/etc</code> &#x2F; Windows Registry &#x2F; macOS <code>~/Library</code>), setting permissions.</li>
<li><strong>Integration</strong>: Registering in desktop menus, launchers, system services, and file associations.</li>
<li><strong>Execution</strong>: Loading the binary (ELF &#x2F; PE &#x2F; Mach-O), dynamic link library resolution, permission checks, sandboxing&#x2F;container constraints.</li>
<li><strong>Upgrade&#x2F;Patching</strong>: Obtaining and applying updates (incremental or full replacement) via the package manager&#x2F;store&#x2F;built-in update mechanism.</li>
<li><strong>Uninstallation&#x2F;Cleanup</strong>: Removing program files, handling dependencies&#x2F;residual configurations, and performing a rollback (if supported).</li>
<li><strong>Audit&#x2F;Rollback</strong> (Optional): Viewing change logs, restoring to a previous version (if the package manager or system supports atomic rollback).</li>
</ol>
<p>Below, we detail the implementation and differences for each platform and common Linux distribution family.</p>
<hr>
<h1 id="II-Linux-Distributed-Ecosystem-—-Detailed-Process-and-Differences"><a href="#II-Linux-Distributed-Ecosystem-—-Detailed-Process-and-Differences" class="headerlink" title="II. Linux (Distributed Ecosystem) — Detailed Process and Differences"></a>II. Linux (Distributed Ecosystem) — Detailed Process and Differences</h1><h2 id="2-1-Two-“Main-Paradigms”"><a href="#2-1-Two-“Main-Paradigms”" class="headerlink" title="2.1 Two “Main Paradigms”"></a>2.1 Two “Main Paradigms”</h2><p>A. <strong>Distribution Native Package Managers (System Packages)</strong>: e.g., Debian&#x2F;Ubuntu (<code>.deb</code>, <code>apt</code>&#x2F;<code>dpkg</code>), RHEL&#x2F;Fedora (<code>.rpm</code>, <code>dnf</code>&#x2F;<code>rpm</code>), Arch (<code>pacman</code>), Alpine (<code>apk</code>), Gentoo (<code>Portage/emerge</code>).<br>B. <strong>Cross-Distribution &#x2F; Desktop-First or Portable Solutions</strong>: Flatpak, Snap, AppImage.<br>Additionally, there are <strong>Functional Package Management&#x2F;Immutable Systems</strong>: Nix, Guix, rpm-ostree (Silverblue, etc.).</p>
<h2 id="2-2-From-Acquisition-to-Installation-Examples-and-Key-Implementation-Points"><a href="#2-2-From-Acquisition-to-Installation-Examples-and-Key-Implementation-Points" class="headerlink" title="2.2 From Acquisition to Installation (Examples and Key Implementation Points)"></a>2.2 From Acquisition to Installation (Examples and Key Implementation Points)</h2><h3 id="Debian-Ubuntu-apt-dpkg-1"><a href="#Debian-Ubuntu-apt-dpkg-1" class="headerlink" title="Debian&#x2F;Ubuntu (apt + dpkg)"></a>Debian&#x2F;Ubuntu (<code>apt</code> + <code>dpkg</code>)</h3><ul>
<li><strong>Acquisition</strong>: <code>apt update</code> refreshes the index, <code>apt install pkg</code> downloads the <code>.deb</code> from the APT repository.</li>
<li><strong>Verification</strong>: Repository metadata is typically GPG signed; <code>apt</code>&#x2F;<code>dpkg</code> verifies the signature and package integrity.</li>
<li><strong>Installation Process</strong>: <code>dpkg</code> unpacks to the filesystem (usually <code>/usr/bin</code>, <code>/usr/lib</code>, <code>/etc</code>), processes the control file (dependencies, metadata), and executes <code>preinst</code>, <code>postinst</code>, <code>prerm</code>, <code>postrm</code> scripts (package maintainer scripts). <code>apt</code> resolves dependencies at a higher level, automatically fetches required packages, and calls <code>dpkg</code>. After installation, it may run <code>ldconfig</code>, <code>update-desktop-database</code>, <code>update-mime-database</code>, etc.</li>
<li><strong>Configuration Preservation</strong>: By default, <code>apt remove</code> retains configuration files in <code>/etc</code> (called <strong>conffiles</strong>); <code>apt purge</code> or <code>dpkg --purge</code> deletes the configuration.</li>
<li><strong>Uninstallation</strong>: <code>apt remove packagename</code> &#x2F; <code>apt purge packagename</code>; orphaned dependencies can be cleaned up with <code>apt autoremove</code>.</li>
<li><strong>Rollback</strong>: No built-in atomic rollback (can be achieved using snapshot technologies like LVM&#x2F;ZFS or by using NixOS, etc.).</li>
</ul>
<h3 id="RHEL-Fedora-dnf-yum-rpm-1"><a href="#RHEL-Fedora-dnf-yum-rpm-1" class="headerlink" title="RHEL &#x2F; Fedora (dnf&#x2F;yum + rpm)"></a>RHEL &#x2F; Fedora (<code>dnf</code>&#x2F;<code>yum</code> + <code>rpm</code>)</h3><ul>
<li>Works similarly to <code>.deb</code>: <code>rpm</code> manages package installation&#x2F;uninstallation, <code>dnf</code> handles repository&#x2F;dependency resolution and calls <code>rpm</code>.</li>
<li><code>rpm</code> has pre&#x2F;post scripts, handles SELinux context installation (<code>restorecon</code>), and the <code>alternatives</code> manager for selecting different implementations.</li>
<li><strong>Note</strong>: SELinux may affect post-installation behavior (requires <code>restorecon</code>&#x2F;policy allowance).</li>
</ul>
<h3 id="Arch-pacman-3"><a href="#Arch-pacman-3" class="headerlink" title="Arch (pacman)"></a>Arch (<code>pacman</code>)</h3><ul>
<li>Binary package management, rolling release; <code>pacman -Syu</code> updates the system, <code>pacman -S package</code> installs.</li>
<li>Features the <strong>AUR</strong> (Arch User Repository) providing PKGBUILD source package scripts, maintained by the community.</li>
<li>Multiple options for deletion, including configurations&#x2F;dependencies (<code>pacman -R</code>, <code>-Rs</code>, <code>-Rns</code>).</li>
</ul>
<h3 id="Alpine-apk-1"><a href="#Alpine-apk-1" class="headerlink" title="Alpine (apk)"></a>Alpine (<code>apk</code>)</h3><ul>
<li>Lightweight, optimized for container images; <code>apk add pkg</code>, packages are typically smaller, targeting musl libc.</li>
<li>Container image size-friendly, but a smaller ecosystem.</li>
</ul>
<h3 id="Gentoo-Portage-1"><a href="#Gentoo-Portage-1" class="headerlink" title="Gentoo (Portage)"></a>Gentoo (<code>Portage</code>)</h3><ul>
<li><code>emerge package</code> compiles from source code, using <strong>USE flags</strong> for feature customization. Installation is essentially source configuration + make -&gt; install. Highly optimizable but time-consuming.</li>
</ul>
<h3 id="Nix-Guix-1"><a href="#Nix-Guix-1" class="headerlink" title="Nix &#x2F; Guix"></a>Nix &#x2F; Guix</h3><ul>
<li>Packages are installed into isolated, content-addressed paths in <code>/nix/store</code>; they do not overwrite system files; software is activated via environments or profiles.</li>
<li><strong>Pros</strong>: Co-existence of multiple versions, reproducibility, atomic rollback. Steeper learning curve.</li>
</ul>
<h2 id="2-3-Cross-Distribution-Packages-Flatpak-Snap-AppImage-Desktop-Applications"><a href="#2-3-Cross-Distribution-Packages-Flatpak-Snap-AppImage-Desktop-Applications" class="headerlink" title="2.3 Cross-Distribution Packages: Flatpak &#x2F; Snap &#x2F; AppImage (Desktop Applications)"></a>2.3 Cross-Distribution Packages: Flatpak &#x2F; Snap &#x2F; AppImage (Desktop Applications)</h2><ul>
<li><strong>Flatpak</strong>: Application content is separate from the <strong>runtime</strong> (shared dependencies), installed using <code>flatpak install flathub com.example.App</code>. Has declarative permissions (file access, networking, etc.), sandboxing is based on <strong>bubblewrap</strong>. <strong>Pros</strong>: Good consistency, controllable permissions. <strong>Cons</strong>: Disk usage, integration requires handling.</li>
<li><strong>Snap</strong>: <code>snap install package</code>; <strong>snapd</strong> manages auto-updates, <strong>confinement</strong> (AppArmor); often criticized for being somewhat centralized (Canonical Store).</li>
<li><strong>AppImage</strong>: Single-file executable; user downloads, runs <code>chmod +x file.AppImage</code>, and executes directly. No automatic updates or sandboxing (can be used with external tools). <strong>Pros</strong>: Portable. <strong>Cons</strong>: Updates and integration must be implemented by the developer&#x2F;user.</li>
</ul>
<h2 id="2-4-Typical-Installation-Scripts-and-Hooks-Linux’s-“Magic”"><a href="#2-4-Typical-Installation-Scripts-and-Hooks-Linux’s-“Magic”" class="headerlink" title="2.4 Typical Installation Scripts and Hooks (Linux’s “Magic”)"></a>2.4 Typical Installation Scripts and Hooks (Linux’s “Magic”)</h2><ul>
<li>Includes <code>preinst/postinst/prerm/postrm</code> (Debian) or <code>%pre/%post/%preun/%postun</code> (RPM) scripts, used for: creating users&#x2F;groups, setting permissions, registering systemd units, rebuilding caches.</li>
<li><strong>System Integration</strong>: systemd unit files usually go in <code>/lib/systemd/system</code> or <code>/etc/systemd/system</code>; after installation, <code>systemctl daemon-reload</code> and enabling the service <code>systemctl enable --now foo.service</code> are required.</li>
</ul>
<h2 id="2-5-File-Locations-Following-FHS-Filesystem-Hierarchy-Standard"><a href="#2-5-File-Locations-Following-FHS-Filesystem-Hierarchy-Standard" class="headerlink" title="2.5 File Locations (Following FHS - Filesystem Hierarchy Standard)"></a>2.5 File Locations (Following FHS - Filesystem Hierarchy Standard)</h2><p>Common paths (Linux):</p>
<ul>
<li>Executables: <code>/usr/bin</code>, <code>/usr/sbin</code>, <code>/usr/local/bin</code>, <code>/opt/&lt;app&gt;/bin</code></li>
<li>Libraries: <code>/usr/lib</code> (architecture subdirectories), <code>/usr/local/lib</code></li>
<li>Configuration: <code>/etc/&lt;app&gt;</code> (system-wide configuration)</li>
<li>Data: <code>/var/lib/&lt;app&gt;</code> (databases, state)</li>
<li>Logs: <code>/var/log/&lt;app&gt;</code></li>
<li>Desktop files: <code>/usr/share/applications/*.desktop</code> (for menu integration)</li>
</ul>
<h2 id="2-6-Permissions-Signing-and-Security"><a href="#2-6-Permissions-Signing-and-Security" class="headerlink" title="2.6 Permissions, Signing, and Security"></a>2.6 Permissions, Signing, and Security</h2><ul>
<li>Distribution repositories typically use <strong>GPG signing</strong> for metadata; <code>apt</code>&#x2F;<code>dnf</code> checks the signature. Flatpak&#x2F;Snap&#x2F;Store have their own signing and review processes.</li>
<li><strong>Sandboxing</strong>: Flatpak (bubblewrap), Snap (AppArmor); traditional packages usually lack sandboxing (rely on system security mechanisms like SELinux &#x2F; AppArmor).</li>
<li><strong>Upgrade Policy</strong>: Snap has automatic background updates, Flatpak can also update regularly; traditional packages rely on running <code>apt/dnf/pacman</code>.</li>
</ul>
<h2 id="2-7-Details-of-Uninstallation-and-Cleanup"><a href="#2-7-Details-of-Uninstallation-and-Cleanup" class="headerlink" title="2.7 Details of Uninstallation and Cleanup"></a>2.7 Details of Uninstallation and Cleanup</h2><ul>
<li><strong>Debian’s <code>conffiles</code></strong>: <code>apt remove</code> keeps configurations, <code>apt purge</code> deletes them. <code>dpkg -l</code> shows status.</li>
<li><strong>Orphaned dependencies</strong>: <code>apt autoremove</code>, <code>dnf autoremove</code>, <code>pacman -Qdt</code>, etc.</li>
<li><strong>Source compilation installation</strong> (<code>make install</code>) is often difficult to uninstall; recommended to use <strong>checkinstall</strong> or package the build output as a <code>.deb</code>&#x2F;<code>.rpm</code>, or use <strong>stow</strong> to manage files under <code>/usr/local</code>.</li>
</ul>
<hr>
<h1 id="III-Windows-—-Installation-Process-and-Characteristics"><a href="#III-Windows-—-Installation-Process-and-Characteristics" class="headerlink" title="III. Windows — Installation Process and Characteristics"></a>III. Windows — Installation Process and Characteristics</h1><h2 id="3-1-Common-Packaging-Distribution-Methods"><a href="#3-1-Common-Packaging-Distribution-Methods" class="headerlink" title="3.1 Common Packaging&#x2F;Distribution Methods"></a>3.1 Common Packaging&#x2F;Distribution Methods</h2><ul>
<li><strong>EXE installer</strong> (custom installer, usually NSIS&#x2F;InnoSetup&#x2F;InstallShield)</li>
<li><strong>MSI (Windows Installer)</strong> (structured installation, supports transactions, manageable by enterprise)</li>
<li><strong>MSIX &#x2F; APPX</strong> (modern package, supported by the Windows Store, sandboxed and signed)</li>
<li><strong>Windows Store &#x2F; Microsoft Store</strong> (centralized review and automatic updates)</li>
<li><strong>Portable single file</strong> (runs directly after extraction, “green” version)</li>
<li><strong>Package Managers</strong>: <code>winget</code>, Chocolatey, Scoop (third-party)</li>
</ul>
<h2 id="3-2-Key-Implementation-Points-for-the-Life-Cycle"><a href="#3-2-Key-Implementation-Points-for-the-Life-Cycle" class="headerlink" title="3.2 Key Implementation Points for the Life Cycle"></a>3.2 Key Implementation Points for the Life Cycle</h2><ul>
<li><strong>Acquisition and Verification</strong>: <strong>Digital signature (Authenticode)</strong> is the common verification method; MSI&#x2F;EXE packages can carry a signing certificate. Windows Store apps are subject to store review and signing.</li>
<li><strong>Installation</strong>: EXE&#x2F;MSI typically require <strong>Administrator permissions (UAC)</strong> to write to <code>C:\Program Files</code> or register system services&#x2F;drivers. MSI supports rollback, installation transactions, and a standard uninstallation interface.</li>
<li><strong>Registration and Integration</strong>: Writing to the <strong>Registry</strong> (<code>HKLM</code> &#x2F; <code>HKCU</code>), adding Start Menu shortcuts, modifying the <strong>PATH</strong> (system-wide or user-level).</li>
<li><strong>Services &#x2F; Drivers</strong>: Windows Services are registered via the <strong>Service Control Manager (SCM)</strong>; drivers need to be signed (WHQL) and loaded as kernel modules.</li>
<li><strong>Upgrade</strong>: Through built-in updates, MSI patch (MSP), application-specific updates (Squirrel, Sparkle-like frameworks for Windows), or Windows Update &#x2F; Store.</li>
<li><strong>Uninstallation</strong>: Via the uninstallation entry in Control Panel&#x2F;Settings (MSI handles rollback automatically); if an EXE provides an uninstaller, that is run. Residual files are common (Registry, user configuration) and may require cleanup tools or third-party cleanup.</li>
</ul>
<h2 id="3-3-Security-and-Permissions"><a href="#3-3-Security-and-Permissions" class="headerlink" title="3.3 Security and Permissions"></a>3.3 Security and Permissions</h2><ul>
<li><strong>UAC</strong>: User confirms to gain administrator privileges. If the installer doesn’t request UAC, it can only perform user-level installation (<code>%LocalAppData%</code>).</li>
<li><strong>Signing and Reputation</strong>: Unsigned&#x2F;flagged software receives Windows Defender &#x2F; SmartScreen warnings during installation. Enterprises can use code signing certificates and corporate signing policies.</li>
</ul>
<hr>
<h1 id="IV-macOS-—-Installation-Process-and-Characteristics"><a href="#IV-macOS-—-Installation-Process-and-Characteristics" class="headerlink" title="IV. macOS — Installation Process and Characteristics"></a>IV. macOS — Installation Process and Characteristics</h1><h2 id="4-1-Common-Distribution-Methods"><a href="#4-1-Common-Distribution-Methods" class="headerlink" title="4.1 Common Distribution Methods"></a>4.1 Common Distribution Methods</h2><ul>
<li><strong>App Store</strong> (centralized, signed, and reviewed, automatic updates)</li>
<li><strong>.dmg + Drag-and-drop <code>.app</code></strong> (most common desktop application distribution)</li>
<li><strong>.pkg Installer</strong> (more complex installation steps, may require root, supports postinstall scripts)</li>
<li><strong>Homebrew &#x2F; MacPorts &#x2F; Fink</strong> (package management, focused on development&#x2F;command-line tools)</li>
<li><strong>Notarization &amp; Gatekeeper</strong>: Apple requires developers to notarize (scan by Apple) distributed binaries to prevent Gatekeeper from blocking installation.</li>
</ul>
<h2 id="4-2-Life-Cycle-Algorithm"><a href="#4-2-Life-Cycle-Algorithm" class="headerlink" title="4.2 Life Cycle Algorithm"></a>4.2 Life Cycle Algorithm</h2><ul>
<li><strong>Installation</strong>: Dragging the <code>.app</code> to <code>/Applications</code> (users can drag to their own directory), or running a <code>.pkg</code> (requires admin password). The <code>.app</code> is essentially a directory bundle containing the binary (Mach-O), resources, and <code>Info.plist</code>.</li>
<li><strong>Verification</strong>: <strong>Gatekeeper</strong> checks the signature and notarization. App Store apps are managed by Apple for signing&#x2F;updating.</li>
<li><strong>Services</strong>: Background services use <strong>launchd</strong> (<code>.plist</code> files in <code>/Library/LaunchDaemons</code> or <code>~/Library/LaunchAgents</code>).</li>
<li><strong>Upgrade</strong>: App Store automatic updates; non-store applications often use <strong>Sparkle</strong> (a common macOS auto-update framework) or developer-built updates. Homebrew uses <code>brew upgrade</code>.</li>
<li><strong>Uninstallation</strong>: Dragging the <code>.app</code> to the Trash (common), but configuration files often remain (<code>~/Library/Preferences</code>, <code>~/Library/Application Support</code>); <code>pkg</code> installations may have an uninstaller script or require manual cleanup. Homebrew provides <code>brew uninstall</code> for complete removal.</li>
</ul>
<h2 id="4-3-Permissions-and-Kernel-Extensions"><a href="#4-3-Permissions-and-Kernel-Extensions" class="headerlink" title="4.3 Permissions and Kernel Extensions"></a>4.3 Permissions and Kernel Extensions</h2><ul>
<li>Newer macOS versions restrict <strong>kext</strong> (kernel extensions), favoring <strong>System Extensions</strong> or <strong>DriverKit</strong>. Stronger emphasis on notarization and user interaction (security).</li>
</ul>
<hr>
<h1 id="V-Key-Comparison-Quick-Points"><a href="#V-Key-Comparison-Quick-Points" class="headerlink" title="V. Key Comparison (Quick Points)"></a>V. Key Comparison (Quick Points)</h1><ul>
<li><strong>Dependency Management</strong>: Linux distro package managers automatically resolve and install dependencies (<code>.deb</code> &#x2F; <code>.rpm</code> &#x2F; <code>pacman</code>); Windows EXE packages often include required dependencies or rely on system libraries (sometimes via redistributables); macOS <code>.app</code> typically contains required libraries or uses system frameworks.</li>
<li><strong>Sandboxing&#x2F;Isolation</strong>: Flatpak&#x2F;Snap&#x2F;Container (Linux) vs. App Store&#x2F;Notarized apps + sandboxing (macOS) vs. MSIX&#x2F;Store (Windows). Traditional system packages (Linux, Windows EXE&#x2F;Installer) often do not provide automated sandboxing.</li>
<li><strong>Permissions&#x2F;Admin</strong>: Linux system package installation requires <strong>root</strong>; Windows installation to Program Files &#x2F; Registry requires <strong>UAC</strong> authorization; macOS dragging <code>.app</code> can be root-free (putting it in <code>/Applications</code> might require it).</li>
<li><strong>Rollback&#x2F;Transaction</strong>: Nix&#x2F;Guix&#x2F;rpm-ostree provide <strong>atomic rollback</strong>; MSI provides transactional and rollback support; traditional apt&#x2F;rpm&#x2F;pacman lack atomic whole-system rollback (can use snapshots).</li>
<li><strong>Update Mechanism</strong>: Linux: Central repo&#x2F;Flatpak&#x2F;Snap automatic or manual update; Windows: Store&#x2F;Windows Update + application-specific; macOS: App Store&#x2F;Sparkle&#x2F;Homebrew.</li>
<li><strong>Residual Files after Uninstallation</strong>: Windows Registry and services often remain; macOS <code>.app</code> often leaves Library configuration; Linux <code>purge</code>&#x2F;<code>autoremove</code> can clean up but requires correct operation.</li>
</ul>
<hr>
<h1 id="VI-Practical-Advice-for-Developers-Packaging-Maintainers"><a href="#VI-Practical-Advice-for-Developers-Packaging-Maintainers" class="headerlink" title="VI. Practical Advice for Developers &#x2F; Packaging Maintainers"></a>VI. Practical Advice for Developers &#x2F; Packaging Maintainers</h1><ol>
<li><p><strong>Desktop Applications</strong>:</p>
<ul>
<li><strong>Priority</strong>: <strong>Flatpak (Flathub)</strong> + <strong>AppImage</strong> (for quick download); concurrently provide <code>.deb</code>&#x2F;<code>.rpm</code> (or distro-specific repo) for deep system integration.</li>
<li>macOS: Provide <code>.dmg</code> or App Store; Windows: Provide <strong>MSI</strong> (easier for enterprise management) and sign it.</li>
</ul>
</li>
<li><p><strong>Server Software</strong>: Prioritize <strong>native packages</strong> (<code>.deb</code>&#x2F;<code>.rpm</code>) or <strong>container images</strong> (Docker&#x2F;OCI); for reproducible deployment, choose Nix&#x2F;Guix or incorporate deployment into image&#x2F;configuration management (Ansible, Salt).</p>
</li>
<li><p><strong>CI Automation</strong>: Automatically build multiple targets in CI (deb&#x2F;rpm&#x2F;flatpak&#x2F;appimage&#x2F;msi&#x2F;zip) and sign and publish to corresponding channels.</p>
</li>
<li><p><strong>Security</strong>: Signing and automatic updates are crucial; use sandboxing (Flatpak, Snap) or containerization to reduce the attack surface.</p>
</li>
<li><p><strong>Cleanup Policy</strong>: Provide uninstall&#x2F;purge scripts, clearly document configuration file locations, and avoid accidental deletion of user data (prompt to retain user data or backup).</p>
</li>
</ol>
<hr>
<h1 id="VII-Quick-Reference-Command-Examples-Practical"><a href="#VII-Quick-Reference-Command-Examples-Practical" class="headerlink" title="VII. Quick Reference Command Examples (Practical)"></a>VII. Quick Reference Command Examples (Practical)</h1><h2 id="Linux-Debian-Ubuntu"><a href="#Linux-Debian-Ubuntu" class="headerlink" title="Linux (Debian&#x2F;Ubuntu)"></a>Linux (Debian&#x2F;Ubuntu)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># View package information</span></span><br><span class="line">apt show nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uninstall (keep configuration)</span></span><br><span class="line"><span class="built_in">sudo</span> apt remove nginx</span><br><span class="line"><span class="comment"># Uninstall and delete configuration</span></span><br><span class="line"><span class="built_in">sudo</span> apt purge nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clean up orphaned dependencies</span></span><br><span class="line"><span class="built_in">sudo</span> apt autoremove</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line"><span class="comment">## Fedora/RHEL</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line"><span class="built_in">sudo</span> dnf install httpd</span><br><span class="line"><span class="built_in">sudo</span> dnf remove httpd</span><br><span class="line"><span class="built_in">sudo</span> dnf autoremove</span><br></pre></td></tr></table></figure>

<h2 id="Arch-1"><a href="#Arch-1" class="headerlink" title="Arch"></a>Arch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -Syu</span><br><span class="line"><span class="built_in">sudo</span> pacman -S package</span><br><span class="line"><span class="built_in">sudo</span> pacman -Rns package   <span class="comment"># Remove and remove files not depended on by other packages</span></span><br></pre></td></tr></table></figure>

<h2 id="Flatpak-Snap-AppImage-1"><a href="#Flatpak-Snap-AppImage-1" class="headerlink" title="Flatpak &#x2F; Snap &#x2F; AppImage"></a>Flatpak &#x2F; Snap &#x2F; AppImage</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flatpak</span></span><br><span class="line">flatpak install flathub com.spotify.Client</span><br><span class="line">flatpak update</span><br><span class="line">flatpak uninstall com.spotify.Client</span><br><span class="line"></span><br><span class="line"><span class="comment"># Snap</span></span><br><span class="line"><span class="built_in">sudo</span> snap install vlc</span><br><span class="line"><span class="built_in">sudo</span> snap remove vlc</span><br><span class="line"></span><br><span class="line"><span class="comment"># AppImage (Run)</span></span><br><span class="line"><span class="built_in">chmod</span> +x SomeApp.AppImage</span><br><span class="line">./SomeApp.AppImage</span><br></pre></td></tr></table></figure>

<h2 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># winget</span></span><br><span class="line">winget search <span class="number">7</span>zip</span><br><span class="line">winget install <span class="literal">--id</span>=<span class="number">7</span>zip.<span class="number">7</span>zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># MSI (Uninstall)</span></span><br><span class="line">msiexec /x &#123;PRODUCT<span class="literal">-CODE-GUID</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="macOS-1"><a href="#macOS-1" class="headerlink" title="macOS"></a>macOS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Homebrew</span></span><br><span class="line">brew install wget</span><br><span class="line">brew uninstall wget</span><br><span class="line"></span><br><span class="line"><span class="comment"># DMG: Mount and copy to /Applications (GUI common)</span></span><br><span class="line">hdiutil attach MyApp.dmg</span><br><span class="line"><span class="comment"># Manually drag-and-drop or command-line copy .app to /Applications</span></span><br></pre></td></tr></table></figure>

<h2 id="Nix-1"><a href="#Nix-1" class="headerlink" title="Nix"></a>Nix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nix-env -iA nixpkgs.hello</span><br><span class="line">nix-env -e hello</span><br><span class="line"><span class="comment"># NixOS: system configuration + nixos-rebuild switch</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="VIII-Common-Issues-Traps-and-Notes"><a href="#VIII-Common-Issues-Traps-and-Notes" class="headerlink" title="VIII. Common Issues &#x2F; Traps and Notes"></a>VIII. Common Issues &#x2F; Traps and Notes</h1><ul>
<li><strong>Do not manage system packages directly with <code>make install</code></strong>: Uninstallation is difficult unless the package is bundled as a <code>.deb</code>&#x2F;<code>.rpm</code>; recommended to use <strong>checkinstall</strong> or create a local package.</li>
<li><strong>Mind glibc &#x2F; libc compatibility</strong>: AppImage can be self-contained, Flatpak&#x2F;runtime is designed to mitigate glibc compatibility issues; but compilation for specific distributions still needs attention.</li>
<li><strong>Graphical integration issues</strong>: Flatpak applications need to correctly declare file access and desktop integration permissions (<code>--filesystem=home</code>, etc.).</li>
<li><strong>Trade-offs of automatic updates</strong>: Snap’s automatic updates are convenient but can impact deployment control; server environments typically disable automatic updates, using a controlled update strategy.</li>
<li><strong>Drivers&#x2F;Kernel Modules</strong>: Require privileged installation and signing (Linux DKMS, Windows WHQL, macOS kext notarize&#x2F;approval).</li>
</ul>
<hr>
<h1 id="IX-Concise-Comparison-Table"><a href="#IX-Concise-Comparison-Table" class="headerlink" title="IX. Concise Comparison Table"></a>IX. Concise Comparison Table</h1><ul>
<li><strong>Desktop Friendliness &#x2F; User Usability</strong>: macOS App Store ≈ Windows Store &gt; DMG&#x2F;MSI installers &gt; Flatpak&#x2F;Snap &gt; AppImage &gt; Native distro packages (for general users)</li>
<li><strong>Cross-Distribution Portability</strong>: AppImage ≈ Flatpak &gt; Snap &gt; Native packages</li>
<li><strong>System Integration &amp; Manageability (Enterprise&#x2F;Server)</strong>: Native packages (<code>.deb</code>&#x2F;<code>.rpm</code>) &gt; MSI&#x2F;MSIX &gt; Containers (Docker)</li>
<li><strong>Security&#x2F;Isolation</strong>: Nix&#x2F;Guix &#x2F; rpm-ostree (system immutability) ≈ Flatpak&#x2F;Snap (application-level sandbox) &gt; Native packages (relies on host security)</li>
<li><strong>Rollback</strong>: Nix&#x2F;Guix&#x2F;rpm-ostree &gt; MSI (limited transactionality) &gt; Ordinary package managers (requires snapshots)</li>
</ul>
<hr>
<h1 id="X-Conclusion-and-Recommendations"><a href="#X-Conclusion-and-Recommendations" class="headerlink" title="X. Conclusion and Recommendations"></a>X. Conclusion and Recommendations</h1><ul>
<li><strong>As a Linux desktop user &#x2F; developer</strong>: Prioritize supporting <strong>Flatpak (Flathub)</strong> to cover the most distributions; provide AppImage as a lightweight download; and build <code>.deb</code>&#x2F;<code>.rpm</code> for critical distributions.</li>
<li><strong>As a Linux server&#x2F;operations professional</strong>: Use distribution native packages or container images; if reproducibility&#x2F;rollback is needed, evaluate <strong>NixOS &#x2F; Guix &#x2F; rpm-ostree</strong> or a disk-level snapshot strategy.</li>
<li><strong>If you maintain a cross-platform application</strong>: Automatically generate target platform packages in CI (MSI&#x2F;EXE + dmg + flatpak + snap + appimage + deb&#x2F;rpm) and perform signing and automatic publishing for each.</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://cherises.github.io/post/37316/">https://cherises.github.io/post/37316/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://github.com/Cherises/">Leonardo</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/">包管理器</a><a class="post-meta__tags" href="/tags/Deb/">Deb</a><a class="post-meta__tags" href="/tags/Rpm/">Rpm</a><a class="post-meta__tags" href="/tags/Snap/">Snap</a><a class="post-meta__tags" href="/tags/Flatpak/">Flatpak</a><a class="post-meta__tags" href="/tags/apt/">apt</a></div><div class="post-share"><div class="social-share" data-image="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/46.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/actor-1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Leonardo</div><div class="author-info-description">Focus on thinking, imagination, reasoning, truth-seeking, and pragmatism</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">143</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">23</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Cherises/"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">前情提要</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Executive-summary%EF%BC%88%E6%91%98%E8%A6%81%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">Executive summary（摘要）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%B8%B8%E8%A7%81%E2%80%9C%E4%BC%A0%E7%BB%9F%E2%80%9D%E5%8C%85%E6%A0%BC%E5%BC%8F%E4%B8%8E%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E6%8C%89%E5%8F%91%E8%A1%8C%E7%89%88-%E5%AE%B6%E6%97%8F%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">1. 常见“传统”包格式与管理器（按发行版&#x2F;家族）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian-Ubuntu-deb-dpkg-apt"><span class="toc-number">0.1.</span> <span class="toc-text">Debian &#x2F; Ubuntu: .deb (+ dpkg &#x2F; apt)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RPM-%E7%B3%BB%E5%88%97%EF%BC%9Arpm-dnf-yum-zypper%EF%BC%88Fedora-RHEL-CentOS-openSUSE%EF%BC%89"><span class="toc-number">0.2.</span> <span class="toc-text">RPM 系列：rpm + dnf&#x2F;yum&#x2F;zypper（Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arch-pacman"><span class="toc-number">0.3.</span> <span class="toc-text">Arch: pacman</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alpine-apk%EF%BC%88Alpine-Package-Keeper%EF%BC%89"><span class="toc-number">0.4.</span> <span class="toc-text">Alpine: apk（Alpine Package Keeper）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gentoo-Portage-emerge"><span class="toc-number">0.5.</span> <span class="toc-text">Gentoo: Portage (emerge)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E2%80%9C%E8%B7%A8%E5%8F%91%E8%A1%8C%E7%89%88-%E6%A1%8C%E9%9D%A2%E5%AF%BC%E5%90%91-%E5%8F%AF%E7%A7%BB%E6%A4%8D%E2%80%9D%E6%89%93%E5%8C%85%E6%A0%BC%E5%BC%8F%EF%BC%88Flatpak-Snap-AppImage%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">2. “跨发行版 &#x2F; 桌面导向 &#x2F; 可移植”打包格式（Flatpak &#x2F; Snap &#x2F; AppImage）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Flatpak%EF%BC%88%E6%A1%8C%E9%9D%A2%E6%B2%99%E7%AE%B1-OSTree-%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">0.1.</span> <span class="toc-text">Flatpak（桌面沙箱 + OSTree 后端）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Snap%EF%BC%88Canonical-%E5%87%BA%E5%93%81%EF%BC%89"><span class="toc-number">0.2.</span> <span class="toc-text">Snap（Canonical 出品）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AppImage%EF%BC%88%E5%8D%95%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%EF%BC%89"><span class="toc-number">0.3.</span> <span class="toc-text">AppImage（单文件可执行）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E2%80%9C%E5%87%BD%E6%95%B0%E5%BC%8F-%E4%BA%8B%E5%8A%A1%E6%80%A7-%E5%8E%9F%E5%AD%90%E6%9B%B4%E6%96%B0%E2%80%9D%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88Nix-Guix-rpm-ostree-%E7%AD%89%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">3. “函数式 &#x2F; 事务性 &#x2F; 原子更新”管理器（Nix &#x2F; Guix &#x2F; rpm-ostree 等）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nix%EF%BC%88%E7%BA%AF%E5%87%BD%E6%95%B0%E5%BC%8F%E5%8C%85%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-number">0.1.</span> <span class="toc-text">Nix（纯函数式包管理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Guix%EF%BC%88%E7%B1%BB%E4%BC%BC-Nix%EF%BC%8C%E4%BD%86%E7%94%A8-GNU-Scheme%EF%BC%89"><span class="toc-number">0.2.</span> <span class="toc-text">Guix（类似 Nix，但用 GNU Scheme）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rpm-ostree%EF%BC%88%E6%B7%B7%E5%90%88%E9%95%9C%E5%83%8F-%E5%8C%85%E7%B3%BB%E7%BB%9F%EF%BC%9B%E7%94%A8%E4%BA%8E-Silverblue-%E7%AD%89%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%A1%8C%E9%9D%A2%EF%BC%89"><span class="toc-number">0.3.</span> <span class="toc-text">rpm-ostree（混合镜像&#x2F;包系统；用于 Silverblue 等不可变桌面）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%AF%B9%E6%AF%94%E7%9F%A9%E9%98%B5%EF%BC%88%E5%85%B3%E9%94%AE%E7%BB%B4%E5%BA%A6%EF%BC%9A%E5%85%BC%E5%AE%B9%E6%80%A7-%E6%B2%99%E7%AE%B1-%E5%8E%9F%E5%AD%90%E6%9B%B4%E6%96%B0-%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%80%A7-%E7%BB%B4%E6%8A%A4%E6%88%90%E6%9C%AC-%E6%8E%A8%E8%8D%90%E5%9C%BA%E6%99%AF%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">4. 对比矩阵（关键维度：兼容性 &#x2F; 沙箱 &#x2F; 原子更新 &#x2F; 可移植性 &#x2F; 维护成本 &#x2F; 推荐场景）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AE%9E%E5%8A%A1%E5%BB%BA%E8%AE%AE%EF%BC%88%E7%BB%99%E4%B8%8D%E5%90%8C%E8%A7%92%E8%89%B2%E7%9A%84%E5%86%B3%E7%AD%96%E6%A0%91%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">5. 实务建议（给不同角色的决策树与最佳实践）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%98%AF%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%80%85%EF%BC%88%E7%9B%AE%E6%A0%87%E8%A6%86%E7%9B%96%E5%A4%9A%E6%95%B0-Linux-%E6%A1%8C%E9%9D%A2%E7%94%A8%E6%88%B7%EF%BC%89"><span class="toc-number">0.1.</span> <span class="toc-text">如果你是桌面应用开发者（目标覆盖多数 Linux 桌面用户）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6-%E8%BF%90%E7%BB%B4%EF%BC%88%E7%A8%B3%E5%AE%9A%E6%80%A7%E3%80%81%E6%80%A7%E8%83%BD%E4%B8%8E%E5%8F%AF%E5%AE%A1%E8%AE%A1%E6%80%A7%E4%BC%98%E5%85%88%EF%BC%89"><span class="toc-number">0.2.</span> <span class="toc-text">如果你是服务器软件&#x2F;运维（稳定性、性能与可审计性优先）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%98%AF%E5%8F%91%E8%A1%8C%E7%89%88%E7%BB%B4%E6%8A%A4%E8%80%85-%E6%89%93%E5%8C%85%E7%BB%B4%E6%8A%A4%E8%80%85"><span class="toc-number">0.3.</span> <span class="toc-text">如果你是发行版维护者 &#x2F; 打包维护者</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA%E4%B8%8E%E5%AE%9E%E9%99%85%E5%9D%91%EF%BC%88%E7%BB%99%E5%BC%80%E5%8F%91%E8%80%85-%E7%AE%A1%E7%90%86%E5%91%98%E7%9A%84%E6%8F%90%E9%86%92%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">6. 常见误区与实际坑（给开发者&#x2F;管理员的提醒）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E7%BB%99%E4%B8%8A%E6%B8%B8%E5%8F%91%E5%B8%83%E8%80%85%E7%9A%84%E4%B8%80%E5%A5%97%E5%8F%AF%E6%89%A7%E8%A1%8C%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B%E5%BB%BA%E8%AE%AE%EF%BC%88%E6%9C%80%E5%B0%8F%E6%83%8A%E6%89%B0%E3%80%81%E8%A6%86%E7%9B%96%E6%9C%80%E5%A4%A7%E7%94%A8%E6%88%B7%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">7. 给上游发布者的一套可执行发布流程建议（最小惊扰、覆盖最大用户）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E7%BB%93%E8%AE%BA%EF%BC%88%E4%B8%80%E5%8F%A5%E8%AF%9D%E7%89%88-%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">8. 结论（一句话版 + 推荐）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number"></span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux-Windows-macOS-%E2%80%94-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%85%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%AF%B9%E6%AF%94%E6%8A%A5%E5%91%8A"><span class="toc-number"></span> <span class="toc-text">Linux &#x2F; Windows &#x2F; macOS — 软件安装全生命周期对比报告</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Executive-summary%EF%BC%88%E8%A6%81%E7%82%B9%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">Executive summary（要点）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%9A%84-%E9%80%9A%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%98%B6%E6%AE%B5%EF%BC%88%E4%BB%BB%E4%BD%95%E5%B9%B3%E5%8F%B0%E9%83%BD%E5%AD%98%E5%9C%A8%E7%9A%84%E9%AB%98%E5%B1%82%E6%AD%A5%E9%AA%A4%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">一、软件安装的 通用生命周期阶段（任何平台都存在的高层步骤）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Linux%EF%BC%88%E5%88%86%E5%8F%91%E5%BC%8F%E7%94%9F%E6%80%81%EF%BC%89%E2%80%94%E2%80%94%E8%AF%A6%E5%B0%BD%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%AE%E5%BC%82"><span class="toc-number"></span> <span class="toc-text">二、Linux（分发式生态）——详尽流程与差异</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E4%B8%A4%E7%B1%BB%E2%80%9C%E4%B8%BB%E8%A6%81%E8%8C%83%E5%BC%8F%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">2.1 两类“主要范式”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E4%BB%8E%E8%8E%B7%E5%8F%96%E5%88%B0%E5%AE%89%E8%A3%85%EF%BC%88%E4%B8%BE%E4%BE%8B%E4%B8%8E%E5%AE%9E%E7%8E%B0%E8%A6%81%E7%82%B9%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">2.2 从获取到安装（举例与实现要点）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian-Ubuntu-apt-dpkg"><span class="toc-number">2.1.</span> <span class="toc-text">Debian&#x2F;Ubuntu (apt + dpkg)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RHEL-Fedora-dnf-yum-rpm"><span class="toc-number">2.2.</span> <span class="toc-text">RHEL &#x2F; Fedora (dnf&#x2F;yum + rpm)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arch-pacman-1"><span class="toc-number">2.3.</span> <span class="toc-text">Arch (pacman)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alpine-apk"><span class="toc-number">2.4.</span> <span class="toc-text">Alpine (apk)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gentoo-Portage"><span class="toc-number">2.5.</span> <span class="toc-text">Gentoo (Portage)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nix-Guix"><span class="toc-number">2.6.</span> <span class="toc-text">Nix &#x2F; Guix</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%B7%A8%E5%8F%91%E8%A1%8C%E5%8C%85%EF%BC%9AFlatpak-Snap-AppImage%EF%BC%88%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">2.3 跨发行包：Flatpak &#x2F; Snap &#x2F; AppImage（桌面应用）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E5%85%B8%E5%9E%8B%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%E4%B8%8E-hook%EF%BC%88Linux-%E7%9A%84%E2%80%9C%E9%AD%94%E6%B3%95%E2%80%9D%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">2.4 典型安装脚本与 hook（Linux 的“魔法”）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE%EF%BC%88%E9%81%B5%E5%BE%AA-FHS%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">2.5 文件位置（遵循 FHS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E6%9D%83%E9%99%90%E3%80%81%E7%AD%BE%E5%90%8D%E4%B8%8E%E5%AE%89%E5%85%A8"><span class="toc-number">6.</span> <span class="toc-text">2.6 权限、签名与安全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%8D%B8%E8%BD%BD%E4%B8%8E%E6%B8%85%E7%90%86%E7%9A%84%E7%BB%86%E8%8A%82"><span class="toc-number">7.</span> <span class="toc-text">2.7 卸载与清理的细节</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Windows-%E2%80%94%E2%80%94-%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%E4%B8%8E%E7%89%B9%E7%82%B9"><span class="toc-number"></span> <span class="toc-text">三、Windows —— 安装流程与特点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%B8%B8%E8%A7%81%E6%89%93%E5%8C%85-%E5%88%86%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">3.1 常见打包&#x2F;分发方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%AE%9E%E7%8E%B0%E8%A6%81%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">3.2 生命周期实现要点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%AE%89%E5%85%A8%E4%B8%8E%E6%9D%83%E9%99%90"><span class="toc-number">3.</span> <span class="toc-text">3.3 安全与权限</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81macOS-%E2%80%94%E2%80%94-%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%E4%B8%8E%E7%89%B9%E7%82%B9"><span class="toc-number"></span> <span class="toc-text">四、macOS —— 安装流程与特点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%B8%B8%E8%A7%81%E5%88%86%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">4.1 常见分发方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%97%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">4.2 生命周期算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E6%9D%83%E9%99%90%E4%B8%8E%E5%86%85%E6%A0%B8%E6%89%A9%E5%B1%95"><span class="toc-number">3.</span> <span class="toc-text">4.3 权限与内核扩展</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%85%B3%E9%94%AE%E5%AF%B9%E6%AF%94%EF%BC%88%E5%BF%AB%E9%80%9F%E8%A6%81%E7%82%B9%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">五、关键对比（快速要点）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%AF%B9%E5%BC%80%E5%8F%91%E8%80%85-%E6%89%93%E5%8C%85%E7%BB%B4%E6%8A%A4%E8%80%85%E7%9A%84%E5%AE%9E%E5%8A%A1%E5%BB%BA%E8%AE%AE"><span class="toc-number"></span> <span class="toc-text">六、对开发者 &#x2F; 打包维护者的实务建议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%A4%BA%E4%BE%8B%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5%EF%BC%88%E5%AE%9E%E7%94%A8%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">七、示例命令速查（实用）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%EF%BC%88Debian-Ubuntu%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">Linux（Debian&#x2F;Ubuntu）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fedora-RHEL"><span class="toc-number">2.</span> <span class="toc-text">Fedora&#x2F;RHEL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arch"><span class="toc-number">3.</span> <span class="toc-text">Arch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Flatpak-Snap-AppImage"><span class="toc-number">4.</span> <span class="toc-text">Flatpak &#x2F; Snap &#x2F; AppImage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windows"><span class="toc-number">5.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#macOS"><span class="toc-number">6.</span> <span class="toc-text">macOS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nix"><span class="toc-number">7.</span> <span class="toc-text">Nix</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-%E9%99%B7%E9%98%B1%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number"></span> <span class="toc-text">八、常见问题 &#x2F; 陷阱与注意事项</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%AE%80%E6%98%8E%E5%AF%B9%E6%AF%94%E8%A1%A8"><span class="toc-number"></span> <span class="toc-text">九、简明对比表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%BB%BA%E8%AE%AE"><span class="toc-number"></span> <span class="toc-text">十、结论与建议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Background"><span class="toc-number">1.</span> <span class="toc-text">Background</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Executive-Summary"><span class="toc-number"></span> <span class="toc-text">Executive Summary</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Common-%E2%80%9CTraditional%E2%80%9D-Package-Formats-and-Managers-by-Distribution-Family"><span class="toc-number"></span> <span class="toc-text">1. Common “Traditional” Package Formats and Managers (by Distribution&#x2F;Family)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian-Ubuntu-deb-dpkg-apt-1"><span class="toc-number">0.1.</span> <span class="toc-text">Debian &#x2F; Ubuntu: .deb (+ dpkg &#x2F; apt)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RPM-Family-rpm-dnf-yum-zypper-Fedora-RHEL-CentOS-openSUSE"><span class="toc-number">0.2.</span> <span class="toc-text">RPM Family: rpm + dnf&#x2F;yum&#x2F;zypper (Fedora &#x2F; RHEL &#x2F; CentOS &#x2F; openSUSE)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arch-pacman-2"><span class="toc-number">0.3.</span> <span class="toc-text">Arch: pacman</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alpine-apk-Alpine-Package-Keeper"><span class="toc-number">0.4.</span> <span class="toc-text">Alpine: apk (Alpine Package Keeper)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gentoo-Portage-emerge-1"><span class="toc-number">0.5.</span> <span class="toc-text">Gentoo: Portage (emerge)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E2%80%9CCross-Distribution-Desktop-Oriented-Portable%E2%80%9D-Packaging-Formats-Flatpak-Snap-AppImage"><span class="toc-number"></span> <span class="toc-text">2. “Cross-Distribution &#x2F; Desktop-Oriented &#x2F; Portable” Packaging Formats (Flatpak &#x2F; Snap &#x2F; AppImage)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Flatpak-Desktop-Sandbox-OSTree-Backend"><span class="toc-number">0.1.</span> <span class="toc-text">Flatpak (Desktop Sandbox + OSTree Backend)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Snap-Canonical-Product"><span class="toc-number">0.2.</span> <span class="toc-text">Snap (Canonical Product)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AppImage-Single-File-Executable"><span class="toc-number">0.3.</span> <span class="toc-text">AppImage (Single-File Executable)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E2%80%9CFunctional-Transactional-Atomic-Update%E2%80%9D-Managers-Nix-Guix-rpm-ostree-etc"><span class="toc-number"></span> <span class="toc-text">3. “Functional &#x2F; Transactional &#x2F; Atomic Update” Managers (Nix &#x2F; Guix &#x2F; rpm-ostree, etc.)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nix-Purely-Functional-Package-Management"><span class="toc-number">0.1.</span> <span class="toc-text">Nix (Purely Functional Package Management)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Guix-Similar-to-Nix-but-uses-GNU-Scheme"><span class="toc-number">0.2.</span> <span class="toc-text">Guix (Similar to Nix, but uses GNU Scheme)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rpm-ostree-Hybrid-Image-Package-System-used-for-Silverblue-and-other-immutable-desktops"><span class="toc-number">0.3.</span> <span class="toc-text">rpm-ostree (Hybrid Image&#x2F;Package System; used for Silverblue and other immutable desktops)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Comparison-Matrix-Key-Dimensions-Compatibility-Sandboxing-Atomic-Updates-Portability-Maintenance-Cost-Recommended-Scenarios"><span class="toc-number"></span> <span class="toc-text">4. Comparison Matrix (Key Dimensions: Compatibility &#x2F; Sandboxing &#x2F; Atomic Updates &#x2F; Portability &#x2F; Maintenance Cost &#x2F; Recommended Scenarios)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Practical-Advice-Decision-Tree-and-Best-Practices-for-Different-Roles"><span class="toc-number"></span> <span class="toc-text">5. Practical Advice (Decision Tree and Best Practices for Different Roles)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#If-you-are-a-Desktop-Application-Developer-aiming-to-cover-most-Linux-desktop-users"><span class="toc-number">0.1.</span> <span class="toc-text">If you are a Desktop Application Developer (aiming to cover most Linux desktop users)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#If-you-are-Server-Software-Operations-stability-performance-and-auditability-prioritized"><span class="toc-number">0.2.</span> <span class="toc-text">If you are Server Software &#x2F; Operations (stability, performance, and auditability prioritized)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#If-you-are-a-Distribution-Maintainer-Packager"><span class="toc-number">0.3.</span> <span class="toc-text">If you are a Distribution Maintainer &#x2F; Packager</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Common-Misconceptions-and-Real-World-Pitfalls-Reminders-for-Developers-Administrators"><span class="toc-number"></span> <span class="toc-text">6. Common Misconceptions and Real-World Pitfalls (Reminders for Developers&#x2F;Administrators)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Recommended-Actionable-Release-Process-for-Upstream-Publishers-Minimal-disruption-maximum-user-coverage"><span class="toc-number"></span> <span class="toc-text">7. Recommended Actionable Release Process for Upstream Publishers (Minimal disruption, maximum user coverage)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-Conclusion-One-Sentence-Summary-Recommendations"><span class="toc-number"></span> <span class="toc-text">8. Conclusion (One-Sentence Summary + Recommendations)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#References"><span class="toc-number"></span> <span class="toc-text">References</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux-Windows-macOS-%E2%80%94-Software-Installation-Full-Life-Cycle-Comparison-Report"><span class="toc-number"></span> <span class="toc-text">Linux &#x2F; Windows &#x2F; macOS — Software Installation Full Life Cycle Comparison Report</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Executive-Summary-Key-Points"><span class="toc-number"></span> <span class="toc-text">Executive Summary (Key Points)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#I-The-Generic-Software-Installation-Life-Cycle-Stages-High-level-steps-present-on-any-platform"><span class="toc-number"></span> <span class="toc-text">I. The Generic Software Installation Life Cycle Stages (High-level steps present on any platform)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#II-Linux-Distributed-Ecosystem-%E2%80%94-Detailed-Process-and-Differences"><span class="toc-number"></span> <span class="toc-text">II. Linux (Distributed Ecosystem) — Detailed Process and Differences</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Two-%E2%80%9CMain-Paradigms%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">2.1 Two “Main Paradigms”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-From-Acquisition-to-Installation-Examples-and-Key-Implementation-Points"><span class="toc-number">2.</span> <span class="toc-text">2.2 From Acquisition to Installation (Examples and Key Implementation Points)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian-Ubuntu-apt-dpkg-1"><span class="toc-number">2.1.</span> <span class="toc-text">Debian&#x2F;Ubuntu (apt + dpkg)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RHEL-Fedora-dnf-yum-rpm-1"><span class="toc-number">2.2.</span> <span class="toc-text">RHEL &#x2F; Fedora (dnf&#x2F;yum + rpm)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arch-pacman-3"><span class="toc-number">2.3.</span> <span class="toc-text">Arch (pacman)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alpine-apk-1"><span class="toc-number">2.4.</span> <span class="toc-text">Alpine (apk)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gentoo-Portage-1"><span class="toc-number">2.5.</span> <span class="toc-text">Gentoo (Portage)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nix-Guix-1"><span class="toc-number">2.6.</span> <span class="toc-text">Nix &#x2F; Guix</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Cross-Distribution-Packages-Flatpak-Snap-AppImage-Desktop-Applications"><span class="toc-number">3.</span> <span class="toc-text">2.3 Cross-Distribution Packages: Flatpak &#x2F; Snap &#x2F; AppImage (Desktop Applications)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Typical-Installation-Scripts-and-Hooks-Linux%E2%80%99s-%E2%80%9CMagic%E2%80%9D"><span class="toc-number">4.</span> <span class="toc-text">2.4 Typical Installation Scripts and Hooks (Linux’s “Magic”)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-File-Locations-Following-FHS-Filesystem-Hierarchy-Standard"><span class="toc-number">5.</span> <span class="toc-text">2.5 File Locations (Following FHS - Filesystem Hierarchy Standard)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-Permissions-Signing-and-Security"><span class="toc-number">6.</span> <span class="toc-text">2.6 Permissions, Signing, and Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-Details-of-Uninstallation-and-Cleanup"><span class="toc-number">7.</span> <span class="toc-text">2.7 Details of Uninstallation and Cleanup</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#III-Windows-%E2%80%94-Installation-Process-and-Characteristics"><span class="toc-number"></span> <span class="toc-text">III. Windows — Installation Process and Characteristics</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Common-Packaging-Distribution-Methods"><span class="toc-number">1.</span> <span class="toc-text">3.1 Common Packaging&#x2F;Distribution Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Key-Implementation-Points-for-the-Life-Cycle"><span class="toc-number">2.</span> <span class="toc-text">3.2 Key Implementation Points for the Life Cycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Security-and-Permissions"><span class="toc-number">3.</span> <span class="toc-text">3.3 Security and Permissions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IV-macOS-%E2%80%94-Installation-Process-and-Characteristics"><span class="toc-number"></span> <span class="toc-text">IV. macOS — Installation Process and Characteristics</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Common-Distribution-Methods"><span class="toc-number">1.</span> <span class="toc-text">4.1 Common Distribution Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-Life-Cycle-Algorithm"><span class="toc-number">2.</span> <span class="toc-text">4.2 Life Cycle Algorithm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Permissions-and-Kernel-Extensions"><span class="toc-number">3.</span> <span class="toc-text">4.3 Permissions and Kernel Extensions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#V-Key-Comparison-Quick-Points"><span class="toc-number"></span> <span class="toc-text">V. Key Comparison (Quick Points)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VI-Practical-Advice-for-Developers-Packaging-Maintainers"><span class="toc-number"></span> <span class="toc-text">VI. Practical Advice for Developers &#x2F; Packaging Maintainers</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VII-Quick-Reference-Command-Examples-Practical"><span class="toc-number"></span> <span class="toc-text">VII. Quick Reference Command Examples (Practical)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-Debian-Ubuntu"><span class="toc-number">1.</span> <span class="toc-text">Linux (Debian&#x2F;Ubuntu)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arch-1"><span class="toc-number">2.</span> <span class="toc-text">Arch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Flatpak-Snap-AppImage-1"><span class="toc-number">3.</span> <span class="toc-text">Flatpak &#x2F; Snap &#x2F; AppImage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windows-1"><span class="toc-number">4.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#macOS-1"><span class="toc-number">5.</span> <span class="toc-text">macOS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nix-1"><span class="toc-number">6.</span> <span class="toc-text">Nix</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VIII-Common-Issues-Traps-and-Notes"><span class="toc-number"></span> <span class="toc-text">VIII. Common Issues &#x2F; Traps and Notes</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IX-Concise-Comparison-Table"><span class="toc-number"></span> <span class="toc-text">IX. Concise Comparison Table</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#X-Conclusion-and-Recommendations"><span class="toc-number"></span> <span class="toc-text">X. Conclusion and Recommendations</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/63534/" title="test"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/79.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="test"/></a><div class="content"><a class="title" href="/post/63534/" title="test">test</a><time datetime="2025-11-23T15:12:05.000Z" title="Created 2025-11-23 15:12:05">2025-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/37181/" title="获取新闻列表并调用大模型总结"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/345.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="获取新闻列表并调用大模型总结"/></a><div class="content"><a class="title" href="/post/37181/" title="获取新闻列表并调用大模型总结">获取新闻列表并调用大模型总结</a><time datetime="2025-11-16T17:20:17.000Z" title="Created 2025-11-16 17:20:17">2025-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/42087/" title="2025年11月16日网易新闻总结"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/532.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025年11月16日网易新闻总结"/></a><div class="content"><a class="title" href="/post/42087/" title="2025年11月16日网易新闻总结">2025年11月16日网易新闻总结</a><time datetime="2025-11-16T12:00:35.000Z" title="Created 2025-11-16 12:00:35">2025-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/61362/" title="2025年11月14日"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/195.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025年11月14日"/></a><div class="content"><a class="title" href="/post/61362/" title="2025年11月14日">2025年11月14日</a><time datetime="2025-11-14T17:51:59.000Z" title="Created 2025-11-14 17:51:59">2025-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2522/" title="第一个微调训练模型"><img src="https://raw.githubusercontent.com/Cherises/Blog-Resource-2/refs/heads/main/photos/genshin/emoj/263.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第一个微调训练模型"/></a><div class="content"><a class="title" href="/post/2522/" title="第一个微调训练模型">第一个微调训练模型</a><time datetime="2025-11-12T20:15:08.000Z" title="Created 2025-11-12 20:15:08">2025-11-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By Leonardo</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/scroll-disable-blur.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章🔍" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>